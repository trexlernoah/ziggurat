import{$ as Nt,$a as D,$b as Gr,A as Fr,Aa as To,Ab as M,Ac as el,B as Ot,Ba as $e,Bb as O,Bc as Yr,C as fh,Ca as Vc,Cb as te,Cc as vi,D as Oc,Da as Oe,Db as zc,Dc as tl,E as Io,Ea as q,Eb as $c,Ec as il,F as Nc,Fa as zn,Fb as qc,Fc as Lt,G as Pv,Ga as ae,Gb as ri,Gc as ab,H as Lr,Ha as xo,Hb as me,Hc as cb,I as Ue,Ia as jv,Ib as ye,Ic as nl,J as ph,Ja as jc,Jb as xt,Jc as lb,K as dn,Ka as Uv,Kb as lt,Kc as rl,L as un,La as Ht,Lb as pi,M as Fc,Ma as ni,Mb as Fi,N as gh,Na as So,Nb as _t,Nc as Ah,O as ct,Oa as jr,Ob as vt,Oc as sl,P as Mv,Pa as Ur,Pb as Li,Q as _h,Qa as Bv,Qb as $,Qc as Xr,R as vh,Ra as zv,Rb as si,Rc as Rh,S as hn,Sa as $v,Sb as Do,Sc as ol,T as Ct,Ta as qv,Tb as Wc,U as bh,Ua as Wv,Ub as Hc,V as Ov,Va as Hv,Vb as Gc,W as Nv,Wa as Gv,Wb as bt,X as Fv,Xa as Ft,Xb as ie,Y as Lc,Ya as Kv,Yb as gi,Z as Oi,Za as Ao,Zb as Kc,_ as Ye,_a as B,_b as Qc,a as P,aa as Ae,ab as Br,ac as Kr,b as he,ba as Ee,bb as zr,bc as xh,ca as Eo,cb as Qv,cc as Yc,d as HT,da as j,db as Uc,dc as Xc,e as cn,ea as H,eb as Bc,ec as Sh,f as T,fa as Lv,fb as Ro,fc as Zc,g as Et,ga as U,gb as $n,gc as Wn,h as Av,ha as yh,hb as Eh,hc as Jc,i as $t,ia as R,ib as Ch,ic as Zv,j as lh,ja as N,jb as ko,jc as yt,k as dh,ka as De,kb as Tt,kc as Jv,l as le,la as wh,lb as Xe,lc as Fe,m as at,ma as Co,mb as Yv,mc as Po,n as Pc,na as ee,nb as Th,nc as Mo,o as Rv,oa as G,ob as be,oc as _i,p as kv,pa as ge,pb as Xv,pc as eb,q as ln,qa as gt,qb as qn,qc as tb,r as uh,ra as Vv,rb as Re,rc as Qr,s as hh,sa as Ni,sb as Y,sc as ib,t as mh,ta as qt,tb as $r,tc as nb,u as je,ua as Wt,ub as Ne,uc as X,v as z,va as Be,vb as mi,vc as rb,w as Bn,wa as ze,wb as fi,wc as Oo,x as Mc,xa as Vr,xb as qr,xc as sb,y as Dv,ya as Ih,yb as Wr,yc as ob,z as W,za as mn,zb as Hr,zc as Hn}from"./chunk-MOJCPGK7.js";var Fo=class{},cl=class{},Vi=class i{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let n=e.indexOf(":");if(n>0){let r=e.slice(0,n),s=r.toLowerCase(),o=e.slice(n+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,n)=>{this.setHeaderEntries(n,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,n])=>{this.setHeaderEntries(e,n)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof i?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new i;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof i?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if(typeof n=="string"&&(n=[n]),n.length===0)return;this.maybeSetNormalizedName(t.name,e);let r=(t.op==="a"?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":let s=t.value;if(!s)this.headers.delete(e),this.normalizedNames.delete(e);else{let o=this.headers.get(e);if(!o)return;o=o.filter(c=>s.indexOf(c)===-1),o.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}break}}setHeaderEntries(t,e){let n=(Array.isArray(e)?e:[e]).map(s=>s.toString()),r=t.toLowerCase();this.headers.set(r,n),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var Dh=class{encodeKey(t){return db(t)}encodeValue(t){return db(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function KT(i,t){let e=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[o,c]=s==-1?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],l=e.get(o)||[];l.push(c),e.set(o,l)}),e}var QT=/%(\d[a-f0-9])/gi,YT={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function db(i){return encodeURIComponent(i).replace(QT,(t,e)=>YT[e]??t)}function al(i){return`${i}`}var pn=class i{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Dh,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=KT(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let n=t.fromObject[e],r=Array.isArray(n)?n.map(al):[al(n)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(n=>{let r=t[n];Array.isArray(r)?r.forEach(s=>{e.push({param:n,value:s,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(n=>e+"="+this.encoder.encodeValue(n)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new i({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(al(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let n=this.map.get(t.param)||[],r=n.indexOf(al(t.value));r!==-1&&n.splice(r,1),n.length>0?this.map.set(t.param,n):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var Ph=class{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function XT(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function ub(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function hb(i){return typeof Blob<"u"&&i instanceof Blob}function mb(i){return typeof FormData<"u"&&i instanceof FormData}function ZT(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}var No=class i{constructor(t,e,n,r){this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let s;if(XT(this.method)||r?(this.body=n!==void 0?n:null,s=r):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Vi,this.context??=new Ph,!this.params)this.params=new pn,this.urlWithParams=e;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=e;else{let c=e.indexOf("?"),l=c===-1?"?":c<e.length-1?"&":"";this.urlWithParams=e+l+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||ub(this.body)||hb(this.body)||mb(this.body)||ZT(this.body)?this.body:this.body instanceof pn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||mb(this.body)?null:hb(this.body)?this.body.type||null:ub(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof pn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,s=t.transferCache??this.transferCache,o=t.body!==void 0?t.body:this.body,c=t.withCredentials??this.withCredentials,l=t.reportProgress??this.reportProgress,u=t.headers||this.headers,m=t.params||this.params,p=t.context??this.context;return t.setHeaders!==void 0&&(u=Object.keys(t.setHeaders).reduce((_,S)=>_.set(S,t.setHeaders[S]),u)),t.setParams&&(m=Object.keys(t.setParams).reduce((_,S)=>_.set(S,t.setParams[S]),m)),new i(e,n,o,{params:m,headers:u,context:p,reportProgress:l,responseType:r,withCredentials:c,transferCache:s})}},gn=function(i){return i[i.Sent=0]="Sent",i[i.UploadProgress=1]="UploadProgress",i[i.ResponseHeader=2]="ResponseHeader",i[i.DownloadProgress=3]="DownloadProgress",i[i.Response=4]="Response",i[i.User=5]="User",i}(gn||{}),Lo=class{constructor(t,e=200,n="OK"){this.headers=t.headers||new Vi,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},ll=class i extends Lo{constructor(t={}){super(t),this.type=gn.ResponseHeader}clone(t={}){return new i({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Vo=class i extends Lo{constructor(t={}){super(t),this.type=gn.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new i({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},fn=class extends Lo{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},_b=200,JT=204;function kh(i,t){return{body:t,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials,transferCache:i.transferCache}}var jo=(()=>{class i{constructor(e){this.handler=e}request(e,n,r={}){let s;if(e instanceof No)s=e;else{let l;r.headers instanceof Vi?l=r.headers:l=new Vi(r.headers);let u;r.params&&(r.params instanceof pn?u=r.params:u=new pn({fromObject:r.params})),s=new No(e,n,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:u,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let o=z(s).pipe(un(l=>this.handler.handle(l)));if(e instanceof No||r.observe==="events")return o;let c=o.pipe(Ue(l=>l instanceof Vo));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(W(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(W(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(W(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(W(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,n={}){return this.request("DELETE",e,n)}get(e,n={}){return this.request("GET",e,n)}head(e,n={}){return this.request("HEAD",e,n)}jsonp(e,n){return this.request("JSONP",e,{params:new pn().append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,n={}){return this.request("OPTIONS",e,n)}patch(e,n,r={}){return this.request("PATCH",e,kh(r,n))}post(e,n,r={}){return this.request("POST",e,kh(r,n))}put(e,n,r={}){return this.request("PUT",e,kh(r,n))}static{this.\u0275fac=function(n){return new(n||i)(R(Fo))}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac})}}return i})(),ex=/^\)\]\}',?\n/,tx="X-Request-URL";function fb(i){if(i.url)return i.url;let t=tx.toLocaleLowerCase();return i.headers.get(t)}var ix=(()=>{class i{constructor(){this.fetchImpl=N(Mh,{optional:!0})?.fetch??((...e)=>globalThis.fetch(...e)),this.ngZone=N(q)}handle(e){return new $t(n=>{let r=new AbortController;return this.doRequest(e,r.signal,n).then(Oh,s=>n.error(new fn({error:s}))),()=>r.abort()})}doRequest(e,n,r){return T(this,null,function*(){let s=this.createRequestInit(e),o;try{let S=this.ngZone.runOutsideAngular(()=>this.fetchImpl(e.urlWithParams,P({signal:n},s)));nx(S),r.next({type:gn.Sent}),o=yield S}catch(S){r.error(new fn({error:S,status:S.status??0,statusText:S.statusText,url:e.urlWithParams,headers:S.headers}));return}let c=new Vi(o.headers),l=o.statusText,u=fb(o)??e.urlWithParams,m=o.status,p=null;if(e.reportProgress&&r.next(new ll({headers:c,status:m,statusText:l,url:u})),o.body){let S=o.headers.get("content-length"),A=[],k=o.body.getReader(),F=0,ce,pe,Q=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>T(this,null,function*(){for(;;){let{done:mt,value:Ve}=yield k.read();if(mt)break;if(A.push(Ve),F+=Ve.length,e.reportProgress){pe=e.responseType==="text"?(pe??"")+(ce??=new TextDecoder).decode(Ve,{stream:!0}):void 0;let I=()=>r.next({type:gn.DownloadProgress,total:S?+S:void 0,loaded:F,partialText:pe});Q?Q.run(I):I()}}}));let We=this.concatChunks(A,F);try{let mt=o.headers.get("Content-Type")??"";p=this.parseBody(e,We,mt)}catch(mt){r.error(new fn({error:mt,headers:new Vi(o.headers),status:o.status,statusText:o.statusText,url:fb(o)??e.urlWithParams}));return}}m===0&&(m=p?_b:0),m>=200&&m<300?(r.next(new Vo({body:p,headers:c,status:m,statusText:l,url:u})),r.complete()):r.error(new fn({error:p,headers:c,status:m,statusText:l,url:u}))})}parseBody(e,n,r){switch(e.responseType){case"json":let s=new TextDecoder().decode(n).replace(ex,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(n);case"blob":return new Blob([n],{type:r});case"arraybuffer":return n.buffer}}createRequestInit(e){let n={},r=e.withCredentials?"include":void 0;if(e.headers.forEach((s,o)=>n[s]=o.join(",")),e.headers.has("Accept")||(n.Accept="application/json, text/plain, */*"),!e.headers.has("Content-Type")){let s=e.detectContentTypeHeader();s!==null&&(n["Content-Type"]=s)}return{body:e.serializeBody(),method:e.method,headers:n,credentials:r}}concatChunks(e,n){let r=new Uint8Array(n),s=0;for(let o of e)r.set(o,s),s+=o.length;return r}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac})}}return i})(),Mh=class{};function Oh(){}function nx(i){i.then(Oh,Oh)}function rx(i,t){return t(i)}function sx(i,t,e){return(n,r)=>qt(e,()=>t(n,s=>i(s,r)))}var vb=new U(""),ox=new U(""),ax=new U("",{providedIn:"root",factory:()=>!0});var pb=(()=>{class i extends Fo{constructor(e,n){super(),this.backend=e,this.injector=n,this.chain=null,this.pendingTasks=N(Vc),this.contributeToStability=N(ax)}handle(e){if(this.chain===null){let n=Array.from(new Set([...this.injector.get(vb),...this.injector.get(ox,[])]));this.chain=n.reduceRight((r,s)=>sx(r,s,this.injector),rx)}if(this.contributeToStability){let n=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(hn(()=>this.pendingTasks.remove(n)))}else return this.chain(e,n=>this.backend.handle(n))}static{this.\u0275fac=function(n){return new(n||i)(R(cl),R(Ni))}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac})}}return i})();var cx=/^\)\]\}',?\n/;function lx(i){return"responseURL"in i&&i.responseURL?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):null}var gb=(()=>{class i{constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new Ee(-2800,!1);let n=this.xhrFactory;return(n.\u0275loadImpl?je(n.\u0275loadImpl()):z(null)).pipe(Ye(()=>new $t(s=>{let o=n.build();if(o.open(e.method,e.urlWithParams),e.withCredentials&&(o.withCredentials=!0),e.headers.forEach((k,F)=>o.setRequestHeader(k,F.join(","))),e.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){let k=e.detectContentTypeHeader();k!==null&&o.setRequestHeader("Content-Type",k)}if(e.responseType){let k=e.responseType.toLowerCase();o.responseType=k!=="json"?k:"text"}let c=e.serializeBody(),l=null,u=()=>{if(l!==null)return l;let k=o.statusText||"OK",F=new Vi(o.getAllResponseHeaders()),ce=lx(o)||e.url;return l=new ll({headers:F,status:o.status,statusText:k,url:ce}),l},m=()=>{let{headers:k,status:F,statusText:ce,url:pe}=u(),Q=null;F!==JT&&(Q=typeof o.response>"u"?o.responseText:o.response),F===0&&(F=Q?_b:0);let We=F>=200&&F<300;if(e.responseType==="json"&&typeof Q=="string"){let mt=Q;Q=Q.replace(cx,"");try{Q=Q!==""?JSON.parse(Q):null}catch(Ve){Q=mt,We&&(We=!1,Q={error:Ve,text:Q})}}We?(s.next(new Vo({body:Q,headers:k,status:F,statusText:ce,url:pe||void 0})),s.complete()):s.error(new fn({error:Q,headers:k,status:F,statusText:ce,url:pe||void 0}))},p=k=>{let{url:F}=u(),ce=new fn({error:k,status:o.status||0,statusText:o.statusText||"Unknown Error",url:F||void 0});s.error(ce)},_=!1,S=k=>{_||(s.next(u()),_=!0);let F={type:gn.DownloadProgress,loaded:k.loaded};k.lengthComputable&&(F.total=k.total),e.responseType==="text"&&o.responseText&&(F.partialText=o.responseText),s.next(F)},A=k=>{let F={type:gn.UploadProgress,loaded:k.loaded};k.lengthComputable&&(F.total=k.total),s.next(F)};return o.addEventListener("load",m),o.addEventListener("error",p),o.addEventListener("timeout",p),o.addEventListener("abort",p),e.reportProgress&&(o.addEventListener("progress",S),c!==null&&o.upload&&o.upload.addEventListener("progress",A)),o.send(c),s.next({type:gn.Sent}),()=>{o.removeEventListener("error",p),o.removeEventListener("abort",p),o.removeEventListener("load",m),o.removeEventListener("timeout",p),e.reportProgress&&(o.removeEventListener("progress",S),c!==null&&o.upload&&o.upload.removeEventListener("progress",A)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(n){return new(n||i)(R(rl))}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac})}}return i})(),bb=new U(""),dx="XSRF-TOKEN",ux=new U("",{providedIn:"root",factory:()=>dx}),hx="X-XSRF-TOKEN",mx=new U("",{providedIn:"root",factory:()=>hx}),dl=class{},fx=(()=>{class i{constructor(e,n,r){this.doc=e,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=el(e,this.cookieName),this.lastCookieString=e),this.lastToken}static{this.\u0275fac=function(n){return new(n||i)(R(X),R(Ht),R(ux))}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac})}}return i})();function px(i,t){let e=i.url.toLowerCase();if(!N(bb)||i.method==="GET"||i.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(i);let n=N(dl).getToken(),r=N(mx);return n!=null&&!i.headers.has(r)&&(i=i.clone({headers:i.headers.set(r,n)})),t(i)}function yb(...i){let t=[jo,gb,pb,{provide:Fo,useExisting:pb},{provide:cl,useFactory:()=>N(ix,{optional:!0})??N(gb)},{provide:vb,useValue:px,multi:!0},{provide:bb,useValue:!0},{provide:dl,useClass:fx}];for(let e of i)t.push(...e.\u0275providers);return gt(t)}var Lh=class extends nb{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Vh=class i extends Lh{static makeCurrent(){ib(new i)}onAndCancel(t,e,n){return t.addEventListener(e,n),()=>{t.removeEventListener(e,n)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=_x();return e==null?null:vx(e)}resetBaseElement(){Uo=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return el(document.cookie,t)}},Uo=null;function _x(){return Uo=Uo||document.querySelector("base"),Uo?Uo.getAttribute("href"):null}function vx(i){return new URL(i,document.baseURI).pathname}var bx=(()=>{class i{build(){return new XMLHttpRequest}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac})}}return i})(),jh=new U(""),Cb=(()=>{class i{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,n,r){return this._findPluginFor(n).addEventListener(e,n,r)}getZone(){return this._zone}_findPluginFor(e){let n=this._eventNameToPlugin.get(e);if(n)return n;if(n=this._plugins.find(s=>s.supports(e)),!n)throw new Ee(5101,!1);return this._eventNameToPlugin.set(e,n),n}static{this.\u0275fac=function(n){return new(n||i)(R(jh),R(q))}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac})}}return i})(),hl=class{constructor(t){this._doc=t}},Nh="ng-app-id",Tb=(()=>{class i{constructor(e,n,r,s={}){this.doc=e,this.appId=n,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=nl(s),this.resetHostNodes()}addStyles(e){for(let n of e)this.changeUsageCount(n,1)===1&&this.onStyleAdded(n)}removeStyles(e){for(let n of e)this.changeUsageCount(n,-1)<=0&&this.onStyleRemoved(n)}ngOnDestroy(){let e=this.styleNodesInDOM;e&&(e.forEach(n=>n.remove()),e.clear());for(let n of this.getAllStyles())this.onStyleRemoved(n);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(let n of this.getAllStyles())this.addStyleToHost(e,n)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(let n of this.hostNodes)this.addStyleToHost(n,e)}onStyleRemoved(e){let n=this.styleRef;n.get(e)?.elements?.forEach(r=>r.remove()),n.delete(e)}collectServerRenderedStyles(){let e=this.doc.head?.querySelectorAll(`style[${Nh}="${this.appId}"]`);if(e?.length){let n=new Map;return e.forEach(r=>{r.textContent!=null&&n.set(r.textContent,r)}),n}return null}changeUsageCount(e,n){let r=this.styleRef;if(r.has(e)){let s=r.get(e);return s.usage+=n,s.usage}return r.set(e,{usage:n,elements:[]}),n}getStyleElement(e,n){let r=this.styleNodesInDOM,s=r?.get(n);if(s?.parentNode===e)return r.delete(n),s.removeAttribute(Nh),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=n,this.platformIsServer&&o.setAttribute(Nh,this.appId),e.appendChild(o),o}}addStyleToHost(e,n){let r=this.getStyleElement(e,n),s=this.styleRef,o=s.get(n)?.elements;o?o.push(r):s.set(n,{elements:[r],usage:1})}resetHostNodes(){let e=this.hostNodes;e.clear(),e.add(this.doc.head)}static{this.\u0275fac=function(n){return new(n||i)(R(X),R(jc),R(So,8),R(Ht))}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac})}}return i})(),Fh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Bh=/%COMP%/g,xb="%COMP%",yx=`_nghost-${xb}`,wx=`_ngcontent-${xb}`,Ix=!0,Ex=new U("",{providedIn:"root",factory:()=>Ix});function Cx(i){return wx.replace(Bh,i)}function Tx(i){return yx.replace(Bh,i)}function Sb(i,t){return t.map(e=>e.replace(Bh,i))}var ml=(()=>{class i{constructor(e,n,r,s,o,c,l,u=null){this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=nl(c),this.defaultRenderer=new Bo(e,o,l,this.platformIsServer)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;this.platformIsServer&&n.encapsulation===Co.ShadowDom&&(n=he(P({},n),{encapsulation:Co.Emulated}));let r=this.getOrCreateRenderer(e,n);return r instanceof fl?r.applyToHost(e):r instanceof zo&&r.applyStyles(),r}getOrCreateRenderer(e,n){let r=this.rendererByCompId,s=r.get(n.id);if(!s){let o=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,m=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(n.encapsulation){case Co.Emulated:s=new fl(l,u,n,this.appId,m,o,c,p);break;case Co.ShadowDom:return new Uh(l,u,e,n,o,c,this.nonce,p);default:s=new zo(l,u,n,m,o,c,p);break}r.set(n.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(n){return new(n||i)(R(Cb),R(Tb),R(jc),R(Ex),R(X),R(Ht),R(q),R(So))}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac})}}return i})(),Bo=class{constructor(t,e,n,r){this.eventManager=t,this.doc=e,this.ngZone=n,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(Fh[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(Ib(t)?t.content:t).appendChild(e)}insertBefore(t,e,n){t&&(Ib(t)?t.content:t).insertBefore(e,n)}removeChild(t,e){e.remove()}selectRootElement(t,e){let n=typeof t=="string"?this.doc.querySelector(t):t;if(!n)throw new Ee(-5104,!1);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;let s=Fh[r];s?t.setAttributeNS(s,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){let r=Fh[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(Ao.DashCase|Ao.Important)?t.style.setProperty(e,n,r&Ao.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&Ao.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t!=null&&(t[e]=n)}setValue(t,e){t.nodeValue=e}listen(t,e,n){if(typeof t=="string"&&(t=Qr().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(n))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function Ib(i){return i.tagName==="TEMPLATE"&&i.content!==void 0}var Uh=class extends Bo{constructor(t,e,n,r,s,o,c,l){super(t,s,o,l),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=Sb(r.id,r.styles);for(let m of u){let p=document.createElement("style");c&&p.setAttribute("nonce",c),p.textContent=m,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},zo=class extends Bo{constructor(t,e,n,r,s,o,c,l){super(t,s,o,c),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=l?Sb(l,n.styles):n.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},fl=class extends zo{constructor(t,e,n,r,s,o,c,l){let u=r+"-"+n.id;super(t,e,n,s,o,c,l,u),this.contentAttr=Cx(u),this.hostAttr=Tx(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}},xx=(()=>{class i extends hl{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,r){return e.addEventListener(n,r,!1),()=>this.removeEventListener(e,n,r)}removeEventListener(e,n,r){return e.removeEventListener(n,r)}static{this.\u0275fac=function(n){return new(n||i)(R(X))}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac})}}return i})(),Eb=["alt","control","meta","shift"],Sx={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ax={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey},Rx=(()=>{class i extends hl{constructor(e){super(e)}supports(e){return i.parseEventName(e)!=null}addEventListener(e,n,r){let s=i.parseEventName(n),o=i.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Qr().onAndCancel(e,s.domEventName,o))}static parseEventName(e){let n=e.toLowerCase().split("."),r=n.shift();if(n.length===0||!(r==="keydown"||r==="keyup"))return null;let s=i._normalizeKey(n.pop()),o="",c=n.indexOf("code");if(c>-1&&(n.splice(c,1),o="code."),Eb.forEach(u=>{let m=n.indexOf(u);m>-1&&(n.splice(m,1),o+=u+".")}),o+=s,n.length!=0||s.length===0)return null;let l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(e,n){let r=Sx[e.key]||e.key,s="";return n.indexOf("code.")>-1&&(r=e.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),Eb.forEach(o=>{if(o!==r){let c=Ax[o];c(e)&&(s+=o+".")}}),s+=r,s===n)}static eventCallback(e,n,r){return s=>{i.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>n(s))}}static _normalizeKey(e){return e==="esc"?"escape":e}static{this.\u0275fac=function(n){return new(n||i)(R(X))}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac})}}return i})();function Ab(i,t){return Jv(P({rootComponent:i},kx(t)))}function kx(i){return{appProviders:[...Nx,...i?.providers??[]],platformProviders:Ox}}function Dx(){Vh.makeCurrent()}function Px(){return new zn}function Mx(){return jv(document),document}var Ox=[{provide:Ht,useValue:ab},{provide:Uv,useValue:Dx,multi:!0},{provide:X,useFactory:Mx,deps:[]}];var Nx=[{provide:Vv,useValue:"root"},{provide:zn,useFactory:Px,deps:[]},{provide:jh,useClass:xx,multi:!0,deps:[X,q,Ht]},{provide:jh,useClass:Rx,multi:!0,deps:[X]},ml,Tb,Cb,{provide:Bc,useExisting:ml},{provide:rl,useClass:bx,deps:[]},[]];var Rb=(()=>{class i{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static{this.\u0275fac=function(n){return new(n||i)(R(X))}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var zh=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=j({token:i,factory:function(n){let r=null;return n?r=new(n||i):r=R(Fx),r},providedIn:"root"})}}return i})(),Fx=(()=>{class i extends zh{constructor(e){super(),this._doc=e}sanitize(e,n){if(n==null)return null;switch(e){case Ft.NONE:return n;case Ft.HTML:return Ur(n,"HTML")?jr(n):Gv(this._doc,String(n)).toString();case Ft.STYLE:return Ur(n,"Style")?jr(n):n;case Ft.SCRIPT:if(Ur(n,"Script"))return jr(n);throw new Ee(5200,!1);case Ft.URL:return Ur(n,"URL")?jr(n):Hv(String(n));case Ft.RESOURCE_URL:if(Ur(n,"ResourceURL"))return jr(n);throw new Ee(5201,!1);default:throw new Ee(5202,!1)}}bypassSecurityTrustHtml(e){return Bv(e)}bypassSecurityTrustStyle(e){return zv(e)}bypassSecurityTrustScript(e){return $v(e)}bypassSecurityTrustUrl(e){return qv(e)}bypassSecurityTrustResourceUrl(e){return Wv(e)}static{this.\u0275fac=function(n){return new(n||i)(R(X))}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Z="primary",ia=Symbol("RouteTitle"),Gh=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function ns(i){return new Gh(i)}function Lx(i,t,e){let n=e.path.split("/");if(n.length>i.length||e.pathMatch==="full"&&(t.hasChildren()||n.length<i.length))return null;let r={};for(let s=0;s<n.length;s++){let o=n[s],c=i[s];if(o[0]===":")r[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function Vx(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;++e)if(!bi(i[e],t[e]))return!1;return!0}function bi(i,t){let e=i?Kh(i):void 0,n=t?Kh(t):void 0;if(!e||!n||e.length!=n.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!Bb(i[r],t[r]))return!1;return!0}function Kh(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}function Bb(i,t){if(Array.isArray(i)&&Array.isArray(t)){if(i.length!==t.length)return!1;let e=[...i].sort(),n=[...t].sort();return e.every((r,s)=>n[s]===r)}else return i===t}function zb(i){return i.length>0?i[i.length-1]:null}function vn(i){return Mc(i)?i:Xc(i)?je(Promise.resolve(i)):z(i)}var jx={exact:qb,subset:Wb},$b={exact:Ux,subset:Bx,ignored:()=>!0};function Db(i,t,e){return jx[e.paths](i.root,t.root,e.matrixParams)&&$b[e.queryParams](i.queryParams,t.queryParams)&&!(e.fragment==="exact"&&i.fragment!==t.fragment)}function Ux(i,t){return bi(i,t)}function qb(i,t,e){if(!Kn(i.segments,t.segments)||!_l(i.segments,t.segments,e)||i.numberOfChildren!==t.numberOfChildren)return!1;for(let n in t.children)if(!i.children[n]||!qb(i.children[n],t.children[n],e))return!1;return!0}function Bx(i,t){return Object.keys(t).length<=Object.keys(i).length&&Object.keys(t).every(e=>Bb(i[e],t[e]))}function Wb(i,t,e){return Hb(i,t,t.segments,e)}function Hb(i,t,e,n){if(i.segments.length>e.length){let r=i.segments.slice(0,e.length);return!(!Kn(r,e)||t.hasChildren()||!_l(r,e,n))}else if(i.segments.length===e.length){if(!Kn(i.segments,e)||!_l(i.segments,e,n))return!1;for(let r in t.children)if(!i.children[r]||!Wb(i.children[r],t.children[r],n))return!1;return!0}else{let r=e.slice(0,i.segments.length),s=e.slice(i.segments.length);return!Kn(i.segments,r)||!_l(i.segments,r,n)||!i.children[Z]?!1:Hb(i.children[Z],t,s,n)}}function _l(i,t,e){return t.every((n,r)=>$b[e](i[r].parameters,n.parameters))}var Ui=class{constructor(t=new we([],{}),e={},n=null){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap??=ns(this.queryParams),this._queryParamMap}toString(){return qx.serialize(this)}},we=class{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return vl(this)}},Gn=class{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=ns(this.parameters),this._parameterMap}toString(){return Kb(this)}};function zx(i,t){return Kn(i,t)&&i.every((e,n)=>bi(e.parameters,t[n].parameters))}function Kn(i,t){return i.length!==t.length?!1:i.every((e,n)=>e.path===t[n].path)}function $x(i,t){let e=[];return Object.entries(i.children).forEach(([n,r])=>{n===Z&&(e=e.concat(t(r,n)))}),Object.entries(i.children).forEach(([n,r])=>{n!==Z&&(e=e.concat(t(r,n)))}),e}var na=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=j({token:i,factory:()=>new rs,providedIn:"root"})}}return i})(),rs=class{parse(t){let e=new Yh(t);return new Ui(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${$o(t.root,!0)}`,n=Gx(t.queryParams),r=typeof t.fragment=="string"?`#${Wx(t.fragment)}`:"";return`${e}${n}${r}`}},qx=new rs;function vl(i){return i.segments.map(t=>Kb(t)).join("/")}function $o(i,t){if(!i.hasChildren())return vl(i);if(t){let e=i.children[Z]?$o(i.children[Z],!1):"",n=[];return Object.entries(i.children).forEach(([r,s])=>{r!==Z&&n.push(`${r}:${$o(s,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}else{let e=$x(i,(n,r)=>r===Z?[$o(i.children[Z],!1)]:[`${r}:${$o(n,!1)}`]);return Object.keys(i.children).length===1&&i.children[Z]!=null?`${vl(i)}/${e[0]}`:`${vl(i)}/(${e.join("//")})`}}function Gb(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function pl(i){return Gb(i).replace(/%3B/gi,";")}function Wx(i){return encodeURI(i)}function Qh(i){return Gb(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function bl(i){return decodeURIComponent(i)}function Pb(i){return bl(i.replace(/\+/g,"%20"))}function Kb(i){return`${Qh(i.path)}${Hx(i.parameters)}`}function Hx(i){return Object.entries(i).map(([t,e])=>`;${Qh(t)}=${Qh(e)}`).join("")}function Gx(i){let t=Object.entries(i).map(([e,n])=>Array.isArray(n)?n.map(r=>`${pl(e)}=${pl(r)}`).join("&"):`${pl(e)}=${pl(n)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var Kx=/^[^\/()?;#]+/;function $h(i){let t=i.match(Kx);return t?t[0]:""}var Qx=/^[^\/()?;=#]+/;function Yx(i){let t=i.match(Qx);return t?t[0]:""}var Xx=/^[^=?&#]+/;function Zx(i){let t=i.match(Xx);return t?t[0]:""}var Jx=/^[^&#]+/;function eS(i){let t=i.match(Jx);return t?t[0]:""}var Yh=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new we([],{}):new we([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[Z]=new we(t,e)),n}parseSegment(){let t=$h(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new Ee(4009,!1);return this.capture(t),new Gn(bl(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=Yx(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){let r=$h(this.remaining);r&&(n=r,this.capture(n))}t[bl(e)]=bl(n)}parseQueryParam(t){let e=Zx(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){let o=eS(this.remaining);o&&(n=o,this.capture(n))}let r=Pb(e),s=Pb(n);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let n=$h(this.remaining),r=this.remaining[n.length];if(r!=="/"&&r!==")"&&r!==";")throw new Ee(4010,!1);let s;n.indexOf(":")>-1?(s=n.slice(0,n.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=Z);let o=this.parseChildren();e[s]=Object.keys(o).length===1?o[Z]:new we([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new Ee(4011,!1)}};function Qb(i){return i.segments.length>0?new we([],{[Z]:i}):i}function Yb(i){let t={};for(let[n,r]of Object.entries(i.children)){let s=Yb(r);if(n===Z&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))t[o]=c;else(s.segments.length>0||s.hasChildren())&&(t[n]=s)}let e=new we(i.segments,t);return tS(e)}function tS(i){if(i.numberOfChildren===1&&i.children[Z]){let t=i.children[Z];return new we(i.segments.concat(t.segments),t.children)}return i}function Qn(i){return i instanceof Ui}function iS(i,t,e=null,n=null){let r=Xb(i);return Zb(r,t,e,n)}function Xb(i){let t;function e(s){let o={};for(let l of s.children){let u=e(l);o[l.outlet]=u}let c=new we(s.url,o);return s===i&&(t=c),c}let n=e(i.root),r=Qb(n);return t??r}function Zb(i,t,e,n){let r=i;for(;r.parent;)r=r.parent;if(t.length===0)return qh(r,r,r,e,n);let s=nS(t);if(s.toRoot())return qh(r,r,new we([],{}),e,n);let o=rS(s,r,i),c=o.processChildren?Ho(o.segmentGroup,o.index,s.commands):ey(o.segmentGroup,o.index,s.commands);return qh(r,o.segmentGroup,c,e,n)}function yl(i){return typeof i=="object"&&i!=null&&!i.outlets&&!i.segmentPath}function Qo(i){return typeof i=="object"&&i!=null&&i.outlets}function qh(i,t,e,n,r){let s={};n&&Object.entries(n).forEach(([l,u])=>{s[l]=Array.isArray(u)?u.map(m=>`${m}`):`${u}`});let o;i===t?o=e:o=Jb(i,t,e);let c=Qb(Yb(o));return new Ui(c,s,r)}function Jb(i,t,e){let n={};return Object.entries(i.children).forEach(([r,s])=>{s===t?n[r]=e:n[r]=Jb(s,t,e)}),new we(i.segments,n)}var wl=class{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&yl(n[0]))throw new Ee(4003,!1);let r=n.find(Qo);if(r&&r!==zb(n))throw new Ee(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function nS(i){if(typeof i[0]=="string"&&i.length===1&&i[0]==="/")return new wl(!0,0,i);let t=0,e=!1,n=i.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([l,u])=>{c[l]=typeof u=="string"?u.split("/"):u}),[...r,{outlets:c}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?e=!0:c===".."?t++:c!=""&&r.push(c))}),r):[...r,s]},[]);return new wl(e,t,n)}var es=class{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}};function rS(i,t,e){if(i.isAbsolute)return new es(t,!0,0);if(!e)return new es(t,!1,NaN);if(e.parent===null)return new es(e,!0,0);let n=yl(i.commands[0])?0:1,r=e.segments.length-1+n;return sS(e,r,i.numberOfDoubleDots)}function sS(i,t,e){let n=i,r=t,s=e;for(;s>r;){if(s-=r,n=n.parent,!n)throw new Ee(4005,!1);r=n.segments.length}return new es(n,!1,r-s)}function oS(i){return Qo(i[0])?i[0].outlets:{[Z]:i}}function ey(i,t,e){if(i??=new we([],{}),i.segments.length===0&&i.hasChildren())return Ho(i,t,e);let n=aS(i,t,e),r=e.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){let s=new we(i.segments.slice(0,n.pathIndex),{});return s.children[Z]=new we(i.segments.slice(n.pathIndex),i.children),Ho(s,0,r)}else return n.match&&r.length===0?new we(i.segments,{}):n.match&&!i.hasChildren()?Xh(i,t,e):n.match?Ho(i,0,r):Xh(i,t,e)}function Ho(i,t,e){if(e.length===0)return new we(i.segments,{});{let n=oS(e),r={};if(Object.keys(n).some(s=>s!==Z)&&i.children[Z]&&i.numberOfChildren===1&&i.children[Z].segments.length===0){let s=Ho(i.children[Z],t,e);return new we(i.segments,s.children)}return Object.entries(n).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=ey(i.children[s],t,o))}),Object.entries(i.children).forEach(([s,o])=>{n[s]===void 0&&(r[s]=o)}),new we(i.segments,r)}}function aS(i,t,e){let n=0,r=t,s={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=e.length)return s;let o=i.segments[r],c=e[n];if(Qo(c))break;let l=`${c}`,u=n<e.length-1?e[n+1]:null;if(r>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!Ob(l,u,o))return s;n+=2}else{if(!Ob(l,{},o))return s;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}function Xh(i,t,e){let n=i.segments.slice(0,t),r=0;for(;r<e.length;){let s=e[r];if(Qo(s)){let l=cS(s.outlets);return new we(n,l)}if(r===0&&yl(e[0])){let l=i.segments[t];n.push(new Gn(l.path,Mb(e[0]))),r++;continue}let o=Qo(s)?s.outlets[Z]:`${s}`,c=r<e.length-1?e[r+1]:null;o&&c&&yl(c)?(n.push(new Gn(o,Mb(c))),r+=2):(n.push(new Gn(o,{})),r++)}return new we(n,{})}function cS(i){let t={};return Object.entries(i).forEach(([e,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(t[e]=Xh(new we([],{}),0,n))}),t}function Mb(i){let t={};return Object.entries(i).forEach(([e,n])=>t[e]=`${n}`),t}function Ob(i,t,e){return i==e.path&&bi(t,e.parameters)}var Go="imperative",Ke=function(i){return i[i.NavigationStart=0]="NavigationStart",i[i.NavigationEnd=1]="NavigationEnd",i[i.NavigationCancel=2]="NavigationCancel",i[i.NavigationError=3]="NavigationError",i[i.RoutesRecognized=4]="RoutesRecognized",i[i.ResolveStart=5]="ResolveStart",i[i.ResolveEnd=6]="ResolveEnd",i[i.GuardsCheckStart=7]="GuardsCheckStart",i[i.GuardsCheckEnd=8]="GuardsCheckEnd",i[i.RouteConfigLoadStart=9]="RouteConfigLoadStart",i[i.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",i[i.ChildActivationStart=11]="ChildActivationStart",i[i.ChildActivationEnd=12]="ChildActivationEnd",i[i.ActivationStart=13]="ActivationStart",i[i.ActivationEnd=14]="ActivationEnd",i[i.Scroll=15]="Scroll",i[i.NavigationSkipped=16]="NavigationSkipped",i}(Ke||{}),Gt=class{constructor(t,e){this.id=t,this.url=e}},ss=class extends Gt{constructor(t,e,n="imperative",r=null){super(t,e),this.type=Ke.NavigationStart,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},yi=class extends Gt{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n,this.type=Ke.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},jt=function(i){return i[i.Redirect=0]="Redirect",i[i.SupersededByNewNavigation=1]="SupersededByNewNavigation",i[i.NoDataFromResolver=2]="NoDataFromResolver",i[i.GuardRejected=3]="GuardRejected",i}(jt||{}),Il=function(i){return i[i.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",i[i.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",i}(Il||{}),ji=class extends Gt{constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r,this.type=Ke.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},_n=class extends Gt{constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r,this.type=Ke.NavigationSkipped}},Yo=class extends Gt{constructor(t,e,n,r){super(t,e),this.error=n,this.target=r,this.type=Ke.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},El=class extends Gt{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=Ke.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zh=class extends Gt{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=Ke.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jh=class extends Gt{constructor(t,e,n,r,s){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s,this.type=Ke.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},em=class extends Gt{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=Ke.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},tm=class extends Gt{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=Ke.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},im=class{constructor(t){this.route=t,this.type=Ke.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},nm=class{constructor(t){this.route=t,this.type=Ke.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},rm=class{constructor(t){this.snapshot=t,this.type=Ke.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sm=class{constructor(t){this.snapshot=t,this.type=Ke.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},om=class{constructor(t){this.snapshot=t,this.type=Ke.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},am=class{constructor(t){this.snapshot=t,this.type=Ke.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cl=class{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n,this.type=Ke.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Xo=class{},os=class{constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function lS(i,t){return i.providers&&!i._injector&&(i._injector=Th(i.providers,t,`Route: ${i.path}`)),i._injector??t}function oi(i){return i.outlet||Z}function dS(i,t){let e=i.filter(n=>oi(n)===t);return e.push(...i.filter(n=>oi(n)!==t)),e}function ra(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let t=i.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var cm=class{get injector(){return ra(this.route?.snapshot)??this.rootInjector}set injector(t){}constructor(t){this.rootInjector=t,this.outlet=null,this.route=null,this.children=new sa(this.rootInjector),this.attachRef=null}},sa=(()=>{class i{constructor(e){this.rootInjector=e,this.contexts=new Map}onChildOutletCreated(e,n){let r=this.getOrCreateContext(e);r.outlet=n,this.contexts.set(e,r)}onChildOutletDestroyed(e){let n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new cm(this.rootInjector),this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}static{this.\u0275fac=function(n){return new(n||i)(R(Ni))}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Tl=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=lm(t,this._root);return e?e.children.map(n=>n.value):[]}firstChild(t){let e=lm(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=dm(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return dm(t,this._root).map(e=>e.value)}};function lm(i,t){if(i===t.value)return t;for(let e of t.children){let n=lm(i,e);if(n)return n}return null}function dm(i,t){if(i===t.value)return[t];for(let e of t.children){let n=dm(i,e);if(n.length)return n.unshift(t),n}return[]}var Vt=class{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function Jr(i){let t={};return i&&i.children.forEach(e=>t[e.value.outlet]=e),t}var xl=class extends Tl{constructor(t,e){super(t),this.snapshot=e,bm(this,t)}toString(){return this.snapshot.toString()}};function ty(i){let t=uS(i),e=new at([new Gn("",{})]),n=new at({}),r=new at({}),s=new at({}),o=new at(""),c=new wi(e,n,s,o,r,Z,i,t.root);return c.snapshot=t.root,new xl(new Vt(c,[]),t)}function uS(i){let t={},e={},n={},r="",s=new ts([],t,n,r,e,Z,i,null,{});return new Al("",new Vt(s,[]))}var wi=class{constructor(t,e,n,r,s,o,c,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=n,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(W(u=>u[ia]))??z(void 0),this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(W(t=>ns(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(W(t=>ns(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Sl(i,t,e="emptyOnly"){let n,{routeConfig:r}=i;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?n={params:P(P({},t.params),i.params),data:P(P({},t.data),i.data),resolve:P(P(P(P({},i.data),t.data),r?.data),i._resolvedData)}:n={params:P({},i.params),data:P({},i.data),resolve:P(P({},i.data),i._resolvedData??{})},r&&ny(r)&&(n.resolve[ia]=r.title),n}var ts=class{get title(){return this.data?.[ia]}constructor(t,e,n,r,s,o,c,l,u){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=c,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ns(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ns(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(n=>n.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Al=class extends Tl{constructor(t,e){super(e),this.url=t,bm(this,e)}toString(){return iy(this._root)}};function bm(i,t){t.value._routerState=i,t.children.forEach(e=>bm(i,e))}function iy(i){let t=i.children.length>0?` { ${i.children.map(iy).join(", ")} } `:"";return`${i.value}${t}`}function Wh(i){if(i.snapshot){let t=i.snapshot,e=i._futureSnapshot;i.snapshot=e,bi(t.queryParams,e.queryParams)||i.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&i.fragmentSubject.next(e.fragment),bi(t.params,e.params)||i.paramsSubject.next(e.params),Vx(t.url,e.url)||i.urlSubject.next(e.url),bi(t.data,e.data)||i.dataSubject.next(e.data)}else i.snapshot=i._futureSnapshot,i.dataSubject.next(i._futureSnapshot.data)}function um(i,t){let e=bi(i.params,t.params)&&zx(i.url,t.url),n=!i.parent!=!t.parent;return e&&!n&&(!i.parent||um(i.parent,t.parent))}function ny(i){return typeof i.title=="string"||i.title===null}var ym=(()=>{class i{constructor(){this.activated=null,this._activatedRoute=null,this.name=Z,this.activateEvents=new Oe,this.deactivateEvents=new Oe,this.attachEvents=new Oe,this.detachEvents=new Oe,this.parentContexts=N(sa),this.location=N($n),this.changeDetector=N(yt),this.inputBinder=N(Pl,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){let{firstChange:n,previousValue:r}=e.name;if(n)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ee(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ee(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ee(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new Ee(4013,!1);this._activatedRoute=e;let r=this.location,o=e.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new hm(e,c,r.injector);this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:n}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=ge({type:i,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Wt]})}}return i})(),hm=class i{__ngOutletInjector(t){return new i(this.route,this.childContexts,t)}constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===wi?this.route:t===sa?this.childContexts:this.parent.get(t,e)}},Pl=new U(""),Nb=(()=>{class i{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:n}=e,r=Fr([n.queryParams,n.params,n.data]).pipe(Ye(([s,o,c],l)=>(c=P(P(P({},s),o),c),l===0?z(c):Promise.resolve(c)))).subscribe(s=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==n||n.component===null){this.unsubscribeFromRouteData(e);return}let o=tb(n.component);if(!o){this.unsubscribeFromRouteData(e);return}for(let{templateName:c}of o.inputs)e.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(e,r)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac})}}return i})();function hS(i,t,e){let n=Zo(i,t._root,e?e._root:void 0);return new xl(n,t)}function Zo(i,t,e){if(e&&i.shouldReuseRoute(t.value,e.value.snapshot)){let n=e.value;n._futureSnapshot=t.value;let r=mS(i,t,e);return new Vt(n,r)}else{if(i.shouldAttach(t.value)){let s=i.retrieve(t.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(c=>Zo(i,c)),o}}let n=fS(t.value),r=t.children.map(s=>Zo(i,s));return new Vt(n,r)}}function mS(i,t,e){return t.children.map(n=>{for(let r of e.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return Zo(i,n,r);return Zo(i,n)})}function fS(i){return new wi(new at(i.url),new at(i.params),new at(i.queryParams),new at(i.fragment),new at(i.data),i.outlet,i.component,i)}var Yn=class{constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},ry="ngNavigationCancelingError";function Rl(i,t){let{redirectTo:e,navigationBehaviorOptions:n}=Qn(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=sy(!1,jt.Redirect);return r.url=e,r.navigationBehaviorOptions=n,r}function sy(i,t){let e=new Error(`NavigationCancelingError: ${i||""}`);return e[ry]=!0,e.cancellationCode=t,e}function pS(i){return oy(i)&&Qn(i.url)}function oy(i){return!!i&&i[ry]}var gS=(i,t,e,n)=>W(r=>(new mm(t,r.targetRouterState,r.currentRouterState,e,n).activate(i),r)),mm=class{constructor(t,e,n,r,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r,this.inputBindingEnabled=s}activate(t){let e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Wh(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){let r=Jr(e);t.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],n),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(t,e,n){let r=t.value,s=e?e.value:null;if(r===s)if(r.component){let o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else s&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=Jr(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(n&&n.outlet){let o=n.outlet.detach(),c=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:c})}}deactivateRouteAndOutlet(t,e){let n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=Jr(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(t,e,n){let r=Jr(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],n),this.forwardEvent(new am(s.value.snapshot))}),t.children.length&&this.forwardEvent(new sm(t.value.snapshot))}activateRoutes(t,e,n){let r=t.value,s=e?e.value:null;if(Wh(r),r===s)if(r.component){let o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component){let o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let c=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),Wh(c.route.value),this.activateChildRoutes(t,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,n)}},kl=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},is=class{constructor(t,e){this.component=t,this.route=e}};function _S(i,t,e){let n=i._root,r=t?t._root:null;return qo(n,r,e,[n.value])}function vS(i){let t=i.routeConfig?i.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:i,guards:t}}function cs(i,t){let e=Symbol(),n=t.get(i,e);return n===e?typeof i=="function"&&!Lv(i)?i:t.get(i):n}function qo(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Jr(t);return i.children.forEach(o=>{bS(o,s[o.value.outlet],e,n.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>Ko(c,e.getContext(o),r)),r}function bS(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=i.value,o=t?t.value:null,c=e?e.getContext(i.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=yS(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new kl(n)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?qo(i,t,c?c.children:null,n,r):qo(i,t,e,n,r),l&&c&&c.outlet&&c.outlet.isActivated&&r.canDeactivateChecks.push(new is(c.outlet.component,o))}else o&&Ko(t,c,r),r.canActivateChecks.push(new kl(n)),s.component?qo(i,null,c?c.children:null,n,r):qo(i,null,e,n,r);return r}function yS(i,t,e){if(typeof e=="function")return e(i,t);switch(e){case"pathParamsChange":return!Kn(i.url,t.url);case"pathParamsOrQueryParamsChange":return!Kn(i.url,t.url)||!bi(i.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!um(i,t)||!bi(i.queryParams,t.queryParams);case"paramsChange":default:return!um(i,t)}}function Ko(i,t,e){let n=Jr(i),r=i.value;Object.entries(n).forEach(([s,o])=>{r.component?t?Ko(o,t.children.getContext(s),e):Ko(o,null,e):Ko(o,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new is(t.outlet.component,r)):e.canDeactivateChecks.push(new is(null,r)):e.canDeactivateChecks.push(new is(null,r))}function oa(i){return typeof i=="function"}function wS(i){return typeof i=="boolean"}function IS(i){return i&&oa(i.canLoad)}function ES(i){return i&&oa(i.canActivate)}function CS(i){return i&&oa(i.canActivateChild)}function TS(i){return i&&oa(i.canDeactivate)}function xS(i){return i&&oa(i.canMatch)}function ay(i){return i instanceof Dv||i?.name==="EmptyError"}var gl=Symbol("INITIAL_VALUE");function as(){return Ye(i=>Fr(i.map(t=>t.pipe(ct(1),Oi(gl)))).pipe(W(t=>{for(let e of t)if(e!==!0){if(e===gl)return gl;if(e===!1||SS(e))return e}return!0}),Ue(t=>t!==gl),ct(1)))}function SS(i){return Qn(i)||i instanceof Yn}function AS(i,t){return Ot(e=>{let{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return o.length===0&&s.length===0?z(he(P({},e),{guardsResult:!0})):RS(o,n,r,i).pipe(Ot(c=>c&&wS(c)?kS(n,s,i,t):z(c)),W(c=>he(P({},e),{guardsResult:c})))})}function RS(i,t,e,n){return je(i).pipe(Ot(r=>NS(r.component,r.route,e,t,n)),Ct(r=>r!==!0,!0))}function kS(i,t,e,n){return je(t).pipe(un(r=>Oc(PS(r.route.parent,n),DS(r.route,n),OS(i,r.path,e),MS(i,r.route,e))),Ct(r=>r!==!0,!0))}function DS(i,t){return i!==null&&t&&t(new om(i)),z(!0)}function PS(i,t){return i!==null&&t&&t(new rm(i)),z(!0)}function MS(i,t,e){let n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||n.length===0)return z(!0);let r=n.map(s=>Io(()=>{let o=ra(t)??e,c=cs(s,o),l=ES(c)?c.canActivate(t,i):qt(o,()=>c(t,i));return vn(l).pipe(Ct())}));return z(r).pipe(as())}function OS(i,t,e){let n=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>vS(o)).filter(o=>o!==null).map(o=>Io(()=>{let c=o.guards.map(l=>{let u=ra(o.node)??e,m=cs(l,u),p=CS(m)?m.canActivateChild(n,i):qt(u,()=>m(n,i));return vn(p).pipe(Ct())});return z(c).pipe(as())}));return z(s).pipe(as())}function NS(i,t,e,n,r){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return z(!0);let o=s.map(c=>{let l=ra(t)??r,u=cs(c,l),m=TS(u)?u.canDeactivate(i,t,e,n):qt(l,()=>u(i,t,e,n));return vn(m).pipe(Ct())});return z(o).pipe(as())}function FS(i,t,e,n){let r=t.canLoad;if(r===void 0||r.length===0)return z(!0);let s=r.map(o=>{let c=cs(o,i),l=IS(c)?c.canLoad(t,e):qt(i,()=>c(t,e));return vn(l)});return z(s).pipe(as(),cy(n))}function cy(i){return Av(Ae(t=>{if(typeof t!="boolean")throw Rl(i,t)}),W(t=>t===!0))}function LS(i,t,e,n){let r=t.canMatch;if(!r||r.length===0)return z(!0);let s=r.map(o=>{let c=cs(o,i),l=xS(c)?c.canMatch(t,e):qt(i,()=>c(t,e));return vn(l)});return z(s).pipe(as(),cy(n))}var Jo=class{constructor(t){this.segmentGroup=t||null}},ea=class extends Error{constructor(t){super(),this.urlTree=t}};function Zr(i){return Bn(new Jo(i))}function VS(i){return Bn(new Ee(4e3,!1))}function jS(i){return Bn(sy(!1,jt.GuardRejected))}var fm=class{constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),r.numberOfChildren===0)return z(n);if(r.numberOfChildren>1||!r.children[Z])return VS(`${t.redirectTo}`);r=r.children[Z]}}applyRedirectCommands(t,e,n,r,s){if(typeof e!="string"){let c=e,{queryParams:l,fragment:u,routeConfig:m,url:p,outlet:_,params:S,data:A,title:k}=r,F=qt(s,()=>c({params:S,data:A,queryParams:l,fragment:u,routeConfig:m,url:p,outlet:_,title:k}));if(F instanceof Ui)throw new ea(F);e=F}let o=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,n);if(e[0]==="/")throw new ea(o);return o}applyRedirectCreateUrlTree(t,e,n,r){let s=this.createSegmentGroup(t,e.root,n,r);return new Ui(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let n={};return Object.entries(t).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let c=s.substring(1);n[r]=e[c]}else n[r]=s}),n}createSegmentGroup(t,e,n,r){let s=this.createSegments(t,e.segments,n,r),o={};return Object.entries(e.children).forEach(([c,l])=>{o[c]=this.createSegmentGroup(t,l,n,r)}),new we(s,o)}createSegments(t,e,n,r){return e.map(s=>s.path[0]===":"?this.findPosParam(t,s,r):this.findOrReturn(s,n))}findPosParam(t,e,n){let r=n[e.path.substring(1)];if(!r)throw new Ee(4001,!1);return r}findOrReturn(t,e){let n=0;for(let r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}},pm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function US(i,t,e,n,r){let s=ly(i,t,e);return s.matched?(n=lS(t,n),LS(n,t,e,r).pipe(W(o=>o===!0?s:P({},pm)))):z(s)}function ly(i,t,e){if(t.path==="**")return BS(e);if(t.path==="")return t.pathMatch==="full"&&(i.hasChildren()||e.length>0)?P({},pm):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||Lx)(e,i,t);if(!r)return P({},pm);let s={};Object.entries(r.posParams??{}).forEach(([c,l])=>{s[c]=l.path});let o=r.consumed.length>0?P(P({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function BS(i){return{matched:!0,parameters:i.length>0?zb(i).parameters:{},consumedSegments:i,remainingSegments:[],positionalParamSegments:{}}}function Fb(i,t,e,n){return e.length>0&&qS(i,e,n)?{segmentGroup:new we(t,$S(n,new we(e,i.children))),slicedSegments:[]}:e.length===0&&WS(i,e,n)?{segmentGroup:new we(i.segments,zS(i,e,n,i.children)),slicedSegments:e}:{segmentGroup:new we(i.segments,i.children),slicedSegments:e}}function zS(i,t,e,n){let r={};for(let s of e)if(Ml(i,t,s)&&!n[oi(s)]){let o=new we([],{});r[oi(s)]=o}return P(P({},n),r)}function $S(i,t){let e={};e[Z]=t;for(let n of i)if(n.path===""&&oi(n)!==Z){let r=new we([],{});e[oi(n)]=r}return e}function qS(i,t,e){return e.some(n=>Ml(i,t,n)&&oi(n)!==Z)}function WS(i,t,e){return e.some(n=>Ml(i,t,n))}function Ml(i,t,e){return(i.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function HS(i,t,e){return t.length===0&&!i.children[e]}var gm=class{};function GS(i,t,e,n,r,s,o="emptyOnly"){return new _m(i,t,e,n,r,o,s).recognize()}var KS=31,_m=class{constructor(t,e,n,r,s,o,c){this.injector=t,this.configLoader=e,this.rootComponentType=n,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new fm(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new Ee(4002,`'${t.segmentGroup}'`)}recognize(){let t=Fb(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(W(({children:e,rootSnapshot:n})=>{let r=new Vt(n,e),s=new Al("",r),o=iS(n,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(t){let e=new ts([],Object.freeze({}),Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Z,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,Z,e).pipe(W(n=>({children:n,rootSnapshot:e})),dn(n=>{if(n instanceof ea)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof Jo?this.noMatchError(n):n}))}processSegmentGroup(t,e,n,r,s){return n.segments.length===0&&n.hasChildren()?this.processChildren(t,e,n,s):this.processSegment(t,e,n,n.segments,r,!0,s).pipe(W(o=>o instanceof Vt?[o]:[]))}processChildren(t,e,n,r){let s=[];for(let o of Object.keys(n.children))o==="primary"?s.unshift(o):s.push(o);return je(s).pipe(un(o=>{let c=n.children[o],l=dS(e,o);return this.processSegmentGroup(t,l,c,o,r)}),Nv((o,c)=>(o.push(...c),o)),gh(null),Ov(),Ot(o=>{if(o===null)return Zr(n);let c=dy(o);return QS(c),z(c)}))}processSegment(t,e,n,r,s,o,c){return je(e).pipe(un(l=>this.processSegmentAgainstRoute(l._injector??t,e,l,n,r,s,o,c).pipe(dn(u=>{if(u instanceof Jo)return z(null);throw u}))),Ct(l=>!!l),dn(l=>{if(ay(l))return HS(n,r,s)?z(new gm):Zr(n);throw l}))}processSegmentAgainstRoute(t,e,n,r,s,o,c,l){return oi(n)!==o&&(o===Z||!Ml(r,s,n))?Zr(r):n.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,n,s,o,l):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,n,s,o,l):Zr(r)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o,c){let{matched:l,parameters:u,consumedSegments:m,positionalParamSegments:p,remainingSegments:_}=ly(e,r,s);if(!l)return Zr(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>KS&&(this.allowRedirects=!1));let S=new ts(s,u,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,Lb(r),oi(r),r.component??r._loadedComponent??null,r,Vb(r)),A=Sl(S,c,this.paramsInheritanceStrategy);S.params=Object.freeze(A.params),S.data=Object.freeze(A.data);let k=this.applyRedirects.applyRedirectCommands(m,r.redirectTo,p,S,t);return this.applyRedirects.lineralizeSegments(r,k).pipe(Ot(F=>this.processSegment(t,n,e,F.concat(_),o,!1,c)))}matchSegmentAgainstRoute(t,e,n,r,s,o){let c=US(e,n,r,t,this.urlSerializer);return n.path==="**"&&(e.children={}),c.pipe(Ye(l=>l.matched?(t=n._injector??t,this.getChildConfig(t,n,r).pipe(Ye(({routes:u})=>{let m=n._loadedInjector??t,{parameters:p,consumedSegments:_,remainingSegments:S}=l,A=new ts(_,p,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,Lb(n),oi(n),n.component??n._loadedComponent??null,n,Vb(n)),k=Sl(A,o,this.paramsInheritanceStrategy);A.params=Object.freeze(k.params),A.data=Object.freeze(k.data);let{segmentGroup:F,slicedSegments:ce}=Fb(e,_,S,u);if(ce.length===0&&F.hasChildren())return this.processChildren(m,u,F,A).pipe(W(Q=>new Vt(A,Q)));if(u.length===0&&ce.length===0)return z(new Vt(A,[]));let pe=oi(n)===s;return this.processSegment(m,u,F,ce,pe?Z:s,!0,A).pipe(W(Q=>new Vt(A,Q instanceof Vt?[Q]:[])))}))):Zr(e)))}getChildConfig(t,e,n){return e.children?z({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?z({routes:e._loadedRoutes,injector:e._loadedInjector}):FS(t,e,n,this.urlSerializer).pipe(Ot(r=>r?this.configLoader.loadChildren(t,e).pipe(Ae(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):jS(e))):z({routes:[],injector:t})}};function QS(i){i.sort((t,e)=>t.value.outlet===Z?-1:e.value.outlet===Z?1:t.value.outlet.localeCompare(e.value.outlet))}function YS(i){let t=i.value.routeConfig;return t&&t.path===""}function dy(i){let t=[],e=new Set;for(let n of i){if(!YS(n)){t.push(n);continue}let r=t.find(s=>n.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...n.children),e.add(r)):t.push(n)}for(let n of e){let r=dy(n.children);t.push(new Vt(n.value,r))}return t.filter(n=>!e.has(n))}function Lb(i){return i.data||{}}function Vb(i){return i.resolve||{}}function XS(i,t,e,n,r,s){return Ot(o=>GS(i,t,e,n,o.extractedUrl,r,s).pipe(W(({state:c,tree:l})=>he(P({},o),{targetSnapshot:c,urlAfterRedirects:l}))))}function ZS(i,t){return Ot(e=>{let{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return z(e);let s=new Set(r.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let u of uy(l))o.add(u);let c=0;return je(o).pipe(un(l=>s.has(l)?JS(l,n,i,t):(l.data=Sl(l,l.parent,i).resolve,z(void 0))),Ae(()=>c++),bh(1),Ot(l=>c===o.size?z(e):ln))})}function uy(i){let t=i.children.map(e=>uy(e)).flat();return[i,...t]}function JS(i,t,e,n){let r=i.routeConfig,s=i._resolve;return r?.title!==void 0&&!ny(r)&&(s[ia]=r.title),eA(s,i,t,n).pipe(W(o=>(i._resolvedData=o,i.data=Sl(i,i.parent,e).resolve,null)))}function eA(i,t,e,n){let r=Kh(i);if(r.length===0)return z({});let s={};return je(r).pipe(Ot(o=>tA(i[o],t,e,n).pipe(Ct(),Ae(c=>{if(c instanceof Yn)throw Rl(new rs,c);s[o]=c}))),bh(1),Mv(s),dn(o=>ay(o)?ln:Bn(o)))}function tA(i,t,e,n){let r=ra(t)??n,s=cs(i,r),o=s.resolve?s.resolve(t,e):qt(r,()=>s(t,e));return vn(o)}function Hh(i){return Ye(t=>{let e=i(t);return e?je(e).pipe(W(()=>t)):z(t)})}var hy=(()=>{class i{buildTitle(e){let n,r=e.root;for(;r!==void 0;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(s=>s.outlet===Z);return n}getResolvedTitleForRoute(e){return e.data[ia]}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=j({token:i,factory:()=>N(iA),providedIn:"root"})}}return i})(),iA=(()=>{class i extends hy{constructor(e){super(),this.title=e}updateTitle(e){let n=this.buildTitle(e);n!==void 0&&this.title.setTitle(n)}static{this.\u0275fac=function(n){return new(n||i)(R(Rb))}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),aa=new U("",{providedIn:"root",factory:()=>({})}),nA=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=ee({type:i,selectors:[["ng-component"]],standalone:!0,features:[ie],decls:1,vars:0,template:function(n,r){n&1&&te(0,"router-outlet")},dependencies:[ym],encapsulation:2})}}return i})();function wm(i){let t=i.children&&i.children.map(wm),e=t?he(P({},i),{children:t}):P({},i);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Z&&(e.component=nA),e}var ta=new U(""),Im=(()=>{class i{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=N(Jc)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return z(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let n=vn(e.loadComponent()).pipe(W(my),Ae(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),hn(()=>{this.componentLoaders.delete(e)})),r=new dh(n,()=>new le).pipe(lh());return this.componentLoaders.set(e,r),r}loadChildren(e,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return z({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);let s=rA(n,this.compiler,e,this.onLoadEndListener).pipe(hn(()=>{this.childrenLoaders.delete(n)})),o=new dh(s,()=>new le).pipe(lh());return this.childrenLoaders.set(n,o),o}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function rA(i,t,e,n){return vn(i.loadChildren()).pipe(W(my),Ot(r=>r instanceof Yv||Array.isArray(r)?z(r):je(t.compileModuleAsync(r))),W(r=>{n&&n(i);let s,o,c=!1;return Array.isArray(r)?(o=r,c=!0):(s=r.create(e).injector,o=s.get(ta,[],{optional:!0,self:!0}).flat()),{routes:o.map(wm),injector:s}}))}function sA(i){return i&&typeof i=="object"&&"default"in i}function my(i){return sA(i)?i.default:i}var Em=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=j({token:i,factory:()=>N(oA),providedIn:"root"})}}return i})(),oA=(()=>{class i{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),fy=new U(""),py=new U("");function aA(i,t,e){let n=i.get(py),r=i.get(X);return i.get(q).runOutsideAngular(()=>{if(!r.startViewTransition||n.skipNextTransition)return n.skipNextTransition=!1,new Promise(u=>setTimeout(u));let s,o=new Promise(u=>{s=u}),c=r.startViewTransition(()=>(s(),cA(i))),{onViewTransitionCreated:l}=n;return l&&qt(i,()=>l({transition:c,from:t,to:e})),o})}function cA(i){return new Promise(t=>{qn({read:()=>setTimeout(t)},{injector:i})})}var lA=new U(""),Cm=(()=>{class i{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new le,this.transitionAbortSubject=new le,this.configLoader=N(Im),this.environmentInjector=N(Ni),this.urlSerializer=N(na),this.rootContexts=N(sa),this.location=N(Hn),this.inputBindingEnabled=N(Pl,{optional:!0})!==null,this.titleStrategy=N(hy),this.options=N(aa,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=N(Em),this.createViewTransition=N(fy,{optional:!0}),this.navigationErrorHandler=N(lA,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>z(void 0),this.rootComponentType=null;let e=r=>this.events.next(new im(r)),n=r=>this.events.next(new nm(r));this.configLoader.onLoadEndListener=n,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let n=++this.navigationId;this.transitions?.next(he(P(P({},this.transitions.value),e),{id:n}))}setupNavigations(e,n,r){return this.transitions=new at({id:0,currentUrlTree:n,currentRawUrl:n,extractedUrl:this.urlHandlingStrategy.extract(n),urlAfterRedirects:this.urlHandlingStrategy.extract(n),rawUrl:n,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Go,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ue(s=>s.id!==0),W(s=>he(P({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Ye(s=>{let o=!1,c=!1;return z(s).pipe(Ye(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",jt.SupersededByNewNavigation),ln;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?he(P({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),m=l.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!u&&m!=="reload"){let p="";return this.events.next(new _n(l.id,this.urlSerializer.serialize(l.rawUrl),p,Il.IgnoredSameUrlNavigation)),l.resolve(!1),ln}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return z(l).pipe(Ye(p=>{let _=this.transitions?.getValue();return this.events.next(new ss(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),_!==this.transitions?.getValue()?ln:Promise.resolve(p)}),XS(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Ae(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=he(P({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let _=new El(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(_)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:p,extractedUrl:_,source:S,restoredState:A,extras:k}=l,F=new ss(p,this.urlSerializer.serialize(_),S,A);this.events.next(F);let ce=ty(this.rootComponentType).snapshot;return this.currentTransition=s=he(P({},l),{targetSnapshot:ce,urlAfterRedirects:_,extras:he(P({},k),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=_,z(s)}else{let p="";return this.events.next(new _n(l.id,this.urlSerializer.serialize(l.extractedUrl),p,Il.IgnoredByUrlHandlingStrategy)),l.resolve(!1),ln}}),Ae(l=>{let u=new Zh(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),W(l=>(this.currentTransition=s=he(P({},l),{guards:_S(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),AS(this.environmentInjector,l=>this.events.next(l)),Ae(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw Rl(this.urlSerializer,l.guardsResult);let u=new Jh(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),Ue(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",jt.GuardRejected),!1)),Hh(l=>{if(l.guards.canActivateChecks.length)return z(l).pipe(Ae(u=>{let m=new em(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(m)}),Ye(u=>{let m=!1;return z(u).pipe(ZS(this.paramsInheritanceStrategy,this.environmentInjector),Ae({next:()=>m=!0,complete:()=>{m||this.cancelNavigationTransition(u,"",jt.NoDataFromResolver)}}))}),Ae(u=>{let m=new tm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(m)}))}),Hh(l=>{let u=m=>{let p=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(m.routeConfig).pipe(Ae(_=>{m.component=_}),W(()=>{})));for(let _ of m.children)p.push(...u(_));return p};return Fr(u(l.targetSnapshot.root)).pipe(gh(null),ct(1))}),Hh(()=>this.afterPreactivation()),Ye(()=>{let{currentSnapshot:l,targetSnapshot:u}=s,m=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return m?je(m).pipe(W(()=>s)):z(s)}),W(l=>{let u=hS(e.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=he(P({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),Ae(()=>{this.events.next(new Xo)}),gS(this.rootContexts,e.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),ct(1),Ae({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new yi(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),Nt(this.transitionAbortSubject.pipe(Ae(l=>{throw l}))),hn(()=>{!o&&!c&&this.cancelNavigationTransition(s,"",jt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),dn(l=>{if(c=!0,oy(l))this.events.next(new ji(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),pS(l)?this.events.next(new os(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{let u=new Yo(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{let m=qt(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(m instanceof Yn){let{message:p,cancellationCode:_}=Rl(this.urlSerializer,m);this.events.next(new ji(s.id,this.urlSerializer.serialize(s.extractedUrl),p,_)),this.events.next(new os(m.redirectTo,m.navigationBehaviorOptions))}else{this.events.next(u);let p=e.errorHandler(l);s.resolve(!!p)}}catch(m){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(m)}}return ln}))}))}cancelNavigationTransition(e,n,r){let s=new ji(e.id,this.urlSerializer.serialize(e.extractedUrl),n,r);this.events.next(s),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),n=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==n?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function dA(i){return i!==Go}var uA=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=j({token:i,factory:()=>N(hA),providedIn:"root"})}}return i})(),vm=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},hA=(()=>{class i extends vm{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=mn(i)))(r||i)}})()}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),gy=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=j({token:i,factory:()=>N(mA),providedIn:"root"})}}return i})(),mA=(()=>{class i extends gy{constructor(){super(...arguments),this.location=N(Hn),this.urlSerializer=N(na),this.options=N(aa,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=N(Em),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ui,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=ty(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(n=>{n.type==="popstate"&&e(n.url,n.state)})}handleRouterEvent(e,n){if(e instanceof ss)this.stateMemento=this.createStateMemento();else if(e instanceof _n)this.rawUrlTree=n.initialUrl;else if(e instanceof El){if(this.urlUpdateStrategy==="eager"&&!n.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl);this.setBrowserUrl(n.targetBrowserUrl??r,n)}}else e instanceof Xo?(this.currentUrlTree=n.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl),this.routerState=n.targetRouterState,this.urlUpdateStrategy==="deferred"&&!n.extras.skipLocationChange&&this.setBrowserUrl(n.targetBrowserUrl??this.rawUrlTree,n)):e instanceof ji&&(e.code===jt.GuardRejected||e.code===jt.NoDataFromResolver)?this.restoreHistory(n):e instanceof Yo?this.restoreHistory(n,!0):e instanceof yi&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,n){let r=e instanceof Ui?this.urlSerializer.serialize(e):e;if(this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl){let s=this.browserPageId,o=P(P({},n.extras.state),this.generateNgRouterState(n.id,s));this.location.replaceState(r,"",o)}else{let s=P(P({},n.extras.state),this.generateNgRouterState(n.id,this.browserPageId+1));this.location.go(r,"",s)}}restoreHistory(e,n=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.currentUrlTree===e.finalUrl&&s===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(n&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,n){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=mn(i)))(r||i)}})()}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Wo=function(i){return i[i.COMPLETE=0]="COMPLETE",i[i.FAILED=1]="FAILED",i[i.REDIRECTING=2]="REDIRECTING",i}(Wo||{});function _y(i,t){i.events.pipe(Ue(e=>e instanceof yi||e instanceof ji||e instanceof Yo||e instanceof _n),W(e=>e instanceof yi||e instanceof _n?Wo.COMPLETE:(e instanceof ji?e.code===jt.Redirect||e.code===jt.SupersededByNewNavigation:!1)?Wo.REDIRECTING:Wo.FAILED),Ue(e=>e!==Wo.REDIRECTING),ct(1)).subscribe(()=>{t()})}function fA(i){throw i}var pA={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},gA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ze=(()=>{class i{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=N(Yc),this.stateManager=N(gy),this.options=N(aa,{optional:!0})||{},this.pendingTasks=N(Vc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=N(Cm),this.urlSerializer=N(na),this.location=N(Hn),this.urlHandlingStrategy=N(Em),this._events=new le,this.errorHandler=this.options.errorHandler||fA,this.navigated=!1,this.routeReuseStrategy=N(uA),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=N(ta,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!N(Pl,{optional:!0}),this.eventsSubscription=new Et,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(n=>{try{let r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(n,s),n instanceof ji&&n.code!==jt.Redirect&&n.code!==jt.SupersededByNewNavigation)this.navigated=!0;else if(n instanceof yi)this.navigated=!0;else if(n instanceof os){let o=n.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(n.url,r.currentRawUrl),l=P({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||dA(r.source)},o);this.scheduleNavigation(c,Go,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}vA(n)&&this._events.next(n)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Go,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,n)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",n)},0)})}navigateToSyncWithBrowser(e,n,r){let s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){let l=P({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(e);this.scheduleNavigation(c,n,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(wm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,n={}){let{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:c,preserveFragment:l}=n,u=l?this.currentUrlTree.fragment:o,m=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":m=P(P({},this.currentUrlTree.queryParams),s);break;case"preserve":m=this.currentUrlTree.queryParams;break;default:m=s||null}m!==null&&(m=this.removeEmptyProps(m));let p;try{let _=r?r.snapshot:this.routerState.snapshot.root;p=Xb(_)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),p=this.currentUrlTree.root}return Zb(p,e,m,u??null)}navigateByUrl(e,n={skipLocationChange:!1}){let r=Qn(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,Go,null,n)}navigate(e,n={skipLocationChange:!1}){return _A(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,n){let r;if(n===!0?r=P({},pA):n===!1?r=P({},gA):r=n,Qn(e))return Db(this.currentUrlTree,e,r);let s=this.parseUrl(e);return Db(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.entries(e).reduce((n,[r,s])=>(s!=null&&(n[r]=s),n),{})}scheduleNavigation(e,n,r,s,o){if(this.disposed)return Promise.resolve(!1);let c,l,u;o?(c=o.resolve,l=o.reject,u=o.promise):u=new Promise((p,_)=>{c=p,l=_});let m=this.pendingTasks.add();return _y(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(m))}),this.navigationTransitions.handleNavigationRequest({source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function _A(i){for(let t=0;t<i.length;t++)if(i[t]==null)throw new Ee(4008,!1)}function vA(i){return!(i instanceof Xo)&&!(i instanceof os)}var Kt=(()=>{class i{constructor(e,n,r,s,o,c){this.router=e,this.route=n,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.locationStrategy=c,this.href=null,this.onChanges=new le,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=e.events.subscribe(u=>{u instanceof yi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){e==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Qn(e)?this.routerLinkInput=e:this.routerLinkInput=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0"))}onClick(e,n,r,s,o){let c=this.urlTree;if(c===null||this.isAnchorElement&&(e!==0||n||r||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let n=this.href===null?null:Kv(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(e,n){let r=this.renderer,s=this.el.nativeElement;n!==null?r.setAttribute(s,e,n):r.removeAttribute(s,e)}get urlTree(){return this.routerLinkInput===null?null:Qn(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(n){return new(n||i)(D(Ze),D(wi),To("tabindex"),D(Ro),D(ae),D(Oo))}}static{this.\u0275dir=ge({type:i,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(n,r){n&1&&me("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),n&2&&Re("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Fe],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Fe],replaceUrl:[2,"replaceUrl","replaceUrl",Fe],routerLink:"routerLink"},standalone:!0,features:[Xe,Wt]})}}return i})();var Dl=class{};var bA=(()=>{class i{constructor(e,n,r,s,o){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Ue(e=>e instanceof yi),un(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,n){let r=[];for(let s of n){s.providers&&!s._injector&&(s._injector=Th(s.providers,e,`Route: ${s.path}`));let o=s._injector??e,c=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(c,s.children??s._loadedRoutes))}return je(r).pipe(fh())}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>{let r;n.loadChildren&&n.canLoad===void 0?r=this.loader.loadChildren(e,n):r=z(null);let s=r.pipe(Ot(o=>o===null?z(void 0):(n._loadedRoutes=o.routes,n._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));if(n.loadComponent&&!n._loadedComponent){let o=this.loader.loadComponent(n);return je([s,o]).pipe(fh())}else return s})}static{this.\u0275fac=function(n){return new(n||i)(R(Ze),R(Jc),R(Ni),R(Dl),R(Im))}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),vy=new U(""),yA=(()=>{class i{constructor(e,n,r,s,o={}){this.urlSerializer=e,this.transitions=n,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof ss?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof yi?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof _n&&e.code===Il.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Cl&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,n){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Cl(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,n))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(n){Br()}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac})}}return i})();function by(i,...t){return gt([{provide:ta,multi:!0,useValue:i},[],{provide:wi,useFactory:yy,deps:[Ze]},{provide:Zc,multi:!0,useFactory:wy},t.map(e=>e.\u0275providers)])}function yy(i){return i.routerState.root}function ca(i,t){return{\u0275kind:i,\u0275providers:t}}function wy(){let i=N($e);return t=>{let e=i.get(Wn);if(t!==e.components[0])return;let n=i.get(Ze),r=i.get(Iy);i.get(Tm)===1&&n.initialNavigation(),i.get(Ey,null,yh.Optional)?.setUpPreloading(),i.get(vy,null,yh.Optional)?.init(),n.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var Iy=new U("",{factory:()=>new le}),Tm=new U("",{providedIn:"root",factory:()=>1});function wA(){return ca(2,[{provide:Tm,useValue:0},{provide:Sh,multi:!0,deps:[$e],useFactory:t=>{let e=t.get(rb,Promise.resolve());return()=>e.then(()=>new Promise(n=>{let r=t.get(Ze),s=t.get(Iy);_y(r,()=>{n(!0)}),t.get(Cm).afterPreactivation=()=>(n(!0),s.closed?z(void 0):s),r.initialNavigation()}))}}])}function IA(){return ca(3,[{provide:Sh,multi:!0,useFactory:()=>{let t=N(Ze);return()=>{t.setUpLocationChangeListener()}}},{provide:Tm,useValue:2}])}var Ey=new U("");function EA(i){return ca(0,[{provide:Ey,useExisting:bA},{provide:Dl,useExisting:i}])}function xm(){return ca(8,[Nb,{provide:Pl,useExisting:Nb}])}function CA(i){let t=[{provide:fy,useValue:aA},{provide:py,useValue:P({skipNextTransition:!!i?.skipInitialTransition},i)}];return ca(9,t)}var jb=new U("ROUTER_FORROOT_GUARD"),TA=[Hn,{provide:na,useClass:rs},Ze,sa,{provide:wi,useFactory:yy,deps:[Ze]},Im,[]],Ol=(()=>{class i{constructor(e){}static forRoot(e,n){return{ngModule:i,providers:[TA,[],{provide:ta,multi:!0,useValue:e},{provide:jb,useFactory:RA,deps:[[Ze,new De,new wh]]},{provide:aa,useValue:n||{}},n?.useHash?SA():AA(),xA(),n?.preloadingStrategy?EA(n.preloadingStrategy).\u0275providers:[],n?.initialNavigation?kA(n):[],n?.bindToComponentInputs?xm().\u0275providers:[],n?.enableViewTransitions?CA().\u0275providers:[],DA()]}}static forChild(e){return{ngModule:i,providers:[{provide:ta,multi:!0,useValue:e}]}}static{this.\u0275fac=function(n){return new(n||i)(R(jb,8))}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=H({})}}return i})();function xA(){return{provide:vy,useFactory:()=>{let i=N(lb),t=N(q),e=N(aa),n=N(Cm),r=N(na);return e.scrollOffset&&i.setOffset(e.scrollOffset),new yA(r,n,i,t,e)}}}function SA(){return{provide:Oo,useClass:ob}}function AA(){return{provide:Oo,useClass:sb}}function RA(i){return"guarded"}function kA(i){return[i.initialNavigation==="disabled"?IA().\u0275providers:[],i.initialNavigation==="enabledBlocking"?wA().\u0275providers:[]]}var Ub=new U("");function DA(){return[{provide:Ub,useFactory:wy},{provide:Zc,multi:!0,useExisting:Ub}]}var PA="@",MA=(()=>{class i{constructor(e,n,r,s,o){this.doc=e,this.delegate=n,this.zone=r,this.animationType=s,this.moduleImpl=o,this._rendererFactoryPromise=null,this.scheduler=N(Qv,{optional:!0}),this.loadingSchedulerFn=N(OA,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-HJ4H36GQ.js").then(r=>r),n;return this.loadingSchedulerFn?n=this.loadingSchedulerFn(e):n=e(),n.catch(r=>{throw new Ee(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:s})=>{this._engine=r(this.animationType,this.doc);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(e,n){let r=this.delegate.createRenderer(e,n);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let s=new Sm(r);return n?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(o=>{let c=o.createRenderer(e,n);s.use(c),this.scheduler?.notify(10)}).catch(o=>{s.use(r)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(n){Br()}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac})}}return i})(),Sm=class{constructor(t){this.delegate=t,this.replay=[],this.\u0275type=1}use(t){if(this.delegate=t,this.replay!==null){for(let e of this.replay)e(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,e){this.delegate.appendChild(t,e)}insertBefore(t,e,n,r){this.delegate.insertBefore(t,e,n,r)}removeChild(t,e,n){this.delegate.removeChild(t,e,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){this.shouldReplay(e)&&this.replay.push(r=>r.setProperty(t,e,n)),this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.shouldReplay(e)&&this.replay.push(r=>r.listen(t,e,n)),this.delegate.listen(t,e,n)}shouldReplay(t){return this.replay!==null&&t.startsWith(PA)}},OA=new U("");function Am(i="animations"){return Eh("NgAsyncAnimations"),gt([{provide:Bc,useFactory:(t,e,n)=>new MA(t,e,n,i),deps:[X,ml,q]},{provide:ni,useValue:i==="noop"?"NoopAnimations":"BrowserAnimations"}])}var ef={};HT(ef,{FirebaseError:()=>St,SDK_VERSION:()=>zt,_DEFAULT_ENTRY_NAME:()=>Ci,_addComponent:()=>gs,_addOrOverwriteComponent:()=>Jm,_apps:()=>yn,_clearComponents:()=>MR,_components:()=>ps,_getProvider:()=>zi,_isFirebaseApp:()=>Yy,_isFirebaseServerApp:()=>Zt,_registerComponent:()=>Bt,_removeServiceInstance:()=>Qy,_serverApps:()=>fs,deleteApp:()=>_a,getApp:()=>$i,getApps:()=>ga,initializeApp:()=>_s,initializeServerApp:()=>Xy,onLog:()=>Gl,registerVersion:()=>Ie,setLogLevel:()=>Kl});var km={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var L=function(i,t){if(!i)throw Xn(t)},Xn=function(i){return new Error("Firebase Database ("+km.SDK_VERSION+") INTERNAL ASSERT FAILED: "+i)};var Ty=function(i){let t=[],e=0;for(let n=0;n<i.length;n++){let r=i.charCodeAt(n);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&n+1<i.length&&(i.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(i.charCodeAt(++n)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},NA=function(i){let t=[],e=0,n=0;for(;e<i.length;){let r=i[e++];if(r<128)t[n++]=String.fromCharCode(r);else if(r>191&&r<224){let s=i[e++];t[n++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=i[e++],o=i[e++],c=i[e++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;t[n++]=String.fromCharCode(55296+(l>>10)),t[n++]=String.fromCharCode(56320+(l&1023))}else{let s=i[e++],o=i[e++];t[n++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return t.join("")},Ll={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();let e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<i.length;r+=3){let s=i[r],o=r+1<i.length,c=o?i[r+1]:0,l=r+2<i.length,u=l?i[r+2]:0,m=s>>2,p=(s&3)<<4|c>>4,_=(c&15)<<2|u>>6,S=u&63;l||(S=64,o||(_=64)),n.push(e[m],e[p],e[_],e[S])}return n.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(Ty(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):NA(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();let e=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<i.length;){let s=e[i.charAt(r++)],c=r<i.length?e[i.charAt(r)]:0;++r;let u=r<i.length?e[i.charAt(r)]:64;++r;let p=r<i.length?e[i.charAt(r)]:64;if(++r,s==null||c==null||u==null||p==null)throw new Dm;let _=s<<2|c>>4;if(n.push(_),u!==64){let S=c<<4&240|u>>2;if(n.push(S),p!==64){let A=u<<6&192|p;n.push(A)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}},Dm=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Mm=function(i){let t=Ty(i);return Ll.encodeByteArray(t,!0)},la=function(i){return Mm(i).replace(/\./g,"")},da=function(i){try{return Ll.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function xy(i){return ds(void 0,i)}function ds(i,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:let e=t;return new Date(e.getTime());case Object:i===void 0&&(i={});break;case Array:i=[];break;default:return t}for(let e in t)!t.hasOwnProperty(e)||!FA(e)||(i[e]=ds(i[e],t[e]));return i}function FA(i){return i!=="__proto__"}function Om(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var LA=()=>Om().__FIREBASE_DEFAULTS__,VA=()=>{if(typeof process>"u"||typeof process.env>"u")return;let i=process.env.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},jA=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=i&&da(i[1]);return t&&JSON.parse(t)},Nm=()=>{try{return LA()||VA()||jA()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Fm=i=>{var t,e;return(e=(t=Nm())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[i]},Vl=i=>{let t=Fm(i);if(!t)return;let e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let n=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),n]:[t.substring(0,e),n]},Lm=()=>{var i;return(i=Nm())===null||i===void 0?void 0:i.config},Vm=i=>{var t;return(t=Nm())===null||t===void 0?void 0:t[`_${i}`]};var bn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,n))}}};function jl(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let e={alg:"none",type:"JWT"},n=t||"demo-project",r=i.iat||0,s=i.sub||i.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},i);return[la(JSON.stringify(e)),la(JSON.stringify(o)),""].join(".")}function Je(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ua(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Je())}function Sy(){return typeof window<"u"||jm()}function jm(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Ay(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ry(){let i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function Ul(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ky(){let i=Je();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function Ii(){return km.NODE_CLIENT===!0||km.NODE_ADMIN===!0}function Um(){try{return typeof indexedDB=="object"}catch{return!1}}function Dy(){return new Promise((i,t)=>{try{let e=!0,n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(n),i(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(e){t(e)}})}var UA="FirebaseError",St=class i extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name=UA,Object.setPrototypeOf(this,i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qt.prototype.create)}},Qt=class{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){let n=e[0]||{},r=`${this.service}/${t}`,s=this.errors[t],o=s?BA(s,n):"Error",c=`${this.serviceName}: ${o} (${r}).`;return new St(r,c,n)}};function BA(i,t){return i.replace(zA,(e,n)=>{let r=t[n];return r!=null?String(r):`<${n}?>`})}var zA=/\{\$([^}]+)}/g;function ls(i){return JSON.parse(i)}function He(i){return JSON.stringify(i)}var Py=function(i){let t={},e={},n={},r="";try{let s=i.split(".");t=ls(da(s[0])||""),e=ls(da(s[1])||""),r=s[2],n=e.d||{},delete e.d}catch{}return{header:t,claims:e,data:n,signature:r}};var My=function(i){let t=Py(i),e=t.claims;return!!e&&typeof e=="object"&&e.hasOwnProperty("iat")},Oy=function(i){let t=Py(i).claims;return typeof t=="object"&&t.admin===!0};function Ut(i,t){return Object.prototype.hasOwnProperty.call(i,t)}function Zn(i,t){if(Object.prototype.hasOwnProperty.call(i,t))return i[t]}function ha(i){for(let t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}function ma(i,t,e){let n={};for(let r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=t.call(e,i[r],r,i));return n}function Jn(i,t){if(i===t)return!0;let e=Object.keys(i),n=Object.keys(t);for(let r of e){if(!n.includes(r))return!1;let s=i[r],o=t[r];if(Cy(s)&&Cy(o)){if(!Jn(s,o))return!1}else if(s!==o)return!1}for(let r of n)if(!e.includes(r))return!1;return!0}function Cy(i){return i!==null&&typeof i=="object"}function er(i){let t=[];for(let[e,n]of Object.entries(i))Array.isArray(n)?n.forEach(r=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function us(i){let t={};return i.replace(/^\?/,"").split("&").forEach(n=>{if(n){let[r,s]=n.split("=");t[decodeURIComponent(r)]=decodeURIComponent(s)}}),t}function hs(i){let t=i.indexOf("?");if(!t)return"";let e=i.indexOf("#",t);return i.substring(t,e>0?e:void 0)}var Fl=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,e){e||(e=0);let n=this.W_;if(typeof t=="string")for(let p=0;p<16;p++)n[p]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(let p=0;p<16;p++)n[p]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(let p=16;p<80;p++){let _=n[p-3]^n[p-8]^n[p-14]^n[p-16];n[p]=(_<<1|_>>>31)&4294967295}let r=this.chain_[0],s=this.chain_[1],o=this.chain_[2],c=this.chain_[3],l=this.chain_[4],u,m;for(let p=0;p<80;p++){p<40?p<20?(u=c^s&(o^c),m=1518500249):(u=s^o^c,m=1859775393):p<60?(u=s&o|c&(s|o),m=2400959708):(u=s^o^c,m=3395469782);let _=(r<<5|r>>>27)+u+l+m+n[p]&4294967295;l=c,c=o,o=(s<<30|s>>>2)&4294967295,s=r,r=_}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(t,e){if(t==null)return;e===void 0&&(e=t.length);let n=e-this.blockSize,r=0,s=this.buf_,o=this.inbuf_;for(;r<e;){if(o===0)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if(typeof t=="string"){for(;r<e;)if(s[o]=t.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}else for(;r<e;)if(s[o]=t[r],++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=e}digest(){let t=[],e=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=e&255,e/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)t[n]=this.chain_[r]>>s&255,++n;return t}};function Bl(i,t){let e=new Pm(i,t);return e.subscribe.bind(e)}var Pm=class{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,n){let r;if(t===void 0&&e===void 0&&n===void 0)throw new Error("Missing Observer.");$A(t,["next","error","complete"])?r=t:r={next:t,error:e,complete:n},r.next===void 0&&(r.next=Rm),r.error===void 0&&(r.error=Rm),r.complete===void 0&&(r.complete=Rm);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function $A(i,t){if(typeof i!="object"||i===null)return!1;for(let e of t)if(e in i&&typeof i[e]=="function")return!0;return!1}function Rm(){}function zl(i,t){return`${i} failed: ${t} argument `}var Ny=function(i){let t=[],e=0;for(let n=0;n<i.length;n++){let r=i.charCodeAt(n);if(r>=55296&&r<=56319){let s=r-55296;n++,L(n<i.length,"Surrogate pair missing trail surrogate.");let o=i.charCodeAt(n)-56320;r=65536+(s<<10)+o}r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):r<65536?(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},fa=function(i){let t=0;for(let e=0;e<i.length;e++){let n=i.charCodeAt(e);n<128?t++:n<2048?t+=2:n>=55296&&n<=56319?(t+=4,e++):t+=3}return t};var DV=4*60*60*1e3;function dt(i){return i&&i._delegate?i._delegate:i}var ut=class{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var tr="[DEFAULT]";var $l=class{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){let n=new bn;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;let n=this.normalizeInstanceIdentifier(t?.identifier),r=(e=t?.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(WA(t))try{this.getOrInitializeService({instanceIdentifier:tr})}catch{}for(let[e,n]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(e);try{let s=this.getOrInitializeService({instanceIdentifier:r});n.resolve(s)}catch{}}}}clearInstance(t=tr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){return T(this,null,function*(){let t=Array.from(this.instances.values());yield Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])})}isComponentSet(){return this.component!=null}isInitialized(t=tr){return this.instances.has(t)}getOptions(t=tr){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);n===c&&o.resolve(r)}return r}onInit(t,e){var n;let r=this.normalizeInstanceIdentifier(e),s=(n=this.onInitCallbacks.get(r))!==null&&n!==void 0?n:new Set;s.add(t),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&t(o,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){let n=this.onInitCallbacks.get(e);if(n)for(let r of n)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:qA(t),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=tr){return this.component?this.component.multipleInstances?t:tr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function qA(i){return i===tr?void 0:i}function WA(i){return i.instantiationMode==="EAGER"}var ms=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let e=new $l(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}};var Bm=[],de=function(i){return i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT",i}(de||{}),Fy={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},HA=de.INFO,GA={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},KA=(i,t,...e)=>{if(t<i.logLevel)return;let n=new Date().toISOString(),r=GA[t];if(r)console[r](`[${n}]  ${i.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},Yt=class{constructor(t){this.name=t,this._logLevel=HA,this._logHandler=KA,this._userLogHandler=null,Bm.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in de))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Fy[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...t),this._logHandler(this,de.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...t),this._logHandler(this,de.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,de.INFO,...t),this._logHandler(this,de.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,de.WARN,...t),this._logHandler(this,de.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...t),this._logHandler(this,de.ERROR,...t)}};function Ly(i){Bm.forEach(t=>{t.setLogLevel(i)})}function Vy(i,t){for(let e of Bm){let n=null;t&&t.level&&(n=Fy[t.level]),i===null?e.userLogHandler=null:e.userLogHandler=(r,s,...o)=>{let c=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(n??r.logLevel)&&i({level:de[s].toLowerCase(),message:c,args:o,type:r.name})}}}var QA=(i,t)=>t.some(e=>i instanceof e),jy,Uy;function YA(){return jy||(jy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function XA(){return Uy||(Uy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var By=new WeakMap,$m=new WeakMap,zy=new WeakMap,zm=new WeakMap,Wm=new WeakMap;function ZA(i){let t=new Promise((e,n)=>{let r=()=>{i.removeEventListener("success",s),i.removeEventListener("error",o)},s=()=>{e(Ei(i.result)),r()},o=()=>{n(i.error),r()};i.addEventListener("success",s),i.addEventListener("error",o)});return t.then(e=>{e instanceof IDBCursor&&By.set(e,i)}).catch(()=>{}),Wm.set(t,i),t}function JA(i){if($m.has(i))return;let t=new Promise((e,n)=>{let r=()=>{i.removeEventListener("complete",s),i.removeEventListener("error",o),i.removeEventListener("abort",o)},s=()=>{e(),r()},o=()=>{n(i.error||new DOMException("AbortError","AbortError")),r()};i.addEventListener("complete",s),i.addEventListener("error",o),i.addEventListener("abort",o)});$m.set(i,t)}var qm={get(i,t,e){if(i instanceof IDBTransaction){if(t==="done")return $m.get(i);if(t==="objectStoreNames")return i.objectStoreNames||zy.get(i);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Ei(i[t])},set(i,t,e){return i[t]=e,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function $y(i){qm=i(qm)}function eR(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){let n=i.call(ql(this),t,...e);return zy.set(n,t.sort?t.sort():[t]),Ei(n)}:XA().includes(i)?function(...t){return i.apply(ql(this),t),Ei(By.get(this))}:function(...t){return Ei(i.apply(ql(this),t))}}function tR(i){return typeof i=="function"?eR(i):(i instanceof IDBTransaction&&JA(i),QA(i,YA())?new Proxy(i,qm):i)}function Ei(i){if(i instanceof IDBRequest)return ZA(i);if(zm.has(i))return zm.get(i);let t=tR(i);return t!==i&&(zm.set(i,t),Wm.set(t,i)),t}var ql=i=>Wm.get(i);function Wy(i,t,{blocked:e,upgrade:n,blocking:r,terminated:s}={}){let o=indexedDB.open(i,t),c=Ei(o);return n&&o.addEventListener("upgradeneeded",l=>{n(Ei(o.result),l.oldVersion,l.newVersion,Ei(o.transaction),l)}),e&&o.addEventListener("blocked",l=>e(l.oldVersion,l.newVersion,l)),c.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}var iR=["get","getKey","getAll","getAllKeys","count"],nR=["put","add","delete","clear"],Hm=new Map;function qy(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(Hm.get(t))return Hm.get(t);let e=t.replace(/FromIndex$/,""),n=t!==e,r=nR.includes(e);if(!(e in(n?IDBIndex:IDBObjectStore).prototype)||!(r||iR.includes(e)))return;let s=function(o,...c){return T(this,null,function*(){let l=this.transaction(o,r?"readwrite":"readonly"),u=l.store;return n&&(u=u.index(c.shift())),(yield Promise.all([u[e](...c),r&&l.done]))[0]})};return Hm.set(t,s),s}$y(i=>he(P({},i),{get:(t,e,n)=>qy(t,e)||i.get(t,e,n),has:(t,e)=>!!qy(t,e)||i.has(t,e)}));var Km=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(rR(e)){let n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}};function rR(i){let t=i.getComponent();return t?.type==="VERSION"}var Wl="@firebase/app",Qm="0.10.13";var Bi=new Yt("@firebase/app"),sR="@firebase/app-compat",oR="@firebase/analytics-compat",aR="@firebase/analytics",cR="@firebase/app-check-compat",lR="@firebase/app-check",dR="@firebase/auth",uR="@firebase/auth-compat",hR="@firebase/database",mR="@firebase/data-connect",fR="@firebase/database-compat",pR="@firebase/functions",gR="@firebase/functions-compat",_R="@firebase/installations",vR="@firebase/installations-compat",bR="@firebase/messaging",yR="@firebase/messaging-compat",wR="@firebase/performance",IR="@firebase/performance-compat",ER="@firebase/remote-config",CR="@firebase/remote-config-compat",TR="@firebase/storage",xR="@firebase/storage-compat",SR="@firebase/firestore",AR="@firebase/vertexai-preview",RR="@firebase/firestore-compat",kR="firebase",DR="10.14.1";var Ci="[DEFAULT]",PR={[Wl]:"fire-core",[sR]:"fire-core-compat",[aR]:"fire-analytics",[oR]:"fire-analytics-compat",[lR]:"fire-app-check",[cR]:"fire-app-check-compat",[dR]:"fire-auth",[uR]:"fire-auth-compat",[hR]:"fire-rtdb",[mR]:"fire-data-connect",[fR]:"fire-rtdb-compat",[pR]:"fire-fn",[gR]:"fire-fn-compat",[_R]:"fire-iid",[vR]:"fire-iid-compat",[bR]:"fire-fcm",[yR]:"fire-fcm-compat",[wR]:"fire-perf",[IR]:"fire-perf-compat",[ER]:"fire-rc",[CR]:"fire-rc-compat",[TR]:"fire-gcs",[xR]:"fire-gcs-compat",[SR]:"fire-fst",[RR]:"fire-fst-compat",[AR]:"fire-vertex","fire-js":"fire-js",[kR]:"fire-js-all"};var yn=new Map,fs=new Map,ps=new Map;function gs(i,t){try{i.container.addComponent(t)}catch(e){Bi.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,e)}}function Jm(i,t){i.container.addOrOverwriteComponent(t)}function Bt(i){let t=i.name;if(ps.has(t))return Bi.debug(`There were multiple attempts to register component ${t}.`),!1;ps.set(t,i);for(let e of yn.values())gs(e,i);for(let e of fs.values())gs(e,i);return!0}function zi(i,t){let e=i.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),i.container.getProvider(t)}function Qy(i,t,e=Ci){zi(i,t).clearInstance(e)}function Yy(i){return i.options!==void 0}function Zt(i){return i.settings!==void 0}function MR(){ps.clear()}var OR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xt=new Qt("app","Firebase",OR);var Hl=class{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ut("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Xt.create("app-deleted",{appName:this._name})}};var Ym=class extends Hl{constructor(t,e,n,r){let s=e.automaticDataCollectionEnabled!==void 0?e.automaticDataCollectionEnabled:!1,o={name:n,automaticDataCollectionEnabled:s};if(t.apiKey!==void 0)super(t,o,r);else{let c=t;super(c.options,o,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},e),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,e.releaseOnDeref=void 0,Ie(Wl,Qm,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(t){this.isDeleted||(this._refCount++,t!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(t,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){_a(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Xt.create("server-app-deleted")}};var zt=DR;function _s(i,t={}){let e=i;typeof t!="object"&&(t={name:t});let n=Object.assign({name:Ci,automaticDataCollectionEnabled:!1},t),r=n.name;if(typeof r!="string"||!r)throw Xt.create("bad-app-name",{appName:String(r)});if(e||(e=Lm()),!e)throw Xt.create("no-options");let s=yn.get(r);if(s){if(Jn(e,s.options)&&Jn(n,s.config))return s;throw Xt.create("duplicate-app",{appName:r})}let o=new ms(r);for(let l of ps.values())o.addComponent(l);let c=new Hl(e,n,o);return yn.set(r,c),c}function Xy(i,t){if(Sy()&&!jm())throw Xt.create("invalid-server-app-environment");t.automaticDataCollectionEnabled===void 0&&(t.automaticDataCollectionEnabled=!1);let e;Yy(i)?e=i.options:e=i;let n=Object.assign(Object.assign({},t),e);n.releaseOnDeref!==void 0&&delete n.releaseOnDeref;let r=u=>[...u].reduce((m,p)=>Math.imul(31,m)+p.charCodeAt(0)|0,0);if(t.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Xt.create("finalization-registry-not-supported",{});let s=""+r(JSON.stringify(n)),o=fs.get(s);if(o)return o.incRefCount(t.releaseOnDeref),o;let c=new ms(s);for(let u of ps.values())c.addComponent(u);let l=new Ym(e,t,s,c);return fs.set(s,l),l}function $i(i=Ci){let t=yn.get(i);if(!t&&i===Ci&&Lm())return _s();if(!t)throw Xt.create("no-app",{appName:i});return t}function ga(){return Array.from(yn.values())}function _a(i){return T(this,null,function*(){let t=!1,e=i.name;yn.has(e)?(t=!0,yn.delete(e)):fs.has(e)&&i.decRefCount()<=0&&(fs.delete(e),t=!0),t&&(yield Promise.all(i.container.getProviders().map(n=>n.delete())),i.isDeleted=!0)})}function Ie(i,t,e){var n;let r=(n=PR[i])!==null&&n!==void 0?n:i;e&&(r+=`-${e}`);let s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){let c=[`Unable to register library "${r}" with version "${t}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Bi.warn(c.join(" "));return}Bt(new ut(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}function Gl(i,t){if(i!==null&&typeof i!="function")throw Xt.create("invalid-log-argument");Vy(i,t)}function Kl(i){Ly(i)}var NR="firebase-heartbeat-database",FR=1,pa="firebase-heartbeat-store",Gm=null;function Zy(){return Gm||(Gm=Wy(NR,FR,{upgrade:(i,t)=>{switch(t){case 0:try{i.createObjectStore(pa)}catch(e){console.warn(e)}}}}).catch(i=>{throw Xt.create("idb-open",{originalErrorMessage:i.message})})),Gm}function LR(i){return T(this,null,function*(){try{let e=(yield Zy()).transaction(pa),n=yield e.objectStore(pa).get(Jy(i));return yield e.done,n}catch(t){if(t instanceof St)Bi.warn(t.message);else{let e=Xt.create("idb-get",{originalErrorMessage:t?.message});Bi.warn(e.message)}}})}function Hy(i,t){return T(this,null,function*(){try{let n=(yield Zy()).transaction(pa,"readwrite");yield n.objectStore(pa).put(t,Jy(i)),yield n.done}catch(e){if(e instanceof St)Bi.warn(e.message);else{let n=Xt.create("idb-set",{originalErrorMessage:e?.message});Bi.warn(n.message)}}})}function Jy(i){return`${i.name}!${i.options.appId}`}var VR=1024,jR=30*24*60*60*1e3,Xm=class{constructor(t){this.container=t,this._heartbeatsCache=null;let e=this.container.getProvider("app").getImmediate();this._storage=new Zm(e),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}triggerHeartbeat(){return T(this,null,function*(){var t,e;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Gy();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=jR}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Bi.warn(n)}})}getHeartbeatsHeader(){return T(this,null,function*(){var t;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=Gy(),{heartbeatsToSend:n,unsentEntries:r}=UR(this._heartbeatsCache.heartbeats),s=la(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Bi.warn(e),""}})}};function Gy(){return new Date().toISOString().substring(0,10)}function UR(i,t=VR){let e=[],n=i.slice();for(let r of i){let s=e.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Ky(e)>t){s.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),Ky(e)>t){e.pop();break}n=n.slice(1)}return{heartbeatsToSend:e,unsentEntries:n}}var Zm=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return T(this,null,function*(){return Um()?Dy().then(()=>!0).catch(()=>!1):!1})}read(){return T(this,null,function*(){if(yield this._canUseIndexedDBPromise){let e=yield LR(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(t){return T(this,null,function*(){var e;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Hy(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return})}add(t){return T(this,null,function*(){var e;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Hy(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return})}};function Ky(i){return la(JSON.stringify({version:2,heartbeats:i})).length}function BR(i){Bt(new ut("platform-logger",t=>new Km(t),"PRIVATE")),Bt(new ut("heartbeat",t=>new Xm(t),"PRIVATE")),Ie(Wl,Qm,i),Ie(Wl,Qm,"esm2017"),Ie("fire-js","")}BR("");var zR="firebase",$R="10.14.1";Ie(zR,$R,"app");var qi=new Kr("ANGULARFIRE2_VERSION");function bs(i,t,e){if(t){if(t.length===1)return t[0];let s=t.filter(o=>o.app===e);if(s.length===1)return s[0]}return e.container.getProvider(i).getImmediate({optional:!0})}var nr=(i,t)=>{let e=t?[t]:ga(),n=[];return e.forEach(r=>{r.container.getProvider(i).instances.forEach(o=>{n.includes(o)||n.push(o)})}),n},wn=class{constructor(){return nr(qR)}},qR="app-check";function vs(){}var Ql=class{zone;delegate;constructor(t,e=kv){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){let r=this.zone,s=function(o){r.runGuarded(()=>{t.apply(this,[o])})};return this.delegate.schedule(s,e,n)}},tf=class{zone;task=null;constructor(t){this.zone=t}call(t,e){let n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vs,{},vs,vs)),e.pipe(Ae({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},In=(()=>{class i{ngZone;outsideAngular;insideAngular;constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new Ql(Zone.current)),this.insideAngular=e.run(()=>new Ql(Zone.current,Rv)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(n){return new(n||i)(R(q))};static \u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Yl(){let i=globalThis.\u0275AngularFireScheduler;if(!i)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return i}function WR(i){return Yl().ngZone.runOutsideAngular(()=>i())}function ir(i){return Yl().ngZone.run(()=>i())}function HR(i){return GR(Yl())(i)}function GR(i){return function(e){return e=e.lift(new tf(i.ngZone)),e.pipe(mh(i.outsideAngular),hh(i.insideAngular))}}var KR=(i,t)=>function(){let n=arguments;return t&&setTimeout(()=>{t.state==="scheduled"&&t.invoke()},10),ir(()=>i.apply(void 0,n))},wt=(i,t)=>function(){let e,n=arguments;for(let s=0;s<arguments.length;s++)typeof n[s]=="function"&&(t&&(e||=ir(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vs,{},vs,vs))),n[s]=KR(n[s],e));let r=WR(()=>i.apply(this,n));if(!t)if(r instanceof $t){let s=Yl();return r.pipe(mh(s.outsideAngular),hh(s.insideAngular))}else return ir(()=>r);return r instanceof $t?r.pipe(HR):r instanceof Promise?ir(()=>new Promise((s,o)=>r.then(c=>ir(()=>s(c)),c=>ir(()=>o(c))))):typeof r=="function"&&e?function(){return setTimeout(()=>{e&&e.state==="scheduled"&&e.invoke()},10),r.apply(this,arguments)}:ir(()=>r)};var ai=class{constructor(t){return t}},Wi=class{constructor(){return ga()}};function QR(i){return i&&i.length===1?i[0]:new ai($i())}var nf=new U("angularfire2._apps"),YR={provide:ai,useFactory:QR,deps:[[new De,nf]]},XR={provide:Wi,deps:[[new De,nf]]};function ZR(i){return(t,e)=>{let n=e.get(Ht);Ie("angularfire",qi.full,"core"),Ie("angularfire",qi.full,"app"),Ie("angular",xh.full,n.toString());let r=t.runOutsideAngular(()=>i(e));return new ai(r)}}function ew(i,...t){return gt([YR,XR,{provide:nf,useFactory:ZR(i),multi:!0,deps:[q,$e,In,...t]}])}var tw=wt(_s,!0);function vw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var bw=vw,yw=new Qt("auth","Firebase",vw());var id=new Yt("@firebase/auth");function JR(i,...t){id.logLevel<=de.WARN&&id.warn(`Auth (${zt}): ${i}`,...t)}function Zl(i,...t){id.logLevel<=de.ERROR&&id.error(`Auth (${zt}): ${i}`,...t)}function xi(i,...t){throw xf(i,...t)}function rr(i,...t){return xf(i,...t)}function ww(i,t,e){let n=Object.assign(Object.assign({},bw()),{[t]:e});return new Qt("auth","Firebase",n).create(t,{appName:i.name})}function Ki(i){return ww(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xf(i,...t){if(typeof i!="string"){let e=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=i.name),i._errorFactory.create(e,...n)}return yw.create(i,...t)}function K(i,t,...e){if(!i)throw xf(t,...e)}function Hi(i){let t="INTERNAL ASSERTION FAILED: "+i;throw Zl(t),new Error(t)}function Cn(i,t){i||Hi(t)}function af(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function ek(){return iw()==="http:"||iw()==="https:"}function iw(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}function tk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ek()||Ry()||"connection"in navigator)?navigator.onLine:!0}function ik(){if(typeof navigator>"u")return null;let i=navigator;return i.languages&&i.languages[0]||i.language||null}var sr=class{constructor(t,e){this.shortDelay=t,this.longDelay=e,Cn(e>t,"Short delay should be less than long delay!"),this.isMobile=ua()||Ul()}get(){return tk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Sf(i,t){Cn(i.emulator,"Emulator should always be set here");let{url:e}=i.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}var nd=class{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var nk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var rk=new sr(3e4,6e4);function Tn(i,t){return i.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:i.tenantId}):t}function xn(s,o,c,l){return T(this,arguments,function*(i,t,e,n,r={}){return Iw(i,r,()=>T(this,null,function*(){let u={},m={};n&&(t==="GET"?m=n:u={body:JSON.stringify(n)});let p=er(Object.assign({key:i.config.apiKey},m)).slice(1),_=yield i._getAdditionalHeaders();_["Content-Type"]="application/json",i.languageCode&&(_["X-Firebase-Locale"]=i.languageCode);let S=Object.assign({method:t,headers:_},u);return Ay()||(S.referrerPolicy="no-referrer"),nd.fetch()(Ew(i,i.config.apiHost,e,p),S)}))})}function Iw(i,t,e){return T(this,null,function*(){i._canInitEmulator=!1;let n=Object.assign(Object.assign({},nk),t);try{let r=new cf(i),s=yield Promise.race([e(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Xl(i,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[l,u]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xl(i,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Xl(i,"email-already-in-use",o);if(l==="USER_DISABLED")throw Xl(i,"user-disabled",o);let m=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw ww(i,m,u);xi(i,m)}}catch(r){if(r instanceof St)throw r;xi(i,"network-request-failed",{message:String(r)})}})}function Ta(s,o,c,l){return T(this,arguments,function*(i,t,e,n,r={}){let u=yield xn(i,t,e,n,r);return"mfaPendingCredential"in u&&xi(i,"multi-factor-auth-required",{_serverResponse:u}),u})}function Ew(i,t,e,n){let r=`${t}${e}?${n}`;return i.config.emulator?Sf(i.config,r):`${i.config.apiScheme}://${r}`}function sk(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var cf=class{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,n)=>{this.timer=setTimeout(()=>n(rr(this.auth,"network-request-failed")),rk.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Xl(i,t,e){let n={appName:i.name};e.email&&(n.email=e.email),e.phoneNumber&&(n.phoneNumber=e.phoneNumber);let r=rr(i,t,n);return r.customData._tokenResponse=e,r}function nw(i){return i!==void 0&&i.enterprise!==void 0}var lf=class{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return sk(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}};function ok(i,t){return T(this,null,function*(){return xn(i,"GET","/v2/recaptchaConfig",Tn(i,t))})}function ak(i,t){return T(this,null,function*(){return xn(i,"POST","/v1/accounts:delete",t)})}function Cw(i,t){return T(this,null,function*(){return xn(i,"POST","/v1/accounts:lookup",t)})}function va(i){if(i)try{let t=new Date(Number(i));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}function Af(i,t=!1){return T(this,null,function*(){let e=dt(i),n=yield e.getIdToken(t),r=Rf(n);K(r&&r.exp&&r.auth_time&&r.iat,e.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:n,authTime:va(rf(r.auth_time)),issuedAtTime:va(rf(r.iat)),expirationTime:va(rf(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function rf(i){return Number(i)*1e3}function Rf(i){let[t,e,n]=i.split(".");if(t===void 0||e===void 0||n===void 0)return Zl("JWT malformed, contained fewer than 3 sections"),null;try{let r=da(e);return r?JSON.parse(r):(Zl("Failed to decode base64 JWT payload"),null)}catch(r){return Zl("Caught error parsing JWT payload as JSON",r?.toString()),null}}function rw(i){let t=Rf(i);return K(t,"internal-error"),K(typeof t.exp<"u","internal-error"),K(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}function ya(i,t,e=!1){return T(this,null,function*(){if(e)return t;try{return yield t}catch(n){throw n instanceof St&&ck(n)&&i.auth.currentUser===i&&(yield i.auth.signOut()),n}})}function ck({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}var df=class{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){let n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;let r=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;let e=this.getInterval(t);this.timerId=setTimeout(()=>T(this,null,function*(){yield this.iteration()}),e)}iteration(){return T(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var wa=class{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=va(this.lastLoginAt),this.creationTime=va(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function rd(i){return T(this,null,function*(){var t;let e=i.auth,n=yield i.getIdToken(),r=yield ya(i,Cw(e,{idToken:n}));K(r?.users.length,e,"internal-error");let s=r.users[0];i._notifyReloadListener(s);let o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?Tw(s.providerUserInfo):[],c=lk(i.providerData,o),l=i.isAnonymous,u=!(i.email&&s.passwordHash)&&!c?.length,m=l?u:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new wa(s.createdAt,s.lastLoginAt),isAnonymous:m};Object.assign(i,p)})}function kf(i){return T(this,null,function*(){let t=dt(i);yield rd(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})}function lk(i,t){return[...i.filter(n=>!t.some(r=>r.providerId===n.providerId)),...t]}function Tw(i){return i.map(t=>{var{providerId:e}=t,n=uh(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function dk(i,t){return T(this,null,function*(){let e=yield Iw(i,{},()=>T(this,null,function*(){let n=er({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=i.config,o=Ew(i,r,"/v1/token",`key=${s}`),c=yield i._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",nd.fetch()(o,{method:"POST",headers:c,body:n})}));return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}})}function uk(i,t){return T(this,null,function*(){return xn(i,"POST","/v2/accounts:revokeToken",Tn(i,t))})}var ba=class i{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){K(t.idToken,"internal-error"),K(typeof t.idToken<"u","internal-error"),K(typeof t.refreshToken<"u","internal-error");let e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):rw(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){K(t.length!==0,"internal-error");let e=rw(t);this.updateTokensAndExpiration(t,null,e)}getToken(t,e=!1){return T(this,null,function*(){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,t,"user-token-expired"),this.refreshToken?(yield this.refresh(t,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(t,e){return T(this,null,function*(){let{accessToken:n,refreshToken:r,expiresIn:s}=yield dk(t,e);this.updateTokensAndExpiration(n,r,Number(s))})}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,e){let{refreshToken:n,accessToken:r,expirationTime:s}=e,o=new i;return n&&(K(typeof n=="string","internal-error",{appName:t}),o.refreshToken=n),r&&(K(typeof r=="string","internal-error",{appName:t}),o.accessToken=r),s&&(K(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new i,this.toJSON())}_performRefresh(){return Hi("not implemented")}};function En(i,t){K(typeof i=="string"||typeof i>"u","internal-error",{appName:t})}var ys=class i{constructor(t){var{uid:e,auth:n,stsTokenManager:r}=t,s=uh(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new df(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new wa(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(t){return T(this,null,function*(){let e=yield ya(this,this.stsTokenManager.getToken(this.auth,t));return K(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e})}getIdTokenResult(t){return Af(this,t)}reload(){return kf(this)}_assign(t){this!==t&&(K(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>Object.assign({},e)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){let e=new i(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(t,e=!1){return T(this,null,function*(){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&(yield rd(this)),yield this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)})}delete(){return T(this,null,function*(){if(Zt(this.auth.app))return Promise.reject(Ki(this.auth));let t=yield this.getIdToken();return yield ya(this,ak(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,r,s,o,c,l,u,m;let p=(n=e.displayName)!==null&&n!==void 0?n:void 0,_=(r=e.email)!==null&&r!==void 0?r:void 0,S=(s=e.phoneNumber)!==null&&s!==void 0?s:void 0,A=(o=e.photoURL)!==null&&o!==void 0?o:void 0,k=(c=e.tenantId)!==null&&c!==void 0?c:void 0,F=(l=e._redirectEventId)!==null&&l!==void 0?l:void 0,ce=(u=e.createdAt)!==null&&u!==void 0?u:void 0,pe=(m=e.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:Q,emailVerified:We,isAnonymous:mt,providerData:Ve,stsTokenManager:I}=e;K(Q&&I,t,"internal-error");let g=ba.fromJSON(this.name,I);K(typeof Q=="string",t,"internal-error"),En(p,t.name),En(_,t.name),K(typeof We=="boolean",t,"internal-error"),K(typeof mt=="boolean",t,"internal-error"),En(S,t.name),En(A,t.name),En(k,t.name),En(F,t.name),En(ce,t.name),En(pe,t.name);let b=new i({uid:Q,auth:t,email:_,emailVerified:We,displayName:p,isAnonymous:mt,photoURL:A,phoneNumber:S,tenantId:k,stsTokenManager:g,createdAt:ce,lastLoginAt:pe});return Ve&&Array.isArray(Ve)&&(b.providerData=Ve.map(y=>Object.assign({},y))),F&&(b._redirectEventId=F),b}static _fromIdTokenResponse(t,e,n=!1){return T(this,null,function*(){let r=new ba;r.updateFromServerResponse(e);let s=new i({uid:e.localId,auth:t,stsTokenManager:r,isAnonymous:n});return yield rd(s),s})}static _fromGetAccountInfoResponse(t,e,n){return T(this,null,function*(){let r=e.users[0];K(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?Tw(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,c=new ba;c.updateFromIdToken(n);let l=new i({uid:r.localId,auth:t,stsTokenManager:c,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new wa(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(l,u),l})}};var sw=new Map;function Gi(i){Cn(i instanceof Function,"Expected a class definition");let t=sw.get(i);return t?(Cn(t instanceof i,"Instance stored in cache mismatched with class"),t):(t=new i,sw.set(i,t),t)}var hk=(()=>{class i{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return T(this,null,function*(){return!0})}_set(e,n){return T(this,null,function*(){this.storage[e]=n})}_get(e){return T(this,null,function*(){let n=this.storage[e];return n===void 0?null:n})}_remove(e){return T(this,null,function*(){delete this.storage[e]})}_addListener(e,n){}_removeListener(e,n){}}return i.type="NONE",i})(),uf=hk;function Jl(i,t,e){return`firebase:${i}:${t}:${e}`}var sd=class i{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;let{config:r,name:s}=this.auth;this.fullUserKey=Jl(this.userKey,r.apiKey,s),this.fullPersistenceKey=Jl("persistence",r.apiKey,s),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}getCurrentUser(){return T(this,null,function*(){let t=yield this.persistence._get(this.fullUserKey);return t?ys._fromJSON(this.auth,t):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(t){return T(this,null,function*(){if(this.persistence===t)return;let e=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(t,e,n="authUser"){return T(this,null,function*(){if(!e.length)return new i(Gi(uf),t,n);let r=(yield Promise.all(e.map(u=>T(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),s=r[0]||Gi(uf),o=Jl(n,t.config.apiKey,t.name),c=null;for(let u of e)try{let m=yield u._get(o);if(m){let p=ys._fromJSON(t,m);u!==s&&(c=p),s=u;break}}catch{}let l=r.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new i(s,t,n):(s=l[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(e.map(u=>T(this,null,function*(){if(u!==s)try{yield u._remove(o)}catch{}}))),new i(s,t,n))})}};function ow(i){let t=i.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Rw(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(xw(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Dw(t))return"Blackberry";if(Pw(t))return"Webos";if(Sw(t))return"Safari";if((t.includes("chrome/")||Aw(t))&&!t.includes("edge/"))return"Chrome";if(kw(t))return"Android";{let e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=i.match(e);if(n?.length===2)return n[1]}return"Other"}function xw(i=Je()){return/firefox\//i.test(i)}function Sw(i=Je()){let t=i.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Aw(i=Je()){return/crios\//i.test(i)}function Rw(i=Je()){return/iemobile/i.test(i)}function kw(i=Je()){return/android/i.test(i)}function Dw(i=Je()){return/blackberry/i.test(i)}function Pw(i=Je()){return/webos/i.test(i)}function Df(i=Je()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function mk(i=Je()){var t;return Df(i)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function fk(){return ky()&&document.documentMode===10}function Mw(i=Je()){return Df(i)||kw(i)||Pw(i)||Dw(i)||/windows phone/i.test(i)||Rw(i)}function Ow(i,t=[]){let e;switch(i){case"Browser":e=ow(Je());break;case"Worker":e=`${ow(Je())}-${i}`;break;default:e=i}let n=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${zt}/${n}`}var hf=class{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){let n=s=>new Promise((o,c)=>{try{let l=t(s);o(l)}catch(l){c(l)}});n.onAbort=e,this.queue.push(n);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(t){return T(this,null,function*(){if(this.auth.currentUser===t)return;let e=[];try{for(let n of this.queue)yield n(t),n.onAbort&&e.push(n.onAbort)}catch(n){e.reverse();for(let r of e)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}})}};function pk(e){return T(this,arguments,function*(i,t={}){return xn(i,"GET","/v2/passwordPolicy",Tn(i,t))})}var gk=6,mf=class{constructor(t){var e,n,r,s;let o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=o.minPasswordLength)!==null&&e!==void 0?e:gk,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(n=t.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,n,r,s,o,c;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,l),this.validatePasswordCharacterOptions(t,l),l.isValid&&(l.isValid=(e=l.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(t,e){let n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(e.meetsMinPasswordLength=t.length>=n),r&&(e.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let n;for(let r=0;r<t.length;r++)n=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(e,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,e,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}};var ff=class{constructor(t,e,n,r){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new od(this),this.idTokenSubscription=new od(this),this.beforeStateQueue=new hf(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Gi(e)),this._initializationPromise=this.queue(()=>T(this,null,function*(){var n,r;if(!this._deleted&&(this.persistenceManager=yield sd.create(this,t),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(e),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return T(this,null,function*(){if(this._deleted)return;let t=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(t,!0)}})}initializeCurrentUserFromIdToken(t){return T(this,null,function*(){try{let e=yield Cw(this,{idToken:t}),n=yield ys._fromGetAccountInfoResponse(this,e,t);yield this.directlySetCurrentUser(n)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(t){return T(this,null,function*(){var e;if(Zt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let n=yield this.assertedPersistence.getCurrentUser(),r=n,s=!1;if(t&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,c=r?._redirectEventId,l=yield this.tryRedirectSignIn(t);(!o||o===c)&&l?.user&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(t){return T(this,null,function*(){let e=null;try{e=yield this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{yield this._setRedirectUser(null)}return e})}reloadAndSetCurrentUserOrClear(t){return T(this,null,function*(){try{yield rd(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)})}useDeviceLanguage(){this.languageCode=ik()}_delete(){return T(this,null,function*(){this._deleted=!0})}updateCurrentUser(t){return T(this,null,function*(){if(Zt(this.app))return Promise.reject(Ki(this));let e=t?dt(t):null;return e&&K(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))})}_updateCurrentUser(t,e=!1){return T(this,null,function*(){if(!this._deleted)return t&&K(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||(yield this.beforeStateQueue.runMiddleware(t)),this.queue(()=>T(this,null,function*(){yield this.directlySetCurrentUser(t),this.notifyAuthListeners()}))})}signOut(){return T(this,null,function*(){return Zt(this.app)?Promise.reject(Ki(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(t){return Zt(this.app)?Promise.reject(Ki(this)):this.queue(()=>T(this,null,function*(){yield this.assertedPersistence.setPersistence(Gi(t))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(t){return T(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return T(this,null,function*(){let t=yield pk(this),e=new mf(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Qt("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{let n=this.onAuthStateChanged(()=>{n(),t()},e)}})}revokeAccessToken(t){return T(this,null,function*(){if(this.currentUser){let e=yield this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(n.tenantId=this.tenantId),yield uk(this,n)}})}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}_setRedirectUser(t,e){return T(this,null,function*(){let n=yield this.getOrInitRedirectPersistenceManager(e);return t===null?n.removeCurrentUser():n.setCurrentUser(t)})}getOrInitRedirectPersistenceManager(t){return T(this,null,function*(){if(!this.redirectPersistenceManager){let e=t&&Gi(t)||this._popupRedirectResolver;K(e,this,"argument-error"),this.redirectPersistenceManager=yield sd.create(this,[Gi(e._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(t){return T(this,null,function*(){var e,n;return this._isInitialized&&(yield this.queue(()=>T(this,null,function*(){}))),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===t?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===t?this.redirectUser:null})}_persistUserIfCurrent(t){return T(this,null,function*(){if(t===this.currentUser)return this.queue(()=>T(this,null,function*(){return this.directlySetCurrentUser(t)}))})}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let n=(e=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,r){if(this._deleted)return()=>{};let s=typeof e=="function"?e:e.next.bind(e),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof e=="function"){let l=t.addObserver(e,n,r);return()=>{o=!0,l()}}else{let l=t.addObserver(e);return()=>{o=!0,l()}}}directlySetCurrentUser(t){return T(this,null,function*(){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?yield this.assertedPersistence.setCurrentUser(t):yield this.assertedPersistence.removeCurrentUser()})}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Ow(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return T(this,null,function*(){var t;let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let n=yield(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);let r=yield this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e})}_getAppCheckToken(){return T(this,null,function*(){var t;let e=yield(t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken();return e?.error&&JR(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function ar(i){return dt(i)}var od=class{constructor(t){this.auth=t,this.observer=null,this.addObserver=Bl(e=>this.observer=e)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var md={loadJS(){return T(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _k(i){md=i}function Nw(i){return md.loadJS(i)}function vk(){return md.recaptchaEnterpriseScript}function bk(){return md.gapiScript}function Fw(i){return`__${i}${Math.floor(Math.random()*1e6)}`}var yk="recaptcha-enterprise",wk="NO_RECAPTCHA",pf=class{constructor(t){this.type=yk,this.auth=ar(t)}verify(t="verify",e=!1){return T(this,null,function*(){function n(s){return T(this,null,function*(){if(!e){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,c)=>T(this,null,function*(){ok(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{let u=new lf(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{c(l)})}))})}function r(s,o,c){let l=window.grecaptcha;nw(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:t}).then(u=>{o(u)}).catch(()=>{o(wk)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{n(this.auth).then(c=>{if(!e&&nw(window.grecaptcha))r(c,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=vk();l.length!==0&&(l+=c),Nw(l).then(()=>{r(c,s,o)}).catch(u=>{o(u)})}}).catch(c=>{o(c)})})})}};function aw(i,t,e,n=!1){return T(this,null,function*(){let r=new pf(i),s;try{s=yield r.verify(e)}catch{s=yield r.verify(e,!0)}let o=Object.assign({},t);return n?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function gf(i,t,e,n){return T(this,null,function*(){var r;if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield aw(i,t,e,e==="getOobCode");return n(i,s)}else return n(i,t).catch(s=>T(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield aw(i,t,e,e==="getOobCode");return n(i,o)}else return Promise.reject(s)}))})}function Pf(i,t){let e=zi(i,"auth");if(e.isInitialized()){let r=e.getImmediate(),s=e.getOptions();if(Jn(s,t??{}))return r;xi(r,"already-initialized")}return e.initialize({options:t})}function Ik(i,t){let e=t?.persistence||[],n=(Array.isArray(e)?e:[e]).map(Gi);t?.errorMap&&i._updateErrorMap(t.errorMap),i._initializeWithPersistence(n,t?.popupRedirectResolver)}function Mf(i,t,e){let n=ar(i);K(n._canInitEmulator,n,"emulator-config-failed"),K(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");let r=!!e?.disableWarnings,s=Lw(t),{host:o,port:c}=Ek(t),l=c===null?"":`:${c}`;n.config.emulator={url:`${s}//${o}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||Ck()}function Lw(i){let t=i.indexOf(":");return t<0?"":i.substr(0,t+1)}function Ek(i){let t=Lw(i),e=/(\/\/)?([^?#/]+)/.exec(i.substr(t.length));if(!e)return{host:"",port:null};let n=e[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(n);if(r){let s=r[1];return{host:s,port:cw(n.substr(s.length+1))}}else{let[s,o]=n.split(":");return{host:s,port:cw(o)}}}function cw(i){if(!i)return null;let t=Number(i);return isNaN(t)?null:t}function Ck(){function i(){let t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}var Ia=class{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Hi("not implemented")}_getIdTokenResponse(t){return Hi("not implemented")}_linkToIdToken(t,e){return Hi("not implemented")}_getReauthenticationResolver(t){return Hi("not implemented")}};function Tk(i,t){return T(this,null,function*(){return xn(i,"POST","/v1/accounts:signUp",t)})}function xk(i,t){return T(this,null,function*(){return Ta(i,"POST","/v1/accounts:signInWithPassword",Tn(i,t))})}function Sk(i,t){return T(this,null,function*(){return Ta(i,"POST","/v1/accounts:signInWithEmailLink",Tn(i,t))})}function Ak(i,t){return T(this,null,function*(){return Ta(i,"POST","/v1/accounts:signInWithEmailLink",Tn(i,t))})}var Ea=class i extends Ia{constructor(t,e,n,r=null){super("password",n),this._email=t,this._password=e,this._tenantId=r}static _fromEmailAndPassword(t,e){return new i(t,e,"password")}static _fromEmailAndCode(t,e,n=null){return new i(t,e,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){let e=typeof t=="string"?JSON.parse(t):t;if(e?.email&&e?.password){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}_getIdTokenResponse(t){return T(this,null,function*(){switch(this.signInMethod){case"password":let e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gf(t,e,"signInWithPassword",xk);case"emailLink":return Sk(t,{email:this._email,oobCode:this._password});default:xi(t,"internal-error")}})}_linkToIdToken(t,e){return T(this,null,function*(){switch(this.signInMethod){case"password":let n={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gf(t,n,"signUpPassword",Tk);case"emailLink":return Ak(t,{idToken:e,email:this._email,oobCode:this._password});default:xi(t,"internal-error")}})}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}};function sf(i,t){return T(this,null,function*(){return Ta(i,"POST","/v1/accounts:signInWithIdp",Tn(i,t))})}function Rk(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function kk(i){let t=us(hs(i)).link,e=t?us(hs(t)).deep_link_id:null,n=us(hs(i)).deep_link_id;return(n?us(hs(n)).link:null)||n||e||t||i}var ad=class i{constructor(t){var e,n,r,s,o,c;let l=us(hs(t)),u=(e=l.apiKey)!==null&&e!==void 0?e:null,m=(n=l.oobCode)!==null&&n!==void 0?n:null,p=Rk((r=l.mode)!==null&&r!==void 0?r:null);K(u&&m&&p,"argument-error"),this.apiKey=u,this.operation=p,this.code=m,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=l.tenantId)!==null&&c!==void 0?c:null}static parseLink(t){let e=kk(t);try{return new i(e)}catch{return null}}};var Vw=(()=>{class i{constructor(){this.providerId=i.PROVIDER_ID}static credential(e,n){return Ea._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){let r=ad.parseLink(n);return K(r,"argument-error"),Ea._fromEmailAndCode(e,r.code,r.tenantId)}}i.PROVIDER_ID="password",i.EMAIL_PASSWORD_SIGN_IN_METHOD="password",i.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return i})(),cd=class{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}};var _f=class extends cd{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}};function Dk(i,t){return T(this,null,function*(){return Ta(i,"POST","/v1/accounts:signUp",Tn(i,t))})}var ws=class i{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static _fromIdTokenResponse(t,e,n,r=!1){return T(this,null,function*(){let s=yield ys._fromIdTokenResponse(t,n,r),o=lw(n);return new i({user:s,providerId:o,_tokenResponse:n,operationType:e})})}static _forOperation(t,e,n){return T(this,null,function*(){yield t._updateTokensIfNecessary(n,!0);let r=lw(n);return new i({user:t,providerId:r,_tokenResponse:n,operationType:e})})}};function lw(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}var vf=class i extends St{constructor(t,e,n,r){var s;super(e.code,e.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,i.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,r){return new i(t,e,n,r)}};function jw(i,t,e,n){return(t==="reauthenticate"?e._getReauthenticationResolver(i):e._getIdTokenResponse(i)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?vf._fromErrorAndOperation(i,s,t,n):s})}function Pk(i,t,e=!1){return T(this,null,function*(){let n=yield ya(i,t._linkToIdToken(i.auth,yield i.getIdToken()),e);return ws._forOperation(i,"link",n)})}function Mk(i,t,e=!1){return T(this,null,function*(){let{auth:n}=i;if(Zt(n.app))return Promise.reject(Ki(n));let r="reauthenticate";try{let s=yield ya(i,jw(n,r,t,i),e);K(s.idToken,n,"internal-error");let o=Rf(s.idToken);K(o,n,"internal-error");let{sub:c}=o;return K(i.uid===c,n,"user-mismatch"),ws._forOperation(i,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&xi(n,"user-mismatch"),s}})}function Uw(i,t,e=!1){return T(this,null,function*(){if(Zt(i.app))return Promise.reject(Ki(i));let n="signIn",r=yield jw(i,n,t),s=yield ws._fromIdTokenResponse(i,n,r);return e||(yield i._updateCurrentUser(s.user)),s})}function Of(i,t){return T(this,null,function*(){return Uw(ar(i),t)})}function Bw(i){return T(this,null,function*(){let t=ar(i);t._getPasswordPolicyInternal()&&(yield t._updatePasswordPolicy())})}function Nf(i,t,e){return T(this,null,function*(){if(Zt(i.app))return Promise.reject(Ki(i));let n=ar(i),o=yield gf(n,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Dk).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Bw(i),l}),c=yield ws._fromIdTokenResponse(n,"signIn",o);return yield n._updateCurrentUser(c.user),c})}function Ff(i,t,e){return Zt(i.app)?Promise.reject(Ki(i)):Of(dt(i),Vw.credential(t,e)).catch(n=>T(this,null,function*(){throw n.code==="auth/password-does-not-meet-requirements"&&Bw(i),n}))}function xa(i,t,e,n){return dt(i).onIdTokenChanged(t,e,n)}function Lf(i,t,e){return dt(i).beforeAuthStateChanged(t,e)}function Vf(i){return dt(i).signOut()}var ld="__sak";var dd=class{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(ld,"1"),this.storage.removeItem(ld),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){let e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}};var Ok=1e3,Nk=10,Fk=(()=>{class i extends dd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Mw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let n of Object.keys(this.listeners)){let r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((c,l,u)=>{this.notifyListeners(c,u)});return}let r=e.key;n?this.detachListener():this.stopPolling();let s=()=>{let c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);fk()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Nk):s()}notifyListeners(e,n){this.localCache[e]=n;let r=this.listeners[e];if(r)for(let s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Ok)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(e,n){return T(this,null,function*(){yield cn(i.prototype,this,"_set").call(this,e,n),this.localCache[e]=JSON.stringify(n)})}_get(e){return T(this,null,function*(){let n=yield cn(i.prototype,this,"_get").call(this,e);return this.localCache[e]=JSON.stringify(n),n})}_remove(e){return T(this,null,function*(){yield cn(i.prototype,this,"_remove").call(this,e),delete this.localCache[e]})}}return i.type="LOCAL",i})(),zw=Fk;var Lk=(()=>{class i extends dd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}return i.type="SESSION",i})(),jf=Lk;function Vk(i){return Promise.all(i.map(t=>T(this,null,function*(){try{return{fulfilled:!0,value:yield t}}catch(e){return{fulfilled:!1,reason:e}}})))}var jk=(()=>{class i{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;let r=new i(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}handleEvent(e){return T(this,null,function*(){let n=e,{eventId:r,eventType:s,data:o}=n.data,c=this.handlersMap[s];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let l=Array.from(c).map(m=>T(this,null,function*(){return m(n.origin,o)})),u=yield Vk(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}i.receivers=[];return i})();function $w(i="",t=10){let e="";for(let n=0;n<t;n++)e+=Math.floor(Math.random()*10);return i+e}var bf=class{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}_send(t,e,n=50){return T(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((c,l)=>{let u=$w("",20);r.port1.start();let m=setTimeout(()=>{l(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(p){let _=p;if(_.data.eventId===u)switch(_.data.status){case"ack":clearTimeout(m),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(_.data.response);break;default:clearTimeout(m),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:u,data:e},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Ti(){return window}function Uk(i){Ti().location.href=i}function qw(){return typeof Ti().WorkerGlobalScope<"u"&&typeof Ti().importScripts=="function"}function Bk(){return T(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function zk(){var i;return((i=navigator?.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function $k(){return qw()?self:null}var Ww="firebaseLocalStorageDb",qk=1,ud="firebaseLocalStorage",Hw="fbase_key",or=class{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}};function fd(i,t){return i.transaction([ud],t?"readwrite":"readonly").objectStore(ud)}function Wk(){let i=indexedDB.deleteDatabase(Ww);return new or(i).toPromise()}function yf(){let i=indexedDB.open(Ww,qk);return new Promise((t,e)=>{i.addEventListener("error",()=>{e(i.error)}),i.addEventListener("upgradeneeded",()=>{let n=i.result;try{n.createObjectStore(ud,{keyPath:Hw})}catch(r){e(r)}}),i.addEventListener("success",()=>T(this,null,function*(){let n=i.result;n.objectStoreNames.contains(ud)?t(n):(n.close(),yield Wk(),t(yield yf()))}))})}function dw(i,t,e){return T(this,null,function*(){let n=fd(i,!0).put({[Hw]:t,value:e});return new or(n).toPromise()})}function Hk(i,t){return T(this,null,function*(){let e=fd(i,!1).get(t),n=yield new or(e).toPromise();return n===void 0?null:n.value})}function uw(i,t){let e=fd(i,!0).delete(t);return new or(e).toPromise()}var Gk=800,Kk=3,Qk=(()=>{class i{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return T(this,null,function*(){return this.db?this.db:(this.db=yield yf(),this.db)})}_withRetries(e){return T(this,null,function*(){let n=0;for(;;)try{let r=yield this._openDb();return yield e(r)}catch(r){if(n++>Kk)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return T(this,null,function*(){return qw()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return T(this,null,function*(){this.receiver=jk._getInstance($k()),this.receiver._subscribe("keyChanged",(e,n)=>T(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(n.key)}})),this.receiver._subscribe("ping",(e,n)=>T(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return T(this,null,function*(){var e,n;if(this.activeServiceWorker=yield Bk(),!this.activeServiceWorker)return;this.sender=new bf(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(e){return T(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||zk()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return T(this,null,function*(){try{if(!indexedDB)return!1;let e=yield yf();return yield dw(e,ld,"1"),yield uw(e,ld),!0}catch{}return!1})}_withPendingWrite(e){return T(this,null,function*(){this.pendingWrites++;try{yield e()}finally{this.pendingWrites--}})}_set(e,n){return T(this,null,function*(){return this._withPendingWrite(()=>T(this,null,function*(){return yield this._withRetries(r=>dw(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)}))})}_get(e){return T(this,null,function*(){let n=yield this._withRetries(r=>Hk(r,e));return this.localCache[e]=n,n})}_remove(e){return T(this,null,function*(){return this._withPendingWrite(()=>T(this,null,function*(){return yield this._withRetries(n=>uw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)}))})}_poll(){return T(this,null,function*(){let e=yield this._withRetries(s=>{let o=fd(s,!1).getAll();return new or(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];let n=[],r=new Set;if(e.length!==0)for(let{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n})}notifyListeners(e,n){this.localCache[e]=n;let r=this.listeners[e];if(r)for(let s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>T(this,null,function*(){return this._poll()}),Gk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return i.type="LOCAL",i})(),Gw=Qk;var p2=Fw("rcb"),g2=new sr(3e4,6e4);function Yk(i,t){return t?Gi(t):(K(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}var Ca=class extends Ia{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return sf(t,this._buildIdpRequest())}_linkToIdToken(t,e){return sf(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return sf(t,this._buildIdpRequest())}_buildIdpRequest(t){let e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}};function Xk(i){return Uw(i.auth,new Ca(i),i.bypassAuthState)}function Zk(i){let{auth:t,user:e}=i;return K(e,t,"internal-error"),Mk(e,new Ca(i),i.bypassAuthState)}function Jk(i){return T(this,null,function*(){let{auth:t,user:e}=i;return K(e,t,"internal-error"),Pk(e,new Ca(i),i.bypassAuthState)})}var wf=class{constructor(t,e,n,r,s=!1){this.auth=t,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((t,e)=>T(this,null,function*(){this.pendingPromise={resolve:t,reject:e};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}onAuthEvent(t){return T(this,null,function*(){let{urlResponse:e,sessionId:n,postBody:r,tenantId:s,error:o,type:c}=t;if(o){this.reject(o);return}let l={auth:this.auth,requestUri:e,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(l))}catch(u){this.reject(u)}})}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Xk;case"linkViaPopup":case"linkViaRedirect":return Jk;case"reauthViaPopup":case"reauthViaRedirect":return Zk;default:xi(this.auth,"internal-error")}}resolve(t){Cn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Cn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var _2=new sr(2e3,1e4);var eD="pendingRedirect",ed=new Map,If=class i extends wf{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}execute(){return T(this,null,function*(){let t=ed.get(this.auth._key());if(!t){try{let n=(yield tD(this.resolver,this.auth))?yield cn(i.prototype,this,"execute").call(this):null;t=()=>Promise.resolve(n)}catch(e){t=()=>Promise.reject(e)}ed.set(this.auth._key(),t)}return this.bypassAuthState||ed.set(this.auth._key(),()=>Promise.resolve(null)),t()})}onAuthEvent(t){return T(this,null,function*(){if(t.type==="signInViaRedirect")return cn(i.prototype,this,"onAuthEvent").call(this,t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){let e=yield this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,cn(i.prototype,this,"onAuthEvent").call(this,t);this.resolve(null)}})}onExecution(){return T(this,null,function*(){})}cleanUp(){}};function tD(i,t){return T(this,null,function*(){let e=rD(t),n=nD(i);if(!(yield n._isAvailable()))return!1;let r=(yield n._get(e))==="true";return yield n._remove(e),r})}function iD(i,t){ed.set(i._key(),t)}function nD(i){return Gi(i._redirectPersistence)}function rD(i){return Jl(eD,i.config.apiKey,i.name)}function sD(i,t,e=!1){return T(this,null,function*(){if(Zt(i.app))return Promise.reject(Ki(i));let n=ar(i),r=Yk(n,t),o=yield new If(n,r,e).execute();return o&&!e&&(delete o.user._redirectEventId,yield n._persistUserIfCurrent(o.user),yield n._setRedirectUser(null,t)),o})}var oD=10*60*1e3,Ef=class{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!aD(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!Kw(t)){let r=((n=t.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";e.onError(rr(this.auth,r))}else e.onAuthEvent(t)}isEventForConsumer(t,e){let n=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=oD&&this.cachedEventUids.clear(),this.cachedEventUids.has(hw(t))}saveEventToCache(t){this.cachedEventUids.add(hw(t)),this.lastProcessedEventTime=Date.now()}};function hw(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(t=>t).join("-")}function Kw({type:i,error:t}){return i==="unknown"&&t?.code==="auth/no-auth-event"}function aD(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Kw(i);default:return!1}}function cD(e){return T(this,arguments,function*(i,t={}){return xn(i,"GET","/v1/projects",t)})}var lD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dD=/^https?/;function uD(i){return T(this,null,function*(){if(i.config.emulator)return;let{authorizedDomains:t}=yield cD(i);for(let e of t)try{if(hD(e))return}catch{}xi(i,"unauthorized-domain")})}function hD(i){let t=af(),{protocol:e,hostname:n}=new URL(t);if(i.startsWith("chrome-extension://")){let o=new URL(i);return o.hostname===""&&n===""?e==="chrome-extension:"&&i.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&o.hostname===n}if(!dD.test(e))return!1;if(lD.test(i))return n===i;let r=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(n)}var mD=new sr(3e4,6e4);function mw(){let i=Ti().___jsl;if(i?.H){for(let t of Object.keys(i.H))if(i.H[t].r=i.H[t].r||[],i.H[t].L=i.H[t].L||[],i.H[t].r=[...i.H[t].L],i.CP)for(let e=0;e<i.CP.length;e++)i.CP[e]=null}}function fD(i){return new Promise((t,e)=>{var n,r,s;function o(){mw(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{mw(),e(rr(i,"network-request-failed"))},timeout:mD.get()})}if(!((r=(n=Ti().gapi)===null||n===void 0?void 0:n.iframes)===null||r===void 0)&&r.Iframe)t(gapi.iframes.getContext());else if(!((s=Ti().gapi)===null||s===void 0)&&s.load)o();else{let c=Fw("iframefcb");return Ti()[c]=()=>{gapi.load?o():e(rr(i,"network-request-failed"))},Nw(`${bk()}?onload=${c}`).catch(l=>e(l))}}).catch(t=>{throw td=null,t})}var td=null;function pD(i){return td=td||fD(i),td}var gD=new sr(5e3,15e3),_D="__/auth/iframe",vD="emulator/auth/iframe",bD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wD(i){let t=i.config;K(t.authDomain,i,"auth-domain-config-required");let e=t.emulator?Sf(t,vD):`https://${i.config.authDomain}/${_D}`,n={apiKey:t.apiKey,appName:i.name,v:zt},r=yD.get(i.config.apiHost);r&&(n.eid=r);let s=i._getFrameworks();return s.length&&(n.fw=s.join(",")),`${e}?${er(n).slice(1)}`}function ID(i){return T(this,null,function*(){let t=yield pD(i),e=Ti().gapi;return K(e,i,"internal-error"),t.open({where:document.body,url:wD(i),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bD,dontclear:!0},n=>new Promise((r,s)=>T(this,null,function*(){yield n.restyle({setHideOnLeave:!1});let o=rr(i,"network-request-failed"),c=Ti().setTimeout(()=>{s(o)},gD.get());function l(){Ti().clearTimeout(c),r(n)}n.ping(l).then(l,()=>{s(o)})})))})}var ED={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CD=500,TD=600,xD="_blank",SD="http://localhost",hd=class{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function AD(i,t,e,n=CD,r=TD){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString(),c="",l=Object.assign(Object.assign({},ED),{width:n.toString(),height:r.toString(),top:s,left:o}),u=Je().toLowerCase();e&&(c=Aw(u)?xD:e),xw(u)&&(t=t||SD,l.scrollbars="yes");let m=Object.entries(l).reduce((_,[S,A])=>`${_}${S}=${A},`,"");if(mk(u)&&c!=="_self")return RD(t||"",c),new hd(null);let p=window.open(t||"",c,m);K(p,i,"popup-blocked");try{p.focus()}catch{}return new hd(p)}function RD(i,t){let e=document.createElement("a");e.href=i,e.target=t;let n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(n)}var kD="__/auth/handler",DD="emulator/auth/handler",PD=encodeURIComponent("fac");function fw(i,t,e,n,r,s){return T(this,null,function*(){K(i.config.authDomain,i,"auth-domain-config-required"),K(i.config.apiKey,i,"invalid-api-key");let o={apiKey:i.config.apiKey,appName:i.name,authType:e,redirectUrl:n,v:zt,eventId:r};if(t instanceof cd){t.setDefaultLanguage(i.languageCode),o.providerId=t.providerId||"",ha(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(let[m,p]of Object.entries(s||{}))o[m]=p}if(t instanceof _f){let m=t.getScopes().filter(p=>p!=="");m.length>0&&(o.scopes=m.join(","))}i.tenantId&&(o.tid=i.tenantId);let c=o;for(let m of Object.keys(c))c[m]===void 0&&delete c[m];let l=yield i._getAppCheckToken(),u=l?`#${PD}=${encodeURIComponent(l)}`:"";return`${MD(i)}?${er(c).slice(1)}${u}`})}function MD({config:i}){return i.emulator?Sf(i,DD):`https://${i.authDomain}/${kD}`}var of="webStorageSupport",Cf=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jf,this._completeRedirectFn=sD,this._overrideRedirectResult=iD}_openPopup(t,e,n,r){return T(this,null,function*(){var s;Cn((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield fw(t,e,n,af(),r);return AD(t,o,$w())})}_openRedirect(t,e,n,r){return T(this,null,function*(){yield this._originValidation(t);let s=yield fw(t,e,n,af(),r);return Uk(s),new Promise(()=>{})})}_initialize(t){let e=t._key();if(this.eventManagers[e]){let{manager:r,promise:s}=this.eventManagers[e];return r?Promise.resolve(r):(Cn(s,"If manager is not set, promise should be"),s)}let n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch(()=>{delete this.eventManagers[e]}),n}initAndGetManager(t){return T(this,null,function*(){let e=yield ID(t),n=new Ef(t);return e.register("authEvent",r=>(K(r?.authEvent,t,"invalid-auth-event"),{status:n.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n})}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(of,{type:of},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[of];o!==void 0&&e(!!o),xi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){let e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=uD(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return Mw()||Sw()||Df()}},Qw=Cf;var pw="@firebase/auth",gw="1.7.9";var Tf=class{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}getToken(t){return T(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(t)}:null})}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;let e=this.auth.onIdTokenChanged(n=>{t(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();let e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function OD(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ND(i){Bt(new ut("auth",(t,{options:e})=>{let n=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=n.options;K(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});let l={apiKey:o,authDomain:c,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ow(i)},u=new ff(n,r,s,l);return Ik(u,e),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider("auth-internal").initialize()})),Bt(new ut("auth-internal",t=>{let e=ar(t.getProvider("auth").getImmediate());return(n=>new Tf(n))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ie(pw,gw,OD(i)),Ie(pw,gw,"esm2017")}var FD=5*60,LD=Vm("authIdTokenMaxAge")||FD,_w=null,VD=i=>t=>T(void 0,null,function*(){let e=t&&(yield t.getIdTokenResult()),n=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(n&&n>LD)return;let r=e?.token;_w!==r&&(_w=r,yield fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function Uf(i=$i()){let t=zi(i,"auth");if(t.isInitialized())return t.getImmediate();let e=Pf(i,{popupRedirectResolver:Qw,persistence:[Gw,zw,jf]}),n=Vm("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(n,location.origin);if(location.origin===s.origin){let o=VD(s.toString());Lf(e,o,()=>o(e.currentUser)),xa(e,c=>o(c))}}let r=Fm("auth");return r&&Mf(e,`http://${r}`),e}function jD(){var i,t;return(t=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&t!==void 0?t:document}_k({loadJS(i){return new Promise((t,e)=>{let n=document.createElement("script");n.setAttribute("src",i),n.onload=t,n.onerror=r=>{let s=rr("internal-error");s.customData=r,e(s)},n.type="text/javascript",n.charset="UTF-8",jD().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ND("Browser");function Zw(i){return new $t(function(t){var e=xa(i,t.next.bind(t),t.error.bind(t),t.complete.bind(t));return{unsubscribe:e}})}var Jw="auth",cr=class{constructor(t){return t}},lr=class{constructor(){return nr(Jw)}};var Bf=new U("angularfire2.auth-instances");function SP(i,t){let e=bs(Jw,i,t);return e&&new cr(e)}function AP(i){return(t,e)=>{let n=t.runOutsideAngular(()=>i(e));return new cr(n)}}var RP={provide:lr,deps:[[new De,Bf]]},kP={provide:cr,useFactory:SP,deps:[[new De,Bf],ai]};function e0(i,...t){return Ie("angularfire",qi.full,"auth"),gt([kP,RP,{provide:Bf,useFactory:AP(i),multi:!0,deps:[q,$e,In,Wi,[new De,wn],...t]}])}var t0=wt(Zw,!0);var i0=wt(Nf,!0);var n0=wt(Uf,!0);var r0=wt(Ff,!0);var s0=wt(Vf,!0);var o0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},a0={};var zf,c0;(function(){var i;function t(I,g){function b(){}b.prototype=g.prototype,I.D=g.prototype,I.prototype=new b,I.prototype.constructor=I,I.C=function(y,w,C){for(var v=Array(arguments.length-2),Di=2;Di<arguments.length;Di++)v[Di-2]=arguments[Di];return g.prototype[w].apply(y,v)}}function e(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,e),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,g,b){b||(b=0);var y=Array(16);if(typeof g=="string")for(var w=0;16>w;++w)y[w]=g.charCodeAt(b++)|g.charCodeAt(b++)<<8|g.charCodeAt(b++)<<16|g.charCodeAt(b++)<<24;else for(w=0;16>w;++w)y[w]=g[b++]|g[b++]<<8|g[b++]<<16|g[b++]<<24;g=I.g[0],b=I.g[1],w=I.g[2];var C=I.g[3],v=g+(C^b&(w^C))+y[0]+3614090360&4294967295;g=b+(v<<7&4294967295|v>>>25),v=C+(w^g&(b^w))+y[1]+3905402710&4294967295,C=g+(v<<12&4294967295|v>>>20),v=w+(b^C&(g^b))+y[2]+606105819&4294967295,w=C+(v<<17&4294967295|v>>>15),v=b+(g^w&(C^g))+y[3]+3250441966&4294967295,b=w+(v<<22&4294967295|v>>>10),v=g+(C^b&(w^C))+y[4]+4118548399&4294967295,g=b+(v<<7&4294967295|v>>>25),v=C+(w^g&(b^w))+y[5]+1200080426&4294967295,C=g+(v<<12&4294967295|v>>>20),v=w+(b^C&(g^b))+y[6]+2821735955&4294967295,w=C+(v<<17&4294967295|v>>>15),v=b+(g^w&(C^g))+y[7]+4249261313&4294967295,b=w+(v<<22&4294967295|v>>>10),v=g+(C^b&(w^C))+y[8]+1770035416&4294967295,g=b+(v<<7&4294967295|v>>>25),v=C+(w^g&(b^w))+y[9]+2336552879&4294967295,C=g+(v<<12&4294967295|v>>>20),v=w+(b^C&(g^b))+y[10]+4294925233&4294967295,w=C+(v<<17&4294967295|v>>>15),v=b+(g^w&(C^g))+y[11]+2304563134&4294967295,b=w+(v<<22&4294967295|v>>>10),v=g+(C^b&(w^C))+y[12]+1804603682&4294967295,g=b+(v<<7&4294967295|v>>>25),v=C+(w^g&(b^w))+y[13]+4254626195&4294967295,C=g+(v<<12&4294967295|v>>>20),v=w+(b^C&(g^b))+y[14]+2792965006&4294967295,w=C+(v<<17&4294967295|v>>>15),v=b+(g^w&(C^g))+y[15]+1236535329&4294967295,b=w+(v<<22&4294967295|v>>>10),v=g+(w^C&(b^w))+y[1]+4129170786&4294967295,g=b+(v<<5&4294967295|v>>>27),v=C+(b^w&(g^b))+y[6]+3225465664&4294967295,C=g+(v<<9&4294967295|v>>>23),v=w+(g^b&(C^g))+y[11]+643717713&4294967295,w=C+(v<<14&4294967295|v>>>18),v=b+(C^g&(w^C))+y[0]+3921069994&4294967295,b=w+(v<<20&4294967295|v>>>12),v=g+(w^C&(b^w))+y[5]+3593408605&4294967295,g=b+(v<<5&4294967295|v>>>27),v=C+(b^w&(g^b))+y[10]+38016083&4294967295,C=g+(v<<9&4294967295|v>>>23),v=w+(g^b&(C^g))+y[15]+3634488961&4294967295,w=C+(v<<14&4294967295|v>>>18),v=b+(C^g&(w^C))+y[4]+3889429448&4294967295,b=w+(v<<20&4294967295|v>>>12),v=g+(w^C&(b^w))+y[9]+568446438&4294967295,g=b+(v<<5&4294967295|v>>>27),v=C+(b^w&(g^b))+y[14]+3275163606&4294967295,C=g+(v<<9&4294967295|v>>>23),v=w+(g^b&(C^g))+y[3]+4107603335&4294967295,w=C+(v<<14&4294967295|v>>>18),v=b+(C^g&(w^C))+y[8]+1163531501&4294967295,b=w+(v<<20&4294967295|v>>>12),v=g+(w^C&(b^w))+y[13]+2850285829&4294967295,g=b+(v<<5&4294967295|v>>>27),v=C+(b^w&(g^b))+y[2]+4243563512&4294967295,C=g+(v<<9&4294967295|v>>>23),v=w+(g^b&(C^g))+y[7]+1735328473&4294967295,w=C+(v<<14&4294967295|v>>>18),v=b+(C^g&(w^C))+y[12]+2368359562&4294967295,b=w+(v<<20&4294967295|v>>>12),v=g+(b^w^C)+y[5]+4294588738&4294967295,g=b+(v<<4&4294967295|v>>>28),v=C+(g^b^w)+y[8]+2272392833&4294967295,C=g+(v<<11&4294967295|v>>>21),v=w+(C^g^b)+y[11]+1839030562&4294967295,w=C+(v<<16&4294967295|v>>>16),v=b+(w^C^g)+y[14]+4259657740&4294967295,b=w+(v<<23&4294967295|v>>>9),v=g+(b^w^C)+y[1]+2763975236&4294967295,g=b+(v<<4&4294967295|v>>>28),v=C+(g^b^w)+y[4]+1272893353&4294967295,C=g+(v<<11&4294967295|v>>>21),v=w+(C^g^b)+y[7]+4139469664&4294967295,w=C+(v<<16&4294967295|v>>>16),v=b+(w^C^g)+y[10]+3200236656&4294967295,b=w+(v<<23&4294967295|v>>>9),v=g+(b^w^C)+y[13]+681279174&4294967295,g=b+(v<<4&4294967295|v>>>28),v=C+(g^b^w)+y[0]+3936430074&4294967295,C=g+(v<<11&4294967295|v>>>21),v=w+(C^g^b)+y[3]+3572445317&4294967295,w=C+(v<<16&4294967295|v>>>16),v=b+(w^C^g)+y[6]+76029189&4294967295,b=w+(v<<23&4294967295|v>>>9),v=g+(b^w^C)+y[9]+3654602809&4294967295,g=b+(v<<4&4294967295|v>>>28),v=C+(g^b^w)+y[12]+3873151461&4294967295,C=g+(v<<11&4294967295|v>>>21),v=w+(C^g^b)+y[15]+530742520&4294967295,w=C+(v<<16&4294967295|v>>>16),v=b+(w^C^g)+y[2]+3299628645&4294967295,b=w+(v<<23&4294967295|v>>>9),v=g+(w^(b|~C))+y[0]+4096336452&4294967295,g=b+(v<<6&4294967295|v>>>26),v=C+(b^(g|~w))+y[7]+1126891415&4294967295,C=g+(v<<10&4294967295|v>>>22),v=w+(g^(C|~b))+y[14]+2878612391&4294967295,w=C+(v<<15&4294967295|v>>>17),v=b+(C^(w|~g))+y[5]+4237533241&4294967295,b=w+(v<<21&4294967295|v>>>11),v=g+(w^(b|~C))+y[12]+1700485571&4294967295,g=b+(v<<6&4294967295|v>>>26),v=C+(b^(g|~w))+y[3]+2399980690&4294967295,C=g+(v<<10&4294967295|v>>>22),v=w+(g^(C|~b))+y[10]+4293915773&4294967295,w=C+(v<<15&4294967295|v>>>17),v=b+(C^(w|~g))+y[1]+2240044497&4294967295,b=w+(v<<21&4294967295|v>>>11),v=g+(w^(b|~C))+y[8]+1873313359&4294967295,g=b+(v<<6&4294967295|v>>>26),v=C+(b^(g|~w))+y[15]+4264355552&4294967295,C=g+(v<<10&4294967295|v>>>22),v=w+(g^(C|~b))+y[6]+2734768916&4294967295,w=C+(v<<15&4294967295|v>>>17),v=b+(C^(w|~g))+y[13]+1309151649&4294967295,b=w+(v<<21&4294967295|v>>>11),v=g+(w^(b|~C))+y[4]+4149444226&4294967295,g=b+(v<<6&4294967295|v>>>26),v=C+(b^(g|~w))+y[11]+3174756917&4294967295,C=g+(v<<10&4294967295|v>>>22),v=w+(g^(C|~b))+y[2]+718787259&4294967295,w=C+(v<<15&4294967295|v>>>17),v=b+(C^(w|~g))+y[9]+3951481745&4294967295,I.g[0]=I.g[0]+g&4294967295,I.g[1]=I.g[1]+(w+(v<<21&4294967295|v>>>11))&4294967295,I.g[2]=I.g[2]+w&4294967295,I.g[3]=I.g[3]+C&4294967295}n.prototype.u=function(I,g){g===void 0&&(g=I.length);for(var b=g-this.blockSize,y=this.B,w=this.h,C=0;C<g;){if(w==0)for(;C<=b;)r(this,I,C),C+=this.blockSize;if(typeof I=="string"){for(;C<g;)if(y[w++]=I.charCodeAt(C++),w==this.blockSize){r(this,y),w=0;break}}else for(;C<g;)if(y[w++]=I[C++],w==this.blockSize){r(this,y),w=0;break}}this.h=w,this.o+=g},n.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var g=1;g<I.length-8;++g)I[g]=0;var b=8*this.o;for(g=I.length-8;g<I.length;++g)I[g]=b&255,b/=256;for(this.u(I),I=Array(16),g=b=0;4>g;++g)for(var y=0;32>y;y+=8)I[b++]=this.g[g]>>>y&255;return I};function s(I,g){var b=c;return Object.prototype.hasOwnProperty.call(b,I)?b[I]:b[I]=g(I)}function o(I,g){this.h=g;for(var b=[],y=!0,w=I.length-1;0<=w;w--){var C=I[w]|0;y&&C==g||(b[w]=C,y=!1)}this.g=b}var c={};function l(I){return-128<=I&&128>I?s(I,function(g){return new o([g|0],0>g?-1:0)}):new o([I|0],0>I?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return F(u(-I));for(var g=[],b=1,y=0;I>=b;y++)g[y]=I/b|0,b*=4294967296;return new o(g,0)}function m(I,g){if(I.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(I.charAt(0)=="-")return F(m(I.substring(1),g));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=u(Math.pow(g,8)),y=p,w=0;w<I.length;w+=8){var C=Math.min(8,I.length-w),v=parseInt(I.substring(w,w+C),g);8>C?(C=u(Math.pow(g,C)),y=y.j(C).add(u(v))):(y=y.j(b),y=y.add(u(v)))}return y}var p=l(0),_=l(1),S=l(16777216);i=o.prototype,i.m=function(){if(k(this))return-F(this).m();for(var I=0,g=1,b=0;b<this.g.length;b++){var y=this.i(b);I+=(0<=y?y:4294967296+y)*g,g*=4294967296}return I},i.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(A(this))return"0";if(k(this))return"-"+F(this).toString(I);for(var g=u(Math.pow(I,6)),b=this,y="";;){var w=We(b,g).g;b=ce(b,w.j(g));var C=((0<b.g.length?b.g[0]:b.h)>>>0).toString(I);if(b=w,A(b))return C+y;for(;6>C.length;)C="0"+C;y=C+y}},i.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function A(I){if(I.h!=0)return!1;for(var g=0;g<I.g.length;g++)if(I.g[g]!=0)return!1;return!0}function k(I){return I.h==-1}i.l=function(I){return I=ce(this,I),k(I)?-1:A(I)?0:1};function F(I){for(var g=I.g.length,b=[],y=0;y<g;y++)b[y]=~I.g[y];return new o(b,~I.h).add(_)}i.abs=function(){return k(this)?F(this):this},i.add=function(I){for(var g=Math.max(this.g.length,I.g.length),b=[],y=0,w=0;w<=g;w++){var C=y+(this.i(w)&65535)+(I.i(w)&65535),v=(C>>>16)+(this.i(w)>>>16)+(I.i(w)>>>16);y=v>>>16,C&=65535,v&=65535,b[w]=v<<16|C}return new o(b,b[b.length-1]&-2147483648?-1:0)};function ce(I,g){return I.add(F(g))}i.j=function(I){if(A(this)||A(I))return p;if(k(this))return k(I)?F(this).j(F(I)):F(F(this).j(I));if(k(I))return F(this.j(F(I)));if(0>this.l(S)&&0>I.l(S))return u(this.m()*I.m());for(var g=this.g.length+I.g.length,b=[],y=0;y<2*g;y++)b[y]=0;for(y=0;y<this.g.length;y++)for(var w=0;w<I.g.length;w++){var C=this.i(y)>>>16,v=this.i(y)&65535,Di=I.i(w)>>>16,io=I.i(w)&65535;b[2*y+2*w]+=v*io,pe(b,2*y+2*w),b[2*y+2*w+1]+=C*io,pe(b,2*y+2*w+1),b[2*y+2*w+1]+=v*Di,pe(b,2*y+2*w+1),b[2*y+2*w+2]+=C*Di,pe(b,2*y+2*w+2)}for(y=0;y<g;y++)b[y]=b[2*y+1]<<16|b[2*y];for(y=g;y<2*g;y++)b[y]=0;return new o(b,0)};function pe(I,g){for(;(I[g]&65535)!=I[g];)I[g+1]+=I[g]>>>16,I[g]&=65535,g++}function Q(I,g){this.g=I,this.h=g}function We(I,g){if(A(g))throw Error("division by zero");if(A(I))return new Q(p,p);if(k(I))return g=We(F(I),g),new Q(F(g.g),F(g.h));if(k(g))return g=We(I,F(g)),new Q(F(g.g),g.h);if(30<I.g.length){if(k(I)||k(g))throw Error("slowDivide_ only works with positive integers.");for(var b=_,y=g;0>=y.l(I);)b=mt(b),y=mt(y);var w=Ve(b,1),C=Ve(y,1);for(y=Ve(y,2),b=Ve(b,2);!A(y);){var v=C.add(y);0>=v.l(I)&&(w=w.add(b),C=v),y=Ve(y,1),b=Ve(b,1)}return g=ce(I,w.j(g)),new Q(w,g)}for(w=p;0<=I.l(g);){for(b=Math.max(1,Math.floor(I.m()/g.m())),y=Math.ceil(Math.log(b)/Math.LN2),y=48>=y?1:Math.pow(2,y-48),C=u(b),v=C.j(g);k(v)||0<v.l(I);)b-=y,C=u(b),v=C.j(g);A(C)&&(C=_),w=w.add(C),I=ce(I,v)}return new Q(w,I)}i.A=function(I){return We(this,I).h},i.and=function(I){for(var g=Math.max(this.g.length,I.g.length),b=[],y=0;y<g;y++)b[y]=this.i(y)&I.i(y);return new o(b,this.h&I.h)},i.or=function(I){for(var g=Math.max(this.g.length,I.g.length),b=[],y=0;y<g;y++)b[y]=this.i(y)|I.i(y);return new o(b,this.h|I.h)},i.xor=function(I){for(var g=Math.max(this.g.length,I.g.length),b=[],y=0;y<g;y++)b[y]=this.i(y)^I.i(y);return new o(b,this.h^I.h)};function mt(I){for(var g=I.g.length+1,b=[],y=0;y<g;y++)b[y]=I.i(y)<<1|I.i(y-1)>>>31;return new o(b,I.h)}function Ve(I,g){var b=g>>5;g%=32;for(var y=I.g.length-b,w=[],C=0;C<y;C++)w[C]=0<g?I.i(C+b)>>>g|I.i(C+b+1)<<32-g:I.i(C+b);return new o(w,I.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,c0=a0.Md5=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=m,zf=a0.Integer=o}).apply(typeof o0<"u"?o0:typeof self<"u"?self:typeof window<"u"?window:{});var pd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qi={};var l0,PP,d0,u0,h0,m0,f0,p0,g0;(function(){var i,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,h){return a==Array.prototype||a==Object.prototype||(a[d]=h.value),a};function e(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof pd=="object"&&pd];for(var d=0;d<a.length;++d){var h=a[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var n=e(this);function r(a,d){if(d)e:{var h=n;a=a.split(".");for(var f=0;f<a.length-1;f++){var E=a[f];if(!(E in h))break e;h=h[E]}a=a[a.length-1],f=h[a],d=d(f),d!=f&&d!=null&&t(h,a,{configurable:!0,writable:!0,value:d})}}function s(a,d){a instanceof String&&(a+="");var h=0,f=!1,E={next:function(){if(!f&&h<a.length){var x=h++;return{value:d(x,a[x]),done:!1}}return f=!0,{done:!0,value:void 0}}};return E[Symbol.iterator]=function(){return E},E}r("Array.prototype.values",function(a){return a||function(){return s(this,function(d,h){return h})}});var o=o||{},c=this||self;function l(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function u(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function m(a,d,h){return a.call.apply(a.bind,arguments)}function p(a,d,h){if(!a)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var E=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(E,f),a.apply(d,E)}}return function(){return a.apply(d,arguments)}}function _(a,d,h){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:p,_.apply(null,arguments)}function S(a,d){var h=Array.prototype.slice.call(arguments,1);return function(){var f=h.slice();return f.push.apply(f,arguments),a.apply(this,f)}}function A(a,d){function h(){}h.prototype=d.prototype,a.aa=d.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(f,E,x){for(var V=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)V[Te-2]=arguments[Te];return d.prototype[E].apply(f,V)}}function k(a){let d=a.length;if(0<d){let h=Array(d);for(let f=0;f<d;f++)h[f]=a[f];return h}return[]}function F(a,d){for(let h=1;h<arguments.length;h++){let f=arguments[h];if(l(f)){let E=a.length||0,x=f.length||0;a.length=E+x;for(let V=0;V<x;V++)a[E+V]=f[V]}else a.push(f)}}class ce{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function pe(a){return/^[\s\xa0]*$/.test(a)}function Q(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function We(a){return We[" "](a),a}We[" "]=function(){};var mt=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function Ve(a,d,h){for(let f in a)d.call(h,a[f],f,a)}function I(a,d){for(let h in a)d.call(void 0,a[h],h,a)}function g(a){let d={};for(let h in a)d[h]=a[h];return d}let b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function y(a,d){let h,f;for(let E=1;E<arguments.length;E++){f=arguments[E];for(h in f)a[h]=f[h];for(let x=0;x<b.length;x++)h=b[x],Object.prototype.hasOwnProperty.call(f,h)&&(a[h]=f[h])}}function w(a){var d=1;a=a.split(":");let h=[];for(;0<d&&a.length;)h.push(a.shift()),d--;return a.length&&h.push(a.join(":")),h}function C(a){c.setTimeout(()=>{throw a},0)}function v(){var a=Vu;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class Di{constructor(){this.h=this.g=null}add(d,h){let f=io.get();f.set(d,h),this.h?this.h.next=f:this.g=f,this.h=f}}var io=new ce(()=>new hT,a=>a.reset());class hT{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let no,ro=!1,Vu=new Di,S_=()=>{let a=c.Promise.resolve(void 0);no=()=>{a.then(mT)}};var mT=()=>{for(var a;a=v();){try{a.h.call(a.g)}catch(h){C(h)}var d=io;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}ro=!1};function rn(){this.s=this.s,this.C=this.C}rn.prototype.s=!1,rn.prototype.ma=function(){this.s||(this.s=!0,this.N())},rn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function nt(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}nt.prototype.h=function(){this.defaultPrevented=!0};var fT=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};c.addEventListener("test",h,d),c.removeEventListener("test",h,d)}catch{}return a}();function so(a,d){if(nt.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,f=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(mt){e:{try{We(d.nodeName);var E=!0;break e}catch{}E=!1}E||(d=null)}}else h=="mouseover"?d=a.fromElement:h=="mouseout"&&(d=a.toElement);this.relatedTarget=d,f?(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:pT[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&so.aa.h.call(this)}}A(so,nt);var pT={2:"touch",3:"pen",4:"mouse"};so.prototype.h=function(){so.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var oo="closure_listenable_"+(1e6*Math.random()|0),gT=0;function _T(a,d,h,f,E){this.listener=a,this.proxy=null,this.src=d,this.type=h,this.capture=!!f,this.ha=E,this.key=++gT,this.da=this.fa=!1}function pc(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function gc(a){this.src=a,this.g={},this.h=0}gc.prototype.add=function(a,d,h,f,E){var x=a.toString();a=this.g[x],a||(a=this.g[x]=[],this.h++);var V=Uu(a,d,f,E);return-1<V?(d=a[V],h||(d.fa=!1)):(d=new _T(d,this.src,x,!!f,E),d.fa=h,a.push(d)),d};function ju(a,d){var h=d.type;if(h in a.g){var f=a.g[h],E=Array.prototype.indexOf.call(f,d,void 0),x;(x=0<=E)&&Array.prototype.splice.call(f,E,1),x&&(pc(d),a.g[h].length==0&&(delete a.g[h],a.h--))}}function Uu(a,d,h,f){for(var E=0;E<a.length;++E){var x=a[E];if(!x.da&&x.listener==d&&x.capture==!!h&&x.ha==f)return E}return-1}var Bu="closure_lm_"+(1e6*Math.random()|0),zu={};function A_(a,d,h,f,E){if(f&&f.once)return k_(a,d,h,f,E);if(Array.isArray(d)){for(var x=0;x<d.length;x++)A_(a,d[x],h,f,E);return null}return h=Hu(h),a&&a[oo]?a.K(d,h,u(f)?!!f.capture:!!f,E):R_(a,d,h,!1,f,E)}function R_(a,d,h,f,E,x){if(!d)throw Error("Invalid event type");var V=u(E)?!!E.capture:!!E,Te=qu(a);if(Te||(a[Bu]=Te=new gc(a)),h=Te.add(d,h,f,V,x),h.proxy)return h;if(f=vT(),h.proxy=f,f.src=a,f.listener=h,a.addEventListener)fT||(E=V),E===void 0&&(E=!1),a.addEventListener(d.toString(),f,E);else if(a.attachEvent)a.attachEvent(P_(d.toString()),f);else if(a.addListener&&a.removeListener)a.addListener(f);else throw Error("addEventListener and attachEvent are unavailable.");return h}function vT(){function a(h){return d.call(a.src,a.listener,h)}let d=bT;return a}function k_(a,d,h,f,E){if(Array.isArray(d)){for(var x=0;x<d.length;x++)k_(a,d[x],h,f,E);return null}return h=Hu(h),a&&a[oo]?a.L(d,h,u(f)?!!f.capture:!!f,E):R_(a,d,h,!0,f,E)}function D_(a,d,h,f,E){if(Array.isArray(d))for(var x=0;x<d.length;x++)D_(a,d[x],h,f,E);else f=u(f)?!!f.capture:!!f,h=Hu(h),a&&a[oo]?(a=a.i,d=String(d).toString(),d in a.g&&(x=a.g[d],h=Uu(x,h,f,E),-1<h&&(pc(x[h]),Array.prototype.splice.call(x,h,1),x.length==0&&(delete a.g[d],a.h--)))):a&&(a=qu(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Uu(d,h,f,E)),(h=-1<a?d[a]:null)&&$u(h))}function $u(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[oo])ju(d.i,a);else{var h=a.type,f=a.proxy;d.removeEventListener?d.removeEventListener(h,f,a.capture):d.detachEvent?d.detachEvent(P_(h),f):d.addListener&&d.removeListener&&d.removeListener(f),(h=qu(d))?(ju(h,a),h.h==0&&(h.src=null,d[Bu]=null)):pc(a)}}}function P_(a){return a in zu?zu[a]:zu[a]="on"+a}function bT(a,d){if(a.da)a=!0;else{d=new so(d,this);var h=a.listener,f=a.ha||a.src;a.fa&&$u(a),a=h.call(f,d)}return a}function qu(a){return a=a[Bu],a instanceof gc?a:null}var Wu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hu(a){return typeof a=="function"?a:(a[Wu]||(a[Wu]=function(d){return a.handleEvent(d)}),a[Wu])}function rt(){rn.call(this),this.i=new gc(this),this.M=this,this.F=null}A(rt,rn),rt.prototype[oo]=!0,rt.prototype.removeEventListener=function(a,d,h,f){D_(this,a,d,h,f)};function ft(a,d){var h,f=a.F;if(f)for(h=[];f;f=f.F)h.push(f);if(a=a.M,f=d.type||d,typeof d=="string")d=new nt(d,a);else if(d instanceof nt)d.target=d.target||a;else{var E=d;d=new nt(f,a),y(d,E)}if(E=!0,h)for(var x=h.length-1;0<=x;x--){var V=d.g=h[x];E=_c(V,f,!0,d)&&E}if(V=d.g=a,E=_c(V,f,!0,d)&&E,E=_c(V,f,!1,d)&&E,h)for(x=0;x<h.length;x++)V=d.g=h[x],E=_c(V,f,!1,d)&&E}rt.prototype.N=function(){if(rt.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var h=a.g[d],f=0;f<h.length;f++)pc(h[f]);delete a.g[d],a.h--}}this.F=null},rt.prototype.K=function(a,d,h,f){return this.i.add(String(a),d,!1,h,f)},rt.prototype.L=function(a,d,h,f){return this.i.add(String(a),d,!0,h,f)};function _c(a,d,h,f){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var E=!0,x=0;x<d.length;++x){var V=d[x];if(V&&!V.da&&V.capture==h){var Te=V.listener,Qe=V.ha||V.src;V.fa&&ju(a.i,V),E=Te.call(Qe,f)!==!1&&E}}return E&&!f.defaultPrevented}function M_(a,d,h){if(typeof a=="function")h&&(a=_(a,h));else if(a&&typeof a.handleEvent=="function")a=_(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(a,d||0)}function O_(a){a.g=M_(()=>{a.g=null,a.i&&(a.i=!1,O_(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class yT extends rn{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:O_(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ao(a){rn.call(this),this.h=a,this.g={}}A(ao,rn);var N_=[];function F_(a){Ve(a.g,function(d,h){this.g.hasOwnProperty(h)&&$u(d)},a),a.g={}}ao.prototype.N=function(){ao.aa.N.call(this),F_(this)},ao.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gu=c.JSON.stringify,wT=c.JSON.parse,IT=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Ku(){}Ku.prototype.h=null;function L_(a){return a.h||(a.h=a.i())}function V_(){}var co={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Qu(){nt.call(this,"d")}A(Qu,nt);function Yu(){nt.call(this,"c")}A(Yu,nt);var Ln={},j_=null;function vc(){return j_=j_||new rt}Ln.La="serverreachability";function U_(a){nt.call(this,Ln.La,a)}A(U_,nt);function lo(a){let d=vc();ft(d,new U_(d))}Ln.STAT_EVENT="statevent";function B_(a,d){nt.call(this,Ln.STAT_EVENT,a),this.stat=d}A(B_,nt);function pt(a){let d=vc();ft(d,new B_(d,a))}Ln.Ma="timingevent";function z_(a,d){nt.call(this,Ln.Ma,a),this.size=d}A(z_,nt);function uo(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},d)}function ho(){this.g=!0}ho.prototype.xa=function(){this.g=!1};function ET(a,d,h,f,E,x){a.info(function(){if(a.g)if(x)for(var V="",Te=x.split("&"),Qe=0;Qe<Te.length;Qe++){var fe=Te[Qe].split("=");if(1<fe.length){var st=fe[0];fe=fe[1];var ot=st.split("_");V=2<=ot.length&&ot[1]=="type"?V+(st+"="+fe+"&"):V+(st+"=redacted&")}}else V=null;else V=x;return"XMLHTTP REQ ("+f+") [attempt "+E+"]: "+d+`
`+h+`
`+V})}function CT(a,d,h,f,E,x,V){a.info(function(){return"XMLHTTP RESP ("+f+") [ attempt "+E+"]: "+d+`
`+h+`
`+x+" "+V})}function Pr(a,d,h,f){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+xT(a,h)+(f?" "+f:"")})}function TT(a,d){a.info(function(){return"TIMEOUT: "+d})}ho.prototype.info=function(){};function xT(a,d){if(!a.g)return d;if(!d)return null;try{var h=JSON.parse(d);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var f=h[a];if(!(2>f.length)){var E=f[1];if(Array.isArray(E)&&!(1>E.length)){var x=E[0];if(x!="noop"&&x!="stop"&&x!="close")for(var V=1;V<E.length;V++)E[V]=""}}}}return Gu(h)}catch{return d}}var bc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},$_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Xu;function yc(){}A(yc,Ku),yc.prototype.g=function(){return new XMLHttpRequest},yc.prototype.i=function(){return{}},Xu=new yc;function sn(a,d,h,f){this.j=a,this.i=d,this.l=h,this.R=f||1,this.U=new ao(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new q_}function q_(){this.i=null,this.g="",this.h=!1}var W_={},Zu={};function Ju(a,d,h){a.L=1,a.v=Cc(Pi(d)),a.m=h,a.P=!0,H_(a,null)}function H_(a,d){a.F=Date.now(),wc(a),a.A=Pi(a.v);var h=a.A,f=a.R;Array.isArray(f)||(f=[String(f)]),ov(h.i,"t",f),a.C=0,h=a.j.J,a.h=new q_,a.g=Cv(a.j,h?d:null,!a.m),0<a.O&&(a.M=new yT(_(a.Y,a,a.g),a.O)),d=a.U,h=a.g,f=a.ca;var E="readystatechange";Array.isArray(E)||(E&&(N_[0]=E.toString()),E=N_);for(var x=0;x<E.length;x++){var V=A_(h,E[x],f||d.handleEvent,!1,d.h||d);if(!V)break;d.g[V.key]=V}d=a.H?g(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),lo(),ET(a.i,a.u,a.A,a.l,a.R,a.m)}sn.prototype.ca=function(a){a=a.target;let d=this.M;d&&Mi(a)==3?d.j():this.Y(a)},sn.prototype.Y=function(a){try{if(a==this.g)e:{let ot=Mi(this.g);var d=this.g.Ba();let Nr=this.g.Z();if(!(3>ot)&&(ot!=3||this.g&&(this.h.h||this.g.oa()||mv(this.g)))){this.J||ot!=4||d==7||(d==8||0>=Nr?lo(3):lo(2)),eh(this);var h=this.g.Z();this.X=h;t:if(G_(this)){var f=mv(this.g);a="";var E=f.length,x=Mi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vn(this),mo(this);var V="";break t}this.h.i=new c.TextDecoder}for(d=0;d<E;d++)this.h.h=!0,a+=this.h.i.decode(f[d],{stream:!(x&&d==E-1)});f.length=0,this.h.g+=a,this.C=0,V=this.h.g}else V=this.g.oa();if(this.o=h==200,CT(this.i,this.u,this.A,this.l,this.R,ot,h),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,Qe=this.g;if((Te=Qe.g?Qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pe(Te)){var fe=Te;break t}}fe=null}if(h=fe)Pr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,th(this,h);else{this.o=!1,this.s=3,pt(12),Vn(this),mo(this);break e}}if(this.P){h=!0;let ii;for(;!this.J&&this.C<V.length;)if(ii=ST(this,V),ii==Zu){ot==4&&(this.s=4,pt(14),h=!1),Pr(this.i,this.l,null,"[Incomplete Response]");break}else if(ii==W_){this.s=4,pt(15),Pr(this.i,this.l,V,"[Invalid Chunk]"),h=!1;break}else Pr(this.i,this.l,ii,null),th(this,ii);if(G_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||V.length!=0||this.h.h||(this.s=1,pt(16),h=!1),this.o=this.o&&h,!h)Pr(this.i,this.l,V,"[Invalid Chunked Response]"),Vn(this),mo(this);else if(0<V.length&&!this.W){this.W=!0;var st=this.j;st.g==this&&st.ba&&!st.M&&(st.j.info("Great, no buffering proxy detected. Bytes received: "+V.length),ah(st),st.M=!0,pt(11))}}else Pr(this.i,this.l,V,null),th(this,V);ot==4&&Vn(this),this.o&&!this.J&&(ot==4?yv(this.j,this):(this.o=!1,wc(this)))}else qT(this.g),h==400&&0<V.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),Vn(this),mo(this)}}}catch{}finally{}};function G_(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function ST(a,d){var h=a.C,f=d.indexOf(`
`,h);return f==-1?Zu:(h=Number(d.substring(h,f)),isNaN(h)?W_:(f+=1,f+h>d.length?Zu:(d=d.slice(f,f+h),a.C=f+h,d)))}sn.prototype.cancel=function(){this.J=!0,Vn(this)};function wc(a){a.S=Date.now()+a.I,K_(a,a.I)}function K_(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=uo(_(a.ba,a),d)}function eh(a){a.B&&(c.clearTimeout(a.B),a.B=null)}sn.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(TT(this.i,this.A),this.L!=2&&(lo(),pt(17)),Vn(this),this.s=2,mo(this)):K_(this,this.S-a)};function mo(a){a.j.G==0||a.J||yv(a.j,a)}function Vn(a){eh(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,F_(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function th(a,d){try{var h=a.j;if(h.G!=0&&(h.g==a||ih(h.h,a))){if(!a.K&&ih(h.h,a)&&h.G==3){try{var f=h.Da.g.parse(d)}catch{f=null}if(Array.isArray(f)&&f.length==3){var E=f;if(E[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)Rc(h),Sc(h);else break e;oh(h),pt(18)}}else h.za=E[1],0<h.za-h.T&&37500>E[2]&&h.F&&h.v==0&&!h.C&&(h.C=uo(_(h.Za,h),6e3));if(1>=X_(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Un(h,11)}else if((a.K||h.g==a)&&Rc(h),!pe(d))for(E=h.Da.g.parse(d),d=0;d<E.length;d++){let fe=E[d];if(h.T=fe[0],fe=fe[1],h.G==2)if(fe[0]=="c"){h.K=fe[1],h.ia=fe[2];let st=fe[3];st!=null&&(h.la=st,h.j.info("VER="+h.la));let ot=fe[4];ot!=null&&(h.Aa=ot,h.j.info("SVER="+h.Aa));let Nr=fe[5];Nr!=null&&typeof Nr=="number"&&0<Nr&&(f=1.5*Nr,h.L=f,h.j.info("backChannelRequestTimeoutMs_="+f)),f=h;let ii=a.g;if(ii){let Dc=ii.g?ii.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Dc){var x=f.h;x.g||Dc.indexOf("spdy")==-1&&Dc.indexOf("quic")==-1&&Dc.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(nh(x,x.h),x.h=null))}if(f.D){let ch=ii.g?ii.g.getResponseHeader("X-HTTP-Session-Id"):null;ch&&(f.ya=ch,Se(f.I,f.D,ch))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),f=h;var V=a;if(f.qa=Ev(f,f.J?f.ia:null,f.W),V.K){Z_(f.h,V);var Te=V,Qe=f.L;Qe&&(Te.I=Qe),Te.B&&(eh(Te),wc(Te)),f.g=V}else vv(f);0<h.i.length&&Ac(h)}else fe[0]!="stop"&&fe[0]!="close"||Un(h,7);else h.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?Un(h,7):sh(h):fe[0]!="noop"&&h.l&&h.l.ta(fe),h.v=0)}}lo(4)}catch{}}var AT=class{constructor(a,d){this.g=a,this.map=d}};function Q_(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Y_(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function X_(a){return a.h?1:a.g?a.g.size:0}function ih(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function nh(a,d){a.g?a.g.add(d):a.h=d}function Z_(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Q_.prototype.cancel=function(){if(this.i=J_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function J_(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let h of a.g.values())d=d.concat(h.D);return d}return k(a.i)}function RT(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(l(a)){for(var d=[],h=a.length,f=0;f<h;f++)d.push(a[f]);return d}d=[],h=0;for(f in a)d[h++]=a[f];return d}function kT(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(l(a)||typeof a=="string"){var d=[];a=a.length;for(var h=0;h<a;h++)d.push(h);return d}d=[],h=0;for(let f in a)d[h++]=f;return d}}}function ev(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(l(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var h=kT(a),f=RT(a),E=f.length,x=0;x<E;x++)d.call(void 0,f[x],h&&h[x],a)}var tv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function DT(a,d){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var f=a[h].indexOf("="),E=null;if(0<=f){var x=a[h].substring(0,f);E=a[h].substring(f+1)}else x=a[h];d(x,E?decodeURIComponent(E.replace(/\+/g," ")):"")}}}function jn(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof jn){this.h=a.h,Ic(this,a.j),this.o=a.o,this.g=a.g,Ec(this,a.s),this.l=a.l;var d=a.i,h=new go;h.i=d.i,d.g&&(h.g=new Map(d.g),h.h=d.h),iv(this,h),this.m=a.m}else a&&(d=String(a).match(tv))?(this.h=!1,Ic(this,d[1]||"",!0),this.o=fo(d[2]||""),this.g=fo(d[3]||"",!0),Ec(this,d[4]),this.l=fo(d[5]||"",!0),iv(this,d[6]||"",!0),this.m=fo(d[7]||"")):(this.h=!1,this.i=new go(null,this.h))}jn.prototype.toString=function(){var a=[],d=this.j;d&&a.push(po(d,nv,!0),":");var h=this.g;return(h||d=="file")&&(a.push("//"),(d=this.o)&&a.push(po(d,nv,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(po(h,h.charAt(0)=="/"?OT:MT,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",po(h,FT)),a.join("")};function Pi(a){return new jn(a)}function Ic(a,d,h){a.j=h?fo(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Ec(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function iv(a,d,h){d instanceof go?(a.i=d,LT(a.i,a.h)):(h||(d=po(d,NT)),a.i=new go(d,a.h))}function Se(a,d,h){a.i.set(d,h)}function Cc(a){return Se(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function fo(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function po(a,d,h){return typeof a=="string"?(a=encodeURI(a).replace(d,PT),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function PT(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var nv=/[#\/\?@]/g,MT=/[#\?:]/g,OT=/[#\?]/g,NT=/[#\?@]/g,FT=/#/g;function go(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function on(a){a.g||(a.g=new Map,a.h=0,a.i&&DT(a.i,function(d,h){a.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}i=go.prototype,i.add=function(a,d){on(this),this.i=null,a=Mr(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(d),this.h+=1,this};function rv(a,d){on(a),d=Mr(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function sv(a,d){return on(a),d=Mr(a,d),a.g.has(d)}i.forEach=function(a,d){on(this),this.g.forEach(function(h,f){h.forEach(function(E){a.call(d,E,f,this)},this)},this)},i.na=function(){on(this);let a=Array.from(this.g.values()),d=Array.from(this.g.keys()),h=[];for(let f=0;f<d.length;f++){let E=a[f];for(let x=0;x<E.length;x++)h.push(d[f])}return h},i.V=function(a){on(this);let d=[];if(typeof a=="string")sv(this,a)&&(d=d.concat(this.g.get(Mr(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)d=d.concat(a[h])}return d},i.set=function(a,d){return on(this),this.i=null,a=Mr(this,a),sv(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},i.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function ov(a,d,h){rv(a,d),0<h.length&&(a.i=null,a.g.set(Mr(a,d),k(h)),a.h+=h.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(var h=0;h<d.length;h++){var f=d[h];let x=encodeURIComponent(String(f)),V=this.V(f);for(f=0;f<V.length;f++){var E=x;V[f]!==""&&(E+="="+encodeURIComponent(String(V[f]))),a.push(E)}}return this.i=a.join("&")};function Mr(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function LT(a,d){d&&!a.j&&(on(a),a.i=null,a.g.forEach(function(h,f){var E=f.toLowerCase();f!=E&&(rv(this,f),ov(this,E,h))},a)),a.j=d}function VT(a,d){let h=new ho;if(c.Image){let f=new Image;f.onload=S(an,h,"TestLoadImage: loaded",!0,d,f),f.onerror=S(an,h,"TestLoadImage: error",!1,d,f),f.onabort=S(an,h,"TestLoadImage: abort",!1,d,f),f.ontimeout=S(an,h,"TestLoadImage: timeout",!1,d,f),c.setTimeout(function(){f.ontimeout&&f.ontimeout()},1e4),f.src=a}else d(!1)}function jT(a,d){let h=new ho,f=new AbortController,E=setTimeout(()=>{f.abort(),an(h,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:f.signal}).then(x=>{clearTimeout(E),x.ok?an(h,"TestPingServer: ok",!0,d):an(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(E),an(h,"TestPingServer: error",!1,d)})}function an(a,d,h,f,E){try{E&&(E.onload=null,E.onerror=null,E.onabort=null,E.ontimeout=null),f(h)}catch{}}function UT(){this.g=new IT}function BT(a,d,h){let f=h||"";try{ev(a,function(E,x){let V=E;u(E)&&(V=Gu(E)),d.push(f+x+"="+encodeURIComponent(V))})}catch(E){throw d.push(f+"type="+encodeURIComponent("_badmap")),E}}function _o(a){this.l=a.Ub||null,this.j=a.eb||!1}A(_o,Ku),_o.prototype.g=function(){return new Tc(this.l,this.j)},_o.prototype.i=function(a){return function(){return a}}({});function Tc(a,d){rt.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Tc,rt),i=Tc.prototype,i.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,bo(this)},i.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vo(this)),this.readyState=0},i.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,bo(this)),this.g&&(this.readyState=3,bo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;av(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function av(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}i.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?vo(this):bo(this),this.readyState==3&&av(this)}},i.Ra=function(a){this.g&&(this.response=this.responseText=a,vo(this))},i.Qa=function(a){this.g&&(this.response=a,vo(this))},i.ga=function(){this.g&&vo(this)};function vo(a){a.readyState=4,a.l=null,a.j=null,a.v=null,bo(a)}i.setRequestHeader=function(a,d){this.u.append(a,d)},i.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=d.next();return a.join(`\r
`)};function bo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Tc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function cv(a){let d="";return Ve(a,function(h,f){d+=f,d+=":",d+=h,d+=`\r
`}),d}function rh(a,d,h){e:{for(f in h){var f=!1;break e}f=!0}f||(h=cv(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):Se(a,d,h))}function ke(a){rt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(ke,rt);var zT=/^https?$/i,$T=["POST","PUT"];i=ke.prototype,i.Ha=function(a){this.J=a},i.ea=function(a,d,h,f){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Xu.g(),this.v=this.o?L_(this.o):L_(Xu),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(x){lv(this,x);return}if(a=h||"",h=new Map(this.headers),f)if(Object.getPrototypeOf(f)===Object.prototype)for(var E in f)h.set(E,f[E]);else if(typeof f.keys=="function"&&typeof f.get=="function")for(let x of f.keys())h.set(x,f.get(x));else throw Error("Unknown input type for opt_headers: "+String(f));f=Array.from(h.keys()).find(x=>x.toLowerCase()=="content-type"),E=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call($T,d,void 0))||f||E||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,V]of h)this.g.setRequestHeader(x,V);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{hv(this),this.u=!0,this.g.send(a),this.u=!1}catch(x){lv(this,x)}};function lv(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,dv(a),xc(a)}function dv(a){a.A||(a.A=!0,ft(a,"complete"),ft(a,"error"))}i.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ft(this,"complete"),ft(this,"abort"),xc(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xc(this,!0)),ke.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?uv(this):this.bb())},i.bb=function(){uv(this)};function uv(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Mi(a)!=4||a.Z()!=2)){if(a.u&&Mi(a)==4)M_(a.Ea,0,a);else if(ft(a,"readystatechange"),Mi(a)==4){a.h=!1;try{let V=a.Z();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var f;if(f=V===0){var E=String(a.D).match(tv)[1]||null;!E&&c.self&&c.self.location&&(E=c.self.location.protocol.slice(0,-1)),f=!zT.test(E?E.toLowerCase():"")}h=f}if(h)ft(a,"complete"),ft(a,"success");else{a.m=6;try{var x=2<Mi(a)?a.g.statusText:""}catch{x=""}a.l=x+" ["+a.Z()+"]",dv(a)}}finally{xc(a)}}}}function xc(a,d){if(a.g){hv(a);let h=a.g,f=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||ft(a,"ready");try{h.onreadystatechange=f}catch{}}}function hv(a){a.I&&(c.clearTimeout(a.I),a.I=null)}i.isActive=function(){return!!this.g};function Mi(a){return a.g?a.g.readyState:0}i.Z=function(){try{return 2<Mi(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),wT(d)}};function mv(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function qT(a){let d={};a=(a.g&&2<=Mi(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let f=0;f<a.length;f++){if(pe(a[f]))continue;var h=w(a[f]);let E=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let x=d[E]||[];d[E]=x,x.push(h)}I(d,function(f){return f.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function yo(a,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||d}function fv(a){this.Aa=0,this.i=[],this.j=new ho,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=yo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=yo("baseRetryDelayMs",5e3,a),this.cb=yo("retryDelaySeedMs",1e4,a),this.Wa=yo("forwardChannelMaxRetries",2,a),this.wa=yo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Q_(a&&a.concurrentRequestLimit),this.Da=new UT,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=fv.prototype,i.la=8,i.G=1,i.connect=function(a,d,h,f){pt(0),this.W=a,this.H=d||{},h&&f!==void 0&&(this.H.OSID=h,this.H.OAID=f),this.F=this.X,this.I=Ev(this,null,this.W),Ac(this)};function sh(a){if(pv(a),a.G==3){var d=a.U++,h=Pi(a.I);if(Se(h,"SID",a.K),Se(h,"RID",d),Se(h,"TYPE","terminate"),wo(a,h),d=new sn(a,a.j,d),d.L=2,d.v=Cc(Pi(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=d.v,h=!0),h||(d.g=Cv(d.j,null),d.g.ea(d.v)),d.F=Date.now(),wc(d)}Iv(a)}function Sc(a){a.g&&(ah(a),a.g.cancel(),a.g=null)}function pv(a){Sc(a),a.u&&(c.clearTimeout(a.u),a.u=null),Rc(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Ac(a){if(!Y_(a.h)&&!a.s){a.s=!0;var d=a.Ga;no||S_(),ro||(no(),ro=!0),Vu.add(d,a),a.B=0}}function WT(a,d){return X_(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=uo(_(a.Ga,a,d),wv(a,a.B)),a.B++,!0)}i.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let E=new sn(this,this.j,a),x=this.o;if(this.S&&(x?(x=g(x),y(x,this.S)):x=this.S),this.m!==null||this.O||(E.H=x,x=null),this.P)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var f=this.i[h];if("__data__"in f.map&&(f=f.map.__data__,typeof f=="string")){f=f.length;break t}f=void 0}if(f===void 0)break;if(d+=f,4096<d){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=_v(this,E,d),h=Pi(this.I),Se(h,"RID",a),Se(h,"CVER",22),this.D&&Se(h,"X-HTTP-Session-Id",this.D),wo(this,h),x&&(this.O?d="headers="+encodeURIComponent(String(cv(x)))+"&"+d:this.m&&rh(h,this.m,x)),nh(this.h,E),this.Ua&&Se(h,"TYPE","init"),this.P?(Se(h,"$req",d),Se(h,"SID","null"),E.T=!0,Ju(E,h,null)):Ju(E,h,d),this.G=2}}else this.G==3&&(a?gv(this,a):this.i.length==0||Y_(this.h)||gv(this))};function gv(a,d){var h;d?h=d.l:h=a.U++;let f=Pi(a.I);Se(f,"SID",a.K),Se(f,"RID",h),Se(f,"AID",a.T),wo(a,f),a.m&&a.o&&rh(f,a.m,a.o),h=new sn(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),d&&(a.i=d.D.concat(a.i)),d=_v(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),nh(a.h,h),Ju(h,f,d)}function wo(a,d){a.H&&Ve(a.H,function(h,f){Se(d,f,h)}),a.l&&ev({},function(h,f){Se(d,f,h)})}function _v(a,d,h){h=Math.min(a.i.length,h);var f=a.l?_(a.l.Na,a.l,a):null;e:{var E=a.i;let x=-1;for(;;){let V=["count="+h];x==-1?0<h?(x=E[0].g,V.push("ofs="+x)):x=0:V.push("ofs="+x);let Te=!0;for(let Qe=0;Qe<h;Qe++){let fe=E[Qe].g,st=E[Qe].map;if(fe-=x,0>fe)x=Math.max(0,E[Qe].g-100),Te=!1;else try{BT(st,V,"req"+fe+"_")}catch{f&&f(st)}}if(Te){f=V.join("&");break e}}}return a=a.i.splice(0,h),d.D=a,f}function vv(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;no||S_(),ro||(no(),ro=!0),Vu.add(d,a),a.v=0}}function oh(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=uo(_(a.Fa,a),wv(a,a.v)),a.v++,!0)}i.Fa=function(){if(this.u=null,bv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=uo(_(this.ab,this),a)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),Sc(this),bv(this))};function ah(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function bv(a){a.g=new sn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=Pi(a.qa);Se(d,"RID","rpc"),Se(d,"SID",a.K),Se(d,"AID",a.T),Se(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Se(d,"TO",a.ja),Se(d,"TYPE","xmlhttp"),wo(a,d),a.m&&a.o&&rh(d,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=Cc(Pi(d)),h.m=null,h.P=!0,H_(h,a)}i.Za=function(){this.C!=null&&(this.C=null,Sc(this),oh(this),pt(19))};function Rc(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function yv(a,d){var h=null;if(a.g==d){Rc(a),ah(a),a.g=null;var f=2}else if(ih(a.h,d))h=d.D,Z_(a.h,d),f=1;else return;if(a.G!=0){if(d.o)if(f==1){h=d.m?d.m.length:0,d=Date.now()-d.F;var E=a.B;f=vc(),ft(f,new z_(f,h)),Ac(a)}else vv(a);else if(E=d.s,E==3||E==0&&0<d.X||!(f==1&&WT(a,d)||f==2&&oh(a)))switch(h&&0<h.length&&(d=a.h,d.i=d.i.concat(h)),E){case 1:Un(a,5);break;case 4:Un(a,10);break;case 3:Un(a,6);break;default:Un(a,2)}}}function wv(a,d){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*d}function Un(a,d){if(a.j.info("Error code "+d),d==2){var h=_(a.fb,a),f=a.Xa;let E=!f;f=new jn(f||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ic(f,"https"),Cc(f),E?VT(f.toString(),h):jT(f.toString(),h)}else pt(2);a.G=0,a.l&&a.l.sa(d),Iv(a),pv(a)}i.fb=function(a){a?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function Iv(a){if(a.G=0,a.ka=[],a.l){let d=J_(a.h);(d.length!=0||a.i.length!=0)&&(F(a.ka,d),F(a.ka,a.i),a.h.i.length=0,k(a.i),a.i.length=0),a.l.ra()}}function Ev(a,d,h){var f=h instanceof jn?Pi(h):new jn(h);if(f.g!="")d&&(f.g=d+"."+f.g),Ec(f,f.s);else{var E=c.location;f=E.protocol,d=d?d+"."+E.hostname:E.hostname,E=+E.port;var x=new jn(null);f&&Ic(x,f),d&&(x.g=d),E&&Ec(x,E),h&&(x.l=h),f=x}return h=a.D,d=a.ya,h&&d&&Se(f,h,d),Se(f,"VER",a.la),wo(a,f),f}function Cv(a,d,h){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new ke(new _o({eb:h})):new ke(a.pa),d.Ha(a.J),d}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tv(){}i=Tv.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function kc(){}kc.prototype.g=function(a,d){return new Mt(a,d)};function Mt(a,d){rt.call(this),this.g=new fv(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!pe(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!pe(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Or(this)}A(Mt,rt),Mt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Mt.prototype.close=function(){sh(this.g)},Mt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=Gu(a),a=h);d.i.push(new AT(d.Ya++,a)),d.G==3&&Ac(d)},Mt.prototype.N=function(){this.g.l=null,delete this.j,sh(this.g),delete this.g,Mt.aa.N.call(this)};function xv(a){Qu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let h in d){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}A(xv,Qu);function Sv(){Yu.call(this),this.status=1}A(Sv,Yu);function Or(a){this.g=a}A(Or,Tv),Or.prototype.ua=function(){ft(this.g,"a")},Or.prototype.ta=function(a){ft(this.g,new xv(a))},Or.prototype.sa=function(a){ft(this.g,new Sv)},Or.prototype.ra=function(){ft(this.g,"b")},kc.prototype.createWebChannel=kc.prototype.g,Mt.prototype.send=Mt.prototype.o,Mt.prototype.open=Mt.prototype.m,Mt.prototype.close=Mt.prototype.close,g0=Qi.createWebChannelTransport=function(){return new kc},p0=Qi.getStatEventTarget=function(){return vc()},f0=Qi.Event=Ln,m0=Qi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},bc.NO_ERROR=0,bc.TIMEOUT=8,bc.HTTP_ERROR=6,h0=Qi.ErrorCode=bc,$_.COMPLETE="complete",u0=Qi.EventType=$_,V_.EventType=co,co.OPEN="a",co.CLOSE="b",co.ERROR="c",co.MESSAGE="d",rt.prototype.listen=rt.prototype.K,d0=Qi.WebChannel=V_,PP=Qi.FetchXmlHttpFactory=_o,ke.prototype.listenOnce=ke.prototype.L,ke.prototype.getLastError=ke.prototype.Ka,ke.prototype.getLastErrorCode=ke.prototype.Ba,ke.prototype.getStatus=ke.prototype.Z,ke.prototype.getResponseJson=ke.prototype.Oa,ke.prototype.getResponseText=ke.prototype.oa,ke.prototype.send=ke.prototype.ea,ke.prototype.setWithCredentials=ke.prototype.Ha,l0=Qi.XhrIo=ke}).apply(typeof pd<"u"?pd:typeof self<"u"?self:typeof window<"u"?window:{});var _0="@firebase/firestore";var et=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};et.UNAUTHENTICATED=new et(null),et.GOOGLE_CREDENTIALS=new et("google-credentials-uid"),et.FIRST_PARTY=new et("first-party-uid"),et.MOCK_USER=new et("mock-user");var Aa="10.14.0";var Es=new Yt("@firebase/firestore");function ci(i,...t){if(Es.logLevel<=de.DEBUG){let e=t.map(rp);Es.debug(`Firestore (${Aa}): ${i}`,...e)}}function I0(i,...t){if(Es.logLevel<=de.ERROR){let e=t.map(rp);Es.error(`Firestore (${Aa}): ${i}`,...e)}}function MP(i,...t){if(Es.logLevel<=de.WARN){let e=t.map(rp);Es.warn(`Firestore (${Aa}): ${i}`,...e)}}function rp(i){if(typeof i=="string")return i;try{return function(e){return JSON.stringify(e)}(i)}catch{return i}}function At(i="Unexpected state"){let t=`FIRESTORE (${Aa}) INTERNAL ASSERTION FAILED: `+i;throw I0(t),new Error(t)}function dr(i,t){i||At()}var It={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},tt=class extends St{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ur=class{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}};var gd=class{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},qf=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(et.UNAUTHENTICATED))}shutdown(){}},Wf=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}},Hf=class{constructor(t){this.t=t,this.currentUser=et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){dr(this.o===void 0);let n=this.i,r=l=>this.i!==n?(n=this.i,e(l)):Promise.resolve(),s=new ur;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ur,t.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let l=s;t.enqueueRetryable(()=>T(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},c=l=>{ci("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(ci("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ur)}},0),o()}getToken(){let t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(n=>this.i!==t?(ci("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(dr(typeof n.accessToken=="string"),new gd(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let t=this.auth&&this.auth.getUid();return dr(t===null||typeof t=="string"),new et(t)}},Gf=class{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=et.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Kf=class{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new Gf(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(et.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Qf=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Yf=class{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){dr(this.o===void 0);let n=s=>{s.error!=null&&ci("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,ci("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>n(s))};let r=s=>{ci("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):ci("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(dr(typeof e.token=="string"),this.R=e.token,new Qf(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function E0(i,t){return i<t?-1:i>t?1:0}var Xf=class i{constructor(t,e,n){e===void 0?e=0:e>t.length&&At(),n===void 0?n=t.length-e:n>t.length-e&&At(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return i.comparator(this,t)===0}child(t){let e=this.segments.slice(this.offset,this.limit());return t instanceof i?t.forEach(n=>{e.push(n)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){let n=Math.min(t.length,e.length);for(let r=0;r<n;r++){let s=t.get(r),o=e.get(r);if(s<o)return-1;if(s>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0}},Sn=class i extends Xf{construct(t,e,n){return new i(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let e=[];for(let n of t){if(n.indexOf("//")>=0)throw new tt(It.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter(r=>r.length>0))}return new i(e)}static emptyPath(){return new i([])}};var hr=class i{constructor(t){this.path=t}static fromPath(t){return new i(Sn.fromString(t))}static fromName(t){return new i(Sn.fromString(t).popFirst(5))}static empty(){return new i(Sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Sn.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Sn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new i(new Sn(t.slice()))}};var Zf=class{constructor(t,e,n,r){this.indexId=t,this.collectionGroup=e,this.fields=n,this.indexState=r}};Zf.UNKNOWN_ID=-1;function OP(i){return i.name==="IndexedDbTransactionError"}function NP(i){return i===0&&1/i==-1/0}var FP=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],vj=[...FP,"documentOverlays"],LP=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],VP=LP,jP=[...VP,"indexConfiguration","indexState","indexEntries"];var bj=[...jP,"globals"];var Cs=class i{constructor(t,e){this.comparator=t,this.root=e||Ai.EMPTY}insert(t,e){return new i(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Ai.BLACK,null,null))}remove(t){return new i(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ai.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){let n=this.comparator(t,e.key);if(n===0)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){let r=this.comparator(t,n.key);if(r===0)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,n)=>(t(e,n),!1))}toString(){let t=[];return this.inorderTraversal((e,n)=>(t.push(`${e}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Is(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Is(this.root,t,this.comparator,!1)}getReverseIterator(){return new Is(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Is(this.root,t,this.comparator,!0)}},Is=class{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?n(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},Ai=class i{constructor(t,e,n,r,s){this.key=t,this.value=e,this.color=n??i.RED,this.left=r??i.EMPTY,this.right=s??i.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,s){return new i(t??this.key,e??this.value,n??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this,s=n(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,n),null):s===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return i.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return i.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw At();let t=this.left.check();if(t!==this.right.check())throw At();return t+(this.isRed()?0:1)}};Ai.EMPTY=null,Ai.RED=!0,Ai.BLACK=!1;Ai.EMPTY=new class{constructor(){this.size=0}get key(){throw At()}get value(){throw At()}get color(){throw At()}get left(){throw At()}get right(){throw At()}copy(t,e,n,r,s){return this}insert(t,e,n){return new Ai(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var _d=class i{constructor(t){this.comparator=t,this.data=new Cs(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,n)=>(t(e),!1))}forEachInRange(t,e){let n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){let r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){let e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new vd(this.data.getIterator())}getIteratorFrom(t){return new vd(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(n=>{e=e.add(n)}),e}isEqual(t){if(!(t instanceof i)||this.size!==t.size)return!1;let e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){let r=e.getNext().key,s=n.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(e=>{t.push(e)}),t}toString(){let t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){let e=new i(this.comparator);return e.data=t,e}},vd=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Jf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ts=class i{constructor(t){this.binaryString=t}static fromBase64String(t){let e=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Jf("Invalid base64 string: "+s):s}}(t);return new i(e)}static fromUint8Array(t){let e=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(t);return new i(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return E0(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};Ts.EMPTY_BYTE_STRING=new Ts("");var UP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function BP(i){if(dr(!!i),typeof i=="string"){let t=0,e=UP.exec(i);if(dr(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}let n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:Sa(i.seconds),nanos:Sa(i.nanos)}}function Sa(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function zP(i){return typeof i=="string"?Ts.fromBase64String(i):Ts.fromUint8Array(i)}var ep=class i{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new i("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof i&&t.projectId===this.projectId&&t.database===this.database}};function $P(i){var t,e;return((e=(((t=i?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="__vector__"}function qP(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var wj=new Cs(hr.comparator);var Ij=new Cs(hr.comparator);var Ej=new Cs(hr.comparator),Cj=new _d(hr.comparator);var Tj=new _d(E0);var v0,ue;(ue=v0||(v0={}))[ue.OK=0]="OK",ue[ue.CANCELLED=1]="CANCELLED",ue[ue.UNKNOWN=2]="UNKNOWN",ue[ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue[ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue[ue.NOT_FOUND=5]="NOT_FOUND",ue[ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue[ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue[ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue[ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue[ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue[ue.ABORTED=10]="ABORTED",ue[ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue[ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue[ue.INTERNAL=13]="INTERNAL",ue[ue.UNAVAILABLE=14]="UNAVAILABLE",ue[ue.DATA_LOSS=15]="DATA_LOSS";var xj=new zf([4294967295,4294967295],0);var bd=class{constructor(){}It(t,e){this.Tt(t,e),e.Et()}Tt(t,e){if("nullValue"in t)this.dt(e,5);else if("booleanValue"in t)this.dt(e,10),e.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(e,15),e.At(Sa(t.integerValue));else if("doubleValue"in t){let n=Sa(t.doubleValue);isNaN(n)?this.dt(e,13):(this.dt(e,15),NP(n)?e.At(0):e.At(n))}else if("timestampValue"in t){let n=t.timestampValue;this.dt(e,20),typeof n=="string"&&(n=BP(n)),e.Rt(`${n.seconds||""}`),e.At(n.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,e),this.ft(e);else if("bytesValue"in t)this.dt(e,30),e.gt(zP(t.bytesValue)),this.ft(e);else if("referenceValue"in t)this.yt(t.referenceValue,e);else if("geoPointValue"in t){let n=t.geoPointValue;this.dt(e,45),e.At(n.latitude||0),e.At(n.longitude||0)}else"mapValue"in t?qP(t)?this.dt(e,Number.MAX_SAFE_INTEGER):$P(t)?this.wt(t.mapValue,e):(this.St(t.mapValue,e),this.ft(e)):"arrayValue"in t?(this.bt(t.arrayValue,e),this.ft(e)):At()}Vt(t,e){this.dt(e,25),this.Dt(t,e)}Dt(t,e){e.Rt(t)}St(t,e){let n=t.fields||{};this.dt(e,55);for(let r of Object.keys(n))this.Vt(r,e),this.Tt(n[r],e)}wt(t,e){var n,r;let s=t.fields||{};this.dt(e,53);let o="value",c=((r=(n=s[o].arrayValue)===null||n===void 0?void 0:n.values)===null||r===void 0?void 0:r.length)||0;this.dt(e,15),e.At(Sa(c)),this.Vt(o,e),this.Tt(s[o],e)}bt(t,e){let n=t.values||[];this.dt(e,50);for(let r of n)this.Tt(r,e)}yt(t,e){this.dt(e,37),hr.fromName(t).path.forEach(n=>{this.dt(e,60),this.Dt(n,e)})}dt(t,e){t.At(e)}ft(t){t.At(2)}};bd.vt=new bd;var Sj=new Uint8Array(0);var Si=class i{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new i(t,i.DEFAULT_COLLECTION_PERCENTILE,i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Si.DEFAULT_COLLECTION_PERCENTILE=10,Si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Si.DEFAULT=new Si(41943040,Si.DEFAULT_COLLECTION_PERCENTILE,Si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Si.DISABLED=new Si(-1,0,0);function $f(){return typeof document<"u"?document:null}var tp=class{constructor(t,e,n=1e3,r=1.5,s=6e4){this.ui=t,this.timerId=e,this.ko=n,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();let e=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,e-n);r>0&&ci("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var ip=class i{constructor(t,e,n,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,r,s){let o=Date.now()+n,c=new i(t,e,o,r,s);return c.start(n),c}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new tt(It.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};var b0,y0;(y0=b0||(b0={})).ea="default",y0.Cache="cache";function WP(i){let t={};return i.timeoutSeconds!==void 0&&(t.timeoutSeconds=i.timeoutSeconds),t}var w0=new Map;function HP(i,t,e,n){if(t===!0&&n===!0)throw new tt(It.INVALID_ARGUMENT,`${i} and ${e} cannot be used together.`)}function GP(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{let t=function(n){return n.constructor?n.constructor.name:null}(i);return t?`a custom ${t} object`:"an object"}}return typeof i=="function"?"a function":At()}function KP(i,t){if("_delegate"in i&&(i=i._delegate),!(i instanceof t)){if(t.name===i.constructor.name)throw new tt(It.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let e=GP(i);throw new tt(It.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return i}var yd=class{constructor(t){var e,n;if(t.host===void 0){if(t.ssl!==void 0)throw new tt(It.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new tt(It.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}HP("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WP((n=t.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new tt(It.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new tt(It.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new tt(It.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,r){return n.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},wd=class{constructor(t,e,n,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yd({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new tt(It.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new tt(It.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yd(t),t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new qf;switch(n.type){case"firstParty":return new Kf(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new tt(It.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return T(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let n=w0.get(e);n&&(ci("ComponentProvider","Removing Datastore"),w0.delete(e),n.terminate())}(this),Promise.resolve()}};function C0(i,t,e,n={}){var r;let s=(i=KP(i,wd))._getSettings(),o=`${t}:${e}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&MP("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),n.mockUserToken){let c,l;if(typeof n.mockUserToken=="string")c=n.mockUserToken,l=et.MOCK_USER;else{c=jl(n.mockUserToken,(r=i._app)===null||r===void 0?void 0:r.options.projectId);let u=n.mockUserToken.sub||n.mockUserToken.user_id;if(!u)throw new tt(It.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new et(u)}i._authCredentials=new Wf(new gd(c,l))}}var Id=class{constructor(t=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new tp(this,"async_queue_retry"),this.Vu=()=>{let n=$f();n&&ci("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=t;let e=$f();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;let e=$f();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise(()=>{});let e=new ur;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Pu.push(t),this.pu()))}pu(){return T(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(t){if(!OP(t))throw t;ci("AsyncQueue","Operation failed with retryable error: "+t)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(t){let e=this.mu.then(()=>(this.du=!0,t().catch(n=>{this.Eu=n,this.du=!1;let r=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(n);throw I0("INTERNAL UNHANDLED ERROR: ",r),n}).then(n=>(this.du=!1,n))));return this.mu=e,e}enqueueAfterDelay(t,e,n){this.fu(),this.Ru.indexOf(t)>-1&&(e=0);let r=ip.createAndSchedule(this,t,e,n,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&At()}verifyOperationInProgress(){}wu(){return T(this,null,function*(){let t;do t=this.mu,yield t;while(t!==this.mu)})}Su(t){for(let e of this.Tu)if(e.timerId===t)return!0;return!1}bu(t){return this.wu().then(()=>{this.Tu.sort((e,n)=>e.targetTimeMs-n.targetTimeMs);for(let e of this.Tu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.wu()})}Du(t){this.Ru.push(t)}yu(t){let e=this.Tu.indexOf(t);this.Tu.splice(e,1)}};var np=class extends wd{constructor(t,e,n,r){super(t,e,n,r),this.type="firestore",this._queue=new Id,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return T(this,null,function*(){if(this._firestoreClient){let t=this._firestoreClient.terminate();this._queue=new Id(t),this._firestoreClient=void 0,yield t}})}};function T0(i,t){let e=typeof i=="object"?i:$i(),n=typeof i=="string"?i:t||"(default)",r=zi(e,"firestore").getImmediate({identifier:n});if(!r._initialized){let s=Vl("firestore");s&&C0(r,...s)}return r}var Aj=new RegExp("[~\\*/\\[\\]]");(function(t,e=!0){(function(r){Aa=r})(zt),Bt(new ut("firestore",(n,{instanceIdentifier:r,options:s})=>{let o=n.getProvider("app").getImmediate(),c=new np(new Hf(n.getProvider("auth-internal")),new Yf(n.getProvider("app-check-internal")),function(u,m){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new tt(It.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ep(u.options.projectId,m)}(o,r),o);return s=Object.assign({useFetchStreams:e},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Ie(_0,"4.7.3",t),Ie(_0,"4.7.3","esm2017")})();var Ra=class{constructor(t){return t}},x0="firestore",sp=class{constructor(){return nr(x0)}};var op=new U("angularfire2.firestore-instances");function QP(i,t){let e=bs(x0,i,t);return e&&new Ra(e)}function YP(i){return(t,e)=>{let n=t.runOutsideAngular(()=>i(e));return new Ra(n)}}var XP={provide:sp,deps:[[new De,op]]},ZP={provide:Ra,useFactory:QP,deps:[[new De,op],ai]};function S0(i,...t){return Ie("angularfire",qi.full,"fst"),gt([ZP,XP,{provide:op,useFactory:YP(i),multi:!0,deps:[q,$e,In,Wi,[new De,lr],[new De,wn],...t]}])}var A0=wt(T0,!0);var ka={production:!0,firebaseConfig:{apiKey:"AIzaSyASrCAbLF3pYPWuNuhzyXcvJ1YrhTBnoBA",authDomain:"ziggurat-1a0d9.firebaseapp.com",projectId:"ziggurat-1a0d9",storageBucket:"ziggurat-1a0d9.firebasestorage.app",messagingSenderId:"759879840535",appId:"1:759879840535:web:d2252ada9d8b5a872abd52",databaseURL:"https://ziggurat-1a0d9-default-rtdb.firebaseio.com/"}};var R0="@firebase/database",k0="1.0.8";var ug="";function JP(i){ug=i}var fp=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){e==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),He(e))}get(t){let e=this.domStorage_.getItem(this.prefixedName_(t));return e==null?null:ls(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var pp=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){e==null?delete this.cache_[t]:this.cache_[t]=e}get(t){return Ut(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var lI=function(i){try{if(typeof window<"u"&&typeof window[i]<"u"){let t=window[i];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new fp(t)}}catch{}return new pp},fr=lI("localStorage"),gp=lI("sessionStorage");var As=new Yt("@firebase/database"),eM=function(){let i=1;return function(){return i++}}(),dI=function(i){let t=Ny(i),e=new Fl;e.update(t);let n=e.digest();return Ll.encodeByteArray(n)},Ga=function(...i){let t="";for(let e=0;e<i.length;e++){let n=i[e];Array.isArray(n)||n&&typeof n=="object"&&typeof n.length=="number"?t+=Ga.apply(null,n):typeof n=="object"?t+=He(n):t+=n,t+=" "}return t},gr=null,D0=!0,tM=function(i,t){L(!t||i===!0||i===!1,"Can't turn on custom loggers persistently."),i===!0?(As.logLevel=de.VERBOSE,gr=As.log.bind(As),t&&gp.set("logging_enabled",!0)):typeof i=="function"?gr=i:(gr=null,gp.remove("logging_enabled"))},ht=function(...i){if(D0===!0&&(D0=!1,gr===null&&gp.get("logging_enabled")===!0&&tM(!0)),gr){let t=Ga.apply(null,i);gr(t)}},Ka=function(i){return function(...t){ht(i,...t)}},_p=function(...i){let t="FIREBASE INTERNAL ERROR: "+Ga(...i);As.error(t)},Yi=function(...i){let t=`FIREBASE FATAL ERROR: ${Ga(...i)}`;throw As.error(t),new Error(t)},kt=function(...i){let t="FIREBASE WARNING: "+Ga(...i);As.warn(t)},iM=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&kt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},uI=function(i){return typeof i=="number"&&(i!==i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},nM=function(i){if(Ii()||document.readyState==="complete")i();else{let t=!1,e=function(){if(!document.body){setTimeout(e,Math.floor(10));return}t||(t=!0,i())};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&e()}),window.attachEvent("onload",e))}},Ds="[MIN_NAME]",_r="[MAX_NAME]",Vs=function(i,t){if(i===t)return 0;if(i===Ds||t===_r)return-1;if(t===Ds||i===_r)return 1;{let e=P0(i),n=P0(t);return e!==null?n!==null?e-n===0?i.length-t.length:e-n:-1:n!==null?1:i<t?-1:1}},rM=function(i,t){return i===t?0:i<t?-1:1},Da=function(i,t){if(t&&i in t)return t[i];throw new Error("Missing required key ("+i+") in object: "+He(t))},hg=function(i){if(typeof i!="object"||i===null)return He(i);let t=[];for(let n in i)t.push(n);t.sort();let e="{";for(let n=0;n<t.length;n++)n!==0&&(e+=","),e+=He(t[n]),e+=":",e+=hg(i[t[n]]);return e+="}",e},hI=function(i,t){let e=i.length;if(e<=t)return[i];let n=[];for(let r=0;r<e;r+=t)r+t>e?n.push(i.substring(r,e)):n.push(i.substring(r,r+t));return n};function Dt(i,t){for(let e in i)i.hasOwnProperty(e)&&t(e,i[e])}var mI=function(i){L(!uI(i),"Invalid JSON number");let t=11,e=52,n=(1<<t-1)-1,r,s,o,c,l;i===0?(s=0,o=0,r=1/i===-1/0?1:0):(r=i<0,i=Math.abs(i),i>=Math.pow(2,1-n)?(c=Math.min(Math.floor(Math.log(i)/Math.LN2),n),s=c+n,o=Math.round(i*Math.pow(2,e-c)-Math.pow(2,e))):(s=0,o=Math.round(i/Math.pow(2,1-n-e))));let u=[];for(l=e;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=t;l;l-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(r?1:0),u.reverse();let m=u.join(""),p="";for(l=0;l<64;l+=8){let _=parseInt(m.substr(l,8),2).toString(16);_.length===1&&(_="0"+_),p=p+_}return p.toLowerCase()},sM=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},oM=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function aM(i,t){let e="Unknown Error";i==="too_big"?e="The data requested exceeds the maximum size that can be accessed with a single request.":i==="permission_denied"?e="Client doesn't have permission to access the desired data.":i==="unavailable"&&(e="The service is unavailable");let n=new Error(i+" at "+t._path.toString()+": "+e);return n.code=i.toUpperCase(),n}var cM=new RegExp("^-?(0*)\\d{1,10}$"),lM=-2147483648,dM=2147483647,P0=function(i){if(cM.test(i)){let t=Number(i);if(t>=lM&&t<=dM)return t}return null},js=function(i){try{i()}catch(t){setTimeout(()=>{let e=t.stack||"";throw kt("Exception was thrown by user callback.",e),t},Math.floor(0))}},uM=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Fa=function(i,t){let e=setTimeout(i,t);return typeof e=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):typeof e=="object"&&e.unref&&e.unref(),e};var vp=class{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(n=>this.appCheck=n)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,n)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,n):e(null)},0)})}addTokenChangeListener(t){var e;(e=this.appCheckProvider)===null||e===void 0||e.get().then(n=>n.addTokenListener(t))}notifyForInvalidToken(){kt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var bp=class{constructor(t,e,n){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&e.code==="auth/token-not-initialized"?(ht("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,n)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,n):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',kt(t)}},La=(()=>{class i{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}i.OWNER="owner";return i})(),Cd="5",fI="v",pI="s",gI="r",_I="f",vI=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,bI="ls",yI="p",yp="ac",wI="websocket",II="long_polling";var Td=class{constructor(t,e,n,r,s=!1,o="",c=!1,l=!1){this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=l,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=fr.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&fr.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${e}`}};function hM(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams}function EI(i,t,e){L(typeof t=="string","typeof type must == string"),L(typeof e=="object","typeof params must == object");let n;if(t===wI)n=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else if(t===II)n=(i.secure?"https://":"http://")+i.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);hM(i)&&(e.ns=i.namespace);let r=[];return Dt(e,(s,o)=>{r.push(s+"="+o)}),n+r.join("&")}var wp=class{constructor(){this.counters_={}}incrementCounter(t,e=1){Ut(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return xy(this.counters_)}};var ap={},cp={};function mg(i){let t=i.toString();return ap[t]||(ap[t]=new wp),ap[t]}function mM(i,t){let e=i.toString();return cp[e]||(cp[e]=t()),cp[e]}var Ip=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){let n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<n.length;++r)n[r]&&js(()=>{this.onMessage_(n[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var M0="start",fM="close",pM="pLPCommand",gM="pRTLPCB",CI="id",TI="pw",xI="ser",_M="cb",vM="seg",bM="ts",yM="d",wM="dframe",SI=1870,AI=30,IM=SI-AI,EM=25e3,CM=3e4,Ep=class i{constructor(t,e,n,r,s,o,c){this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ka(t),this.stats_=mg(e),this.urlFn=l=>(this.appCheckToken&&(l[yp]=this.appCheckToken),EI(e,II,l))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Ip(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(CM)),nM(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Cp((...s)=>{let[o,c,l,u,m]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===M0)this.id=c,this.password=l;else if(o===fM)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,c]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,c)},()=>{this.onClosed_()},this.urlFn);let n={};n[M0]="t",n[xI]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(n[_M]=this.scriptTagHolder.uniqueCallbackIdentifier),n[fI]=Cd,this.transportSessionId&&(n[pI]=this.transportSessionId),this.lastSessionId&&(n[bI]=this.lastSessionId),this.applicationId&&(n[yI]=this.applicationId),this.appCheckToken&&(n[yp]=this.appCheckToken),typeof location<"u"&&location.hostname&&vI.test(location.hostname)&&(n[gI]=_I);let r=this.urlFn(n);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){i.forceAllow_=!0}static forceDisallow(){i.forceDisallow_=!0}static isAvailable(){return Ii()?!1:i.forceAllow_?!0:!i.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!sM()&&!oM()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let e=He(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);let n=Mm(e),r=hI(n,IM);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if(Ii())return;this.myDisconnFrame=document.createElement("iframe");let n={};n[wM]="t",n[CI]=t,n[TI]=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let e=He(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}},Cp=class i{constructor(t,e,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Ii())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=eM(),window[pM+this.uniqueCallbackIdentifier]=t,window[gM+this.uniqueCallbackIdentifier]=e,this.myIFrame=i.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(c){ht("frame writing exception"),c.stack&&ht(c.stack),ht(c)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||ht("No IE domain setting required")}catch{let n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[CI]=this.myID,t[TI]=this.myPW,t[xI]=this.currentSerial;let e=this.urlFn(t),n="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+AI+n.length<=SI;){let o=this.pendingSegs.shift();n=n+"&"+vM+r+"="+o.seg+"&"+bM+r+"="+o.ts+"&"+yM+r+"="+o.d,r++}return e=e+n,this.addLongPollTag_(e,this.currentSerial),!0}else return!1}enqueueSegment(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);let n=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(n,Math.floor(EM)),s=()=>{clearTimeout(r),n()};this.addTag(t,s)}addTag(t,e){Ii()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;let n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=t,n.onload=n.onreadystatechange=function(){let r=n.readyState;(!r||r==="loaded"||r==="complete")&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),e())},n.onerror=()=>{ht("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}};var TM=16384,xM=45e3,xd=null;typeof MozWebSocket<"u"?xd=MozWebSocket:typeof WebSocket<"u"&&(xd=WebSocket);var Pa=(()=>{class i{constructor(e,n,r,s,o,c,l){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ka(this.connId),this.stats_=mg(n),this.connURL=i.connectionURL_(n,c,l,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,o){let c={};return c[fI]=Cd,!Ii()&&typeof location<"u"&&location.hostname&&vI.test(location.hostname)&&(c[gI]=_I),n&&(c[pI]=n),r&&(c[bI]=r),s&&(c[yp]=s),o&&(c[yI]=o),EI(e,wI,c)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,fr.set("previous_websocket_failure",!0);try{let r;if(Ii()){let s=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":`Firebase/${Cd}/${ug}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,c=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;c&&(r.proxy={origin:c})}this.mySock=new xd(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){i.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){let n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&xd!==null&&!i.forceDisallow_}static previouslyFailed(){return fr.isInMemoryStorage||fr.get("previous_websocket_failure")===!0}markConnectionHealthy(){fr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){let n=this.frames.join("");this.frames=null;let r=ls(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(L(this.frames===null,"We already have a frame buffer"),e.length<=6){let n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;let n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{let r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();let n=He(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=hI(n,TM);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(xM))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}i.responsesRequiredToBeHealthy=2,i.healthyTimeout=3e4;return i})(),SM=(()=>{class i{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Ep,Pa]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){let n=Pa&&Pa.isAvailable(),r=n&&!Pa.previouslyFailed();if(e.webSocketOnly&&(n||kt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Pa];else{let s=this.transports_=[];for(let o of i.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);i.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}i.globalTransportInitialized_=!1;return i})(),AM=6e4,RM=5e3,kM=10*1024,DM=100*1024,lp="t",O0="d",PM="s",N0="r",MM="e",F0="o",L0="a",V0="n",j0="p",OM="h",Tp=class{constructor(t,e,n,r,s,o,c,l,u,m){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=c,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=m,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ka("c:"+this.id+":"),this.transportManager_=new SM(e),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let e=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,n)},Math.floor(0));let r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=Fa(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>DM?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>kM?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){let e={t:"d",d:t};this.sendData_(e)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(lp in t){let e=t[lp];e===L0?this.upgradeIfSecondaryHealthy_():e===N0?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):e===F0&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let e=Da("t",t),n=Da("d",t);if(e==="c")this.onSecondaryControl_(n);else if(e==="d")this.pendingDataMessages.push(n);else throw new Error("Unknown protocol layer: "+e)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:j0,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:L0,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:V0,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let e=Da("t",t),n=Da("d",t);e==="c"?this.onControl_(n):e==="d"&&this.onDataMessage_(n)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let e=Da(lp,t);if(O0 in t){let n=t[O0];if(e===OM){let r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(e===V0){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else e===PM?this.onConnectionShutdown_(n):e===N0?this.onReset_(n):e===MM?_p("Server Error: "+n):e===F0?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):_p("Unknown control packet command: "+e)}}onHandshake_(t){let e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),Cd!==n&&kt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let e=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,n),Fa(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(AM))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Fa(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(RM))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:j0,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(fr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Sd=class{put(t,e,n,r){}merge(t,e,n,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,n){}onDisconnectMerge(t,e,n){}onDisconnectCancel(t,e){}reportStats(t){}};var Ad=class{constructor(t){this.allowedEvents_=t,this.listeners_={},L(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){let n=[...this.listeners_[t]];for(let r=0;r<n.length;r++)n[r].callback.apply(n[r].context,e)}}on(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});let r=this.getInitialEvent(t);r&&e.apply(n,r)}off(t,e,n){this.validateEventType_(t);let r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===e&&(!n||n===r[s].context)){r.splice(s,1);return}}validateEventType_(t){L(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}};var Rd=class i extends Ad{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ua()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new i}getInitialEvent(t){return L(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var U0=32,B0=768,Ce=class{constructor(t,e){if(e===void 0){this.pieces_=t.split("/");let n=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)this.pieces_[e]!==""&&(t+="/"+this.pieces_[e]);return t||"/"}};function _e(){return new Ce("")}function ne(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function Rn(i){return i.pieces_.length-i.pieceNum_}function xe(i){let t=i.pieceNum_;return t<i.pieces_.length&&t++,new Ce(i.pieces_,t)}function RI(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function NM(i){let t="";for(let e=i.pieceNum_;e<i.pieces_.length;e++)i.pieces_[e]!==""&&(t+="/"+encodeURIComponent(String(i.pieces_[e])));return t||"/"}function kI(i,t=0){return i.pieces_.slice(i.pieceNum_+t)}function DI(i){if(i.pieceNum_>=i.pieces_.length)return null;let t=[];for(let e=i.pieceNum_;e<i.pieces_.length-1;e++)t.push(i.pieces_[e]);return new Ce(t,0)}function Ge(i,t){let e=[];for(let n=i.pieceNum_;n<i.pieces_.length;n++)e.push(i.pieces_[n]);if(t instanceof Ce)for(let n=t.pieceNum_;n<t.pieces_.length;n++)e.push(t.pieces_[n]);else{let n=t.split("/");for(let r=0;r<n.length;r++)n[r].length>0&&e.push(n[r])}return new Ce(e,0)}function oe(i){return i.pieceNum_>=i.pieces_.length}function Rt(i,t){let e=ne(i),n=ne(t);if(e===null)return t;if(e===n)return Rt(xe(i),xe(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+i+")")}function fg(i,t){if(Rn(i)!==Rn(t))return!1;for(let e=i.pieceNum_,n=t.pieceNum_;e<=i.pieces_.length;e++,n++)if(i.pieces_[e]!==t.pieces_[n])return!1;return!0}function di(i,t){let e=i.pieceNum_,n=t.pieceNum_;if(Rn(i)>Rn(t))return!1;for(;e<i.pieces_.length;){if(i.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0}var xp=class{constructor(t,e){this.errorPrefix_=e,this.parts_=kI(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=fa(this.parts_[n]);PI(this)}};function FM(i,t){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(t),i.byteLength_+=fa(t),PI(i)}function LM(i){let t=i.parts_.pop();i.byteLength_-=fa(t),i.parts_.length>0&&(i.byteLength_-=1)}function PI(i){if(i.byteLength_>B0)throw new Error(i.errorPrefix_+"has a key path longer than "+B0+" bytes ("+i.byteLength_+").");if(i.parts_.length>U0)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+U0+") or object contains a cycle "+mr(i))}function mr(i){return i.parts_.length===0?"":"in property '"+i.parts_.join(".")+"'"}var Sp=class i extends Ad{constructor(){super(["visible"]);let t,e;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{let n=!document[t];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}static getInstance(){return new i}getInitialEvent(t){return L(t==="visible","Unknown event type: "+t),[this.visible_]}};var Ma=1e3,VM=60*5*1e3,z0=30*1e3,jM=1.3,UM=3e4,BM="server_kill",$0=3,pg=(()=>{class i extends Sd{constructor(e,n,r,s,o,c,l,u){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=c,this.appCheckTokenProvider_=l,this.authOverride_=u,this.id=i.nextPersistentConnectionId_++,this.log_=Ka("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ma,this.maxReconnectDelay_=VM,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!Ii())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Sp.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Rd.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){let s=++this.requestNumber_,o={r:s,a:e,b:n};this.log_(He(o)),L(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();let n=new bn,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:c=>{let l=c.d;c.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),n.promise}listen(e,n,r,s){this.initConnection_();let o=e._queryIdentifier,c=e._path.toString();this.log_("Listen called for "+c+" "+o),this.listens.has(c)||this.listens.set(c,new Map),L(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),L(!this.listens.get(c).has(o),"listen() called twice for same path/queryId.");let l={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(c).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(e){let n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){let n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);let o={p:r},c="q";e.tag&&(o.q=n._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(c,o,l=>{let u=l.d,m=l.s;i.warnOnListenWarnings_(u,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",l),m!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(m,u))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Ut(e,"w")){let r=Zn(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){let s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',o=n._path.toString();kt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Oy(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=z0)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let e=this.authToken_,n=My(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{let o=s.s,c=s.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{let n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){let r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),L(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);let o={p:e},c="n";s&&(o.q=r,o.t=s),this.sendRequest(c,o)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){let o={p:n,d:r};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,c=>{s&&setTimeout(()=>{s(c.s,c.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,o){this.initConnection_();let c={p:n,d:r};o!==void 0&&(c.h=o),this.outstandingPuts_.push({action:e,request:c,onComplete:s}),this.outstandingPutCount_++;let l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){let n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,o=>{this.log_(n+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(e){if(this.connected_){let n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){let o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+He(e));let n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):_p("Unrecognized action received from server: "+He(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){L(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ma,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ma,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>UM&&(this.reconnectDelay_=Ma),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let e=new Date().getTime()-this.lastConnectionAttemptTime_,n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*jM)}this.onConnectStatus_(!1)}establishConnection_(){return T(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+i.nextConnectionId_++,o=this.lastSessionId,c=!1,l=null,u=function(){l?l.close():(c=!0,r())},m=function(_){L(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(_)};this.realtime_={close:u,sendRequest:m};let p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[_,S]=yield Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);c?ht("getToken() completed but was canceled"):(ht("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=S&&S.token,l=new Tp(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,A=>{kt(A+" ("+this.repoInfo_.toString()+")"),this.interrupt(BM)},o))}catch(_){this.log_("Failed to get token: "+_),c||(this.repoInfo_.nodeAdmin&&kt(_),u())}}})}interrupt(e){ht("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ht("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ha(this.interruptReasons_)&&(this.reconnectDelay_=Ma,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){let n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){let n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(o=>hg(o)).join("$"):r="default";let s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){let r=new Ce(e).toString(),s;if(this.listens.has(r)){let o=this.listens.get(r);s=o.get(n),o.delete(n),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){ht("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=$0&&(this.reconnectDelay_=z0,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){ht("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=$0&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let e of this.listens.values())for(let n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){let e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){let e={},n="js";Ii()&&(this.repoInfo_.nodeAdmin?n="admin_node":n="node"),e["sdk."+n+"."+ug.replace(/\./g,"-")]=1,ua()?e["framework.cordova"]=1:Ul()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){let e=Rd.getInstance().currentlyOnline();return ha(this.interruptReasons_)&&e}}i.nextPersistentConnectionId_=0,i.nextConnectionId_=0;return i})(),re=class i{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new i(t,e)}};var Ps=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){let n=new re(Ds,t),r=new re(Ds,e);return this.compare(n,r)!==0}minPost(){return re.MIN}};var Ed,kd=class extends Ps{static get __EMPTY_NODE(){return Ed}static set __EMPTY_NODE(t){Ed=t}compare(t,e){return Vs(t.name,e.name)}isDefinedOn(t){throw Xn("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return re.MIN}maxPost(){return new re(_r,Ed)}makePost(t,e){return L(typeof t=="string","KeyIndex indexValue must always be a string."),new re(t,Ed)}toString(){return".key"}},Rs=new kd;var Ss=class{constructor(t,e,n,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)this.isReverse_?t=t.left:t=t.right;else if(o===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),e;if(this.resultGenerator_?e=this.resultGenerator_(t.key,t.value):e={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},li=(()=>{class i{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??i.RED,this.left=s??Jt.EMPTY_NODE,this.right=o??Jt.EMPTY_NODE}copy(e,n,r,s,o){return new i(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this,o=r(e,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Jt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Jt.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){let e=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){let e=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){let e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return i.RED=!0,i.BLACK=!1,i})(),Ap=class{copy(t,e,n,r,s){return this}insert(t,e,n){return new li(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Jt=class i{constructor(t,e=i.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new i(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,li.BLACK,null,null))}remove(t){return new i(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,li.BLACK,null,null))}get(t){let e,n=this.root_;for(;!n.isEmpty();){if(e=this.comparator_(t,n.key),e===0)return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null}getPredecessorKey(t){let e,n=this.root_,r=null;for(;!n.isEmpty();)if(e=this.comparator_(t,n.key),e===0){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else e<0?n=n.left:e>0&&(r=n,n=n.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Ss(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new Ss(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new Ss(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new Ss(this.root_,null,this.comparator_,!0,t)}};Jt.EMPTY_NODE=new Ap;function zM(i,t){return Vs(i.name,t.name)}function gg(i,t){return Vs(i,t)}var Rp;function $M(i){Rp=i}var MI=function(i){return typeof i=="number"?"number:"+mI(i):"string:"+i},OI=function(i){if(i.isLeafNode()){let t=i.val();L(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Ut(t,".sv"),"Priority must be a string or number.")}else L(i===Rp||i.isEmpty(),"priority of unexpected type.");L(i===Rp||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var q0,Ms=(()=>{class i{constructor(e,n=i.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,L(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),OI(this.priorityNode_)}static set __childrenNodeConstructor(e){q0=e}static get __childrenNodeConstructor(){return q0}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new i(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return oe(e)?this:ne(e)===".priority"?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:i.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){let r=ne(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(L(r!==".priority"||Rn(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,i.__childrenNodeConstructor.EMPTY_NODE.updateChild(xe(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+MI(this.priorityNode_.val())+":");let n=typeof this.value_;e+=n+":",n==="number"?e+=mI(this.value_):e+=this.value_,this.lazyHash_=dI(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===i.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof i.__childrenNodeConstructor?-1:(L(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){let n=typeof e.value_,r=typeof this.value_,s=i.VALUE_TYPE_ORDER.indexOf(n),o=i.VALUE_TYPE_ORDER.indexOf(r);return L(s>=0,"Unknown leaf type: "+n),L(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){let n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}i.VALUE_TYPE_ORDER=["object","boolean","number","string"];return i})(),NI,FI;function qM(i){NI=i}function WM(i){FI=i}var kp=class extends Ps{compare(t,e){let n=t.node.getPriority(),r=e.node.getPriority(),s=n.compareTo(r);return s===0?Vs(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return re.MIN}maxPost(){return new re(_r,new Ms("[PRIORITY-POST]",FI))}makePost(t,e){let n=NI(t);return new re(e,new Ms("[PRIORITY-POST]",n))}toString(){return".priority"}},Pe=new kp;var HM=Math.log(2),Dp=class{constructor(t){let e=s=>parseInt(Math.log(s)/HM,10),n=s=>parseInt(Array(s+1).join("1"),2);this.count=e(t+1),this.current_=this.count-1;let r=n(this.count);this.bits_=t+1&r}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},Dd=function(i,t,e,n){i.sort(t);let r=function(l,u){let m=u-l,p,_;if(m===0)return null;if(m===1)return p=i[l],_=e?e(p):p,new li(_,p.node,li.BLACK,null,null);{let S=parseInt(m/2,10)+l,A=r(l,S),k=r(S+1,u);return p=i[S],_=e?e(p):p,new li(_,p.node,li.BLACK,A,k)}},s=function(l){let u=null,m=null,p=i.length,_=function(A,k){let F=p-A,ce=p;p-=A;let pe=r(F+1,ce),Q=i[F],We=e?e(Q):Q;S(new li(We,Q.node,k,null,pe))},S=function(A){u?(u.left=A,u=A):(m=A,u=A)};for(let A=0;A<l.count;++A){let k=l.nextBitIsOne(),F=Math.pow(2,l.count-(A+1));k?_(F,li.BLACK):(_(F,li.BLACK),_(F,li.RED))}return m},o=new Dp(i.length),c=s(o);return new Jt(n||t,c)};var dp,xs={},Os=class i{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return L(xs&&Pe,"ChildrenNode.ts has not been loaded"),dp=dp||new i({".priority":xs},{".priority":Pe}),dp}get(t){let e=Zn(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Jt?e:null}hasIndex(t){return Ut(this.indexSet_,t.toString())}addIndex(t,e){L(t!==Rs,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let n=[],r=!1,s=e.getIterator(re.Wrap),o=s.getNext();for(;o;)r=r||t.isDefinedOn(o.node),n.push(o),o=s.getNext();let c;r?c=Dd(n,t.getCompare()):c=xs;let l=t.toString(),u=Object.assign({},this.indexSet_);u[l]=t;let m=Object.assign({},this.indexes_);return m[l]=c,new i(m,u)}addToIndexes(t,e){let n=ma(this.indexes_,(r,s)=>{let o=Zn(this.indexSet_,s);if(L(o,"Missing index implementation for "+s),r===xs)if(o.isDefinedOn(t.node)){let c=[],l=e.getIterator(re.Wrap),u=l.getNext();for(;u;)u.name!==t.name&&c.push(u),u=l.getNext();return c.push(t),Dd(c,o.getCompare())}else return xs;else{let c=e.get(t.name),l=r;return c&&(l=l.remove(new re(t.name,c))),l.insert(t,t.node)}});return new i(n,this.indexSet_)}removeFromIndexes(t,e){let n=ma(this.indexes_,r=>{if(r===xs)return r;{let s=e.get(t.name);return s?r.remove(new re(t.name,s)):r}});return new i(n,this.indexSet_)}};var Oa,J=(()=>{class i{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&OI(this.priorityNode_),this.children_.isEmpty()&&L(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Oa||(Oa=new i(new Jt(gg),null,Os.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Oa}updatePriority(e){return this.children_.isEmpty()?this:new i(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{let n=this.children_.get(e);return n===null?Oa:n}}getChild(e){let n=ne(e);return n===null?this:this.getImmediateChild(n).getChild(xe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(L(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{let r=new re(e,n),s,o;n.isEmpty()?(s=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));let c=s.isEmpty()?Oa:this.priorityNode_;return new i(s,c,o)}}updateChild(e,n){let r=ne(e);if(r===null)return n;{L(ne(e)!==".priority"||Rn(e)===1,".priority must be the last token in a path");let s=this.getImmediateChild(r).updateChild(xe(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;let n={},r=0,s=0,o=!0;if(this.forEachChild(Pe,(c,l)=>{n[c]=l.val(e),r++,o&&i.INTEGER_REGEXP_.test(c)?s=Math.max(s,Number(c)):o=!1}),!e&&o&&s<2*r){let c=[];for(let l in n)c[l]=n[l];return c}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+MI(this.getPriority().val())+":"),this.forEachChild(Pe,(n,r)=>{let s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":dI(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){let s=this.resolveIndex_(r);if(s){let o=s.getPredecessorKey(new re(e,n));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){let n=this.resolveIndex_(e);if(n){let r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){let n=this.getFirstChildName(e);return n?new re(n,this.children_.get(n)):null}getLastChildName(e){let n=this.resolveIndex_(e);if(n){let r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){let n=this.getLastChildName(e);return n?new re(n,this.children_.get(n)):null}forEachChild(e,n){let r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){let r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{let s=this.children_.getIteratorFrom(e.name,re.Wrap),o=s.peek();for(;o!=null&&n.compare(o,e)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){let r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{let s=this.children_.getReverseIteratorFrom(e.name,re.Wrap),o=s.peek();for(;o!=null&&n.compare(o,e)>0;)s.getNext(),o=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Qa?-1:0}withIndex(e){if(e===Rs||this.indexMap_.hasIndex(e))return this;{let n=this.indexMap_.addIndex(e,this.children_);return new i(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Rs||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{let n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){let r=this.getIterator(Pe),s=n.getIterator(Pe),o=r.getNext(),c=s.getNext();for(;o&&c;){if(o.name!==c.name||!o.node.equals(c.node))return!1;o=r.getNext(),c=s.getNext()}return o===null&&c===null}else return!1;else return!1}}resolveIndex_(e){return e===Rs?null:this.indexMap_.get(e.toString())}}return i.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,i})(),Pp=class extends J{constructor(){super(new Jt(gg),J.EMPTY_NODE,Os.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return J.EMPTY_NODE}isEmpty(){return!1}},Qa=new Pp;Object.defineProperties(re,{MIN:{value:new re(Ds,J.EMPTY_NODE)},MAX:{value:new re(_r,Qa)}});kd.__EMPTY_NODE=J.EMPTY_NODE;Ms.__childrenNodeConstructor=J;$M(Qa);WM(Qa);var GM=!0;function it(i,t=null){if(i===null)return J.EMPTY_NODE;if(typeof i=="object"&&".priority"in i&&(t=i[".priority"]),L(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof i=="object"&&".value"in i&&i[".value"]!==null&&(i=i[".value"]),typeof i!="object"||".sv"in i){let e=i;return new Ms(e,it(t))}if(!(i instanceof Array)&&GM){let e=[],n=!1;if(Dt(i,(o,c)=>{if(o.substring(0,1)!=="."){let l=it(c);l.isEmpty()||(n=n||!l.getPriority().isEmpty(),e.push(new re(o,l)))}}),e.length===0)return J.EMPTY_NODE;let s=Dd(e,zM,o=>o.name,gg);if(n){let o=Dd(e,Pe.getCompare());return new J(s,it(t),new Os({".priority":o},{".priority":Pe}))}else return new J(s,it(t),Os.Default)}else{let e=J.EMPTY_NODE;return Dt(i,(n,r)=>{if(Ut(i,n)&&n.substring(0,1)!=="."){let s=it(r);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(n,s))}}),e.updatePriority(it(t))}}qM(it);var Mp=class extends Ps{constructor(t){super(),this.indexPath_=t,L(!oe(t)&&ne(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){let n=this.extractChild(t.node),r=this.extractChild(e.node),s=n.compareTo(r);return s===0?Vs(t.name,e.name):s}makePost(t,e){let n=it(t),r=J.EMPTY_NODE.updateChild(this.indexPath_,n);return new re(e,r)}maxPost(){let t=J.EMPTY_NODE.updateChild(this.indexPath_,Qa);return new re(_r,t)}toString(){return kI(this.indexPath_,0).join("/")}};var Op=class extends Ps{compare(t,e){let n=t.node.compareTo(e.node);return n===0?Vs(t.name,e.name):n}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return re.MIN}maxPost(){return re.MAX}makePost(t,e){let n=it(t);return new re(e,n)}toString(){return".value"}},KM=new Op;function LI(i){return{type:"value",snapshotNode:i}}function Ns(i,t){return{type:"child_added",snapshotNode:t,childName:i}}function Ba(i,t){return{type:"child_removed",snapshotNode:t,childName:i}}function za(i,t,e){return{type:"child_changed",snapshotNode:t,childName:i,oldSnap:e}}function QM(i,t){return{type:"child_moved",snapshotNode:t,childName:i}}var $a=class{constructor(t){this.index_=t}updateChild(t,e,n,r,s,o){L(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");let c=t.getImmediateChild(e);return c.getChild(r).equals(n.getChild(r))&&c.isEmpty()===n.isEmpty()||(o!=null&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(Ba(e,c)):L(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?o.trackChildChange(Ns(e,n)):o.trackChildChange(za(e,n,c))),t.isLeafNode()&&n.isEmpty())?t:t.updateImmediateChild(e,n).withIndex(this.index_)}updateFullNode(t,e,n){return n!=null&&(t.isLeafNode()||t.forEachChild(Pe,(r,s)=>{e.hasChild(r)||n.trackChildChange(Ba(r,s))}),e.isLeafNode()||e.forEachChild(Pe,(r,s)=>{if(t.hasChild(r)){let o=t.getImmediateChild(r);o.equals(s)||n.trackChildChange(za(r,s,o))}else n.trackChildChange(Ns(r,s))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?J.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Pd=class i{constructor(t){this.indexedFilter_=new $a(t.getIndex()),this.index_=t.getIndex(),this.startPost_=i.getStartPost_(t),this.endPost_=i.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){let e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,n=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return e&&n}updateChild(t,e,n,r,s,o){return this.matches(new re(e,n))||(n=J.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,s,o)}updateFullNode(t,e,n){e.isLeafNode()&&(e=J.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(J.EMPTY_NODE);let s=this;return e.forEachChild(Pe,(o,c)=>{s.matches(new re(o,c))||(r=r.updateImmediateChild(o,J.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){let e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){let e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}else return t.getIndex().maxPost()}};var Np=class{constructor(t){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{let n=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?n<=0:n<0},this.withinEndPost=e=>{let n=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?n<=0:n<0},this.rangedFilter_=new Pd(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,n,r,s,o){return this.rangedFilter_.matches(new re(e,n))||(n=J.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,s,o):this.fullLimitUpdateChild_(t,e,n,s,o)}updateFullNode(t,e,n){let r;if(e.isLeafNode()||e.isEmpty())r=J.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<e.numChildren()&&e.isIndexed(this.index_)){r=J.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let c=s.getNext();if(this.withinDirectionalStart(c))if(this.withinDirectionalEnd(c))r=r.updateImmediateChild(c.name,c.node),o++;else break;else continue}}else{r=e.withIndex(this.index_),r=r.updatePriority(J.EMPTY_NODE);let s;this.reverse_?s=r.getReverseIterator(this.index_):s=r.getIterator(this.index_);let o=0;for(;s.hasNext();){let c=s.getNext();o<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?o++:r=r.updateImmediateChild(c.name,J.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,n,r,s){let o;if(this.reverse_){let p=this.index_.getCompare();o=(_,S)=>p(S,_)}else o=this.index_.getCompare();let c=t;L(c.numChildren()===this.limit_,"");let l=new re(e,n),u=this.reverse_?c.getFirstChild(this.index_):c.getLastChild(this.index_),m=this.rangedFilter_.matches(l);if(c.hasChild(e)){let p=c.getImmediateChild(e),_=r.getChildAfterChild(this.index_,u,this.reverse_);for(;_!=null&&(_.name===e||c.hasChild(_.name));)_=r.getChildAfterChild(this.index_,_,this.reverse_);let S=_==null?1:o(_,l);if(m&&!n.isEmpty()&&S>=0)return s?.trackChildChange(za(e,n,p)),c.updateImmediateChild(e,n);{s?.trackChildChange(Ba(e,p));let k=c.updateImmediateChild(e,J.EMPTY_NODE);return _!=null&&this.rangedFilter_.matches(_)?(s?.trackChildChange(Ns(_.name,_.node)),k.updateImmediateChild(_.name,_.node)):k}}else return n.isEmpty()?t:m&&o(u,l)>=0?(s!=null&&(s.trackChildChange(Ba(u.name,u.node)),s.trackChildChange(Ns(e,n))),c.updateImmediateChild(e,n).updateImmediateChild(u.name,J.EMPTY_NODE)):t}};var Fp=class i{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Pe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return L(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return L(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ds}hasEnd(){return this.endSet_}getIndexEndValue(){return L(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return L(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:_r}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return L(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Pe}copy(){let t=new i;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function YM(i){return i.loadsAllData()?new $a(i.getIndex()):i.hasLimit()?new Np(i):new Pd(i)}function W0(i){let t={};if(i.isDefault())return t;let e;if(i.index_===Pe?e="$priority":i.index_===KM?e="$value":i.index_===Rs?e="$key":(L(i.index_ instanceof Mp,"Unrecognized index type!"),e=i.index_.toString()),t.orderBy=He(e),i.startSet_){let n=i.startAfterSet_?"startAfter":"startAt";t[n]=He(i.indexStartValue_),i.startNameSet_&&(t[n]+=","+He(i.indexStartName_))}if(i.endSet_){let n=i.endBeforeSet_?"endBefore":"endAt";t[n]=He(i.indexEndValue_),i.endNameSet_&&(t[n]+=","+He(i.indexEndName_))}return i.limitSet_&&(i.isViewFromLeft()?t.limitToFirst=i.limit_:t.limitToLast=i.limit_),t}function H0(i){let t={};if(i.startSet_&&(t.sp=i.indexStartValue_,i.startNameSet_&&(t.sn=i.indexStartName_),t.sin=!i.startAfterSet_),i.endSet_&&(t.ep=i.indexEndValue_,i.endNameSet_&&(t.en=i.indexEndName_),t.ein=!i.endBeforeSet_),i.limitSet_){t.l=i.limit_;let e=i.viewFrom_;e===""&&(i.isViewFromLeft()?e="l":e="r"),t.vf=e}return i.index_!==Pe&&(t.i=i.index_.toString()),t}var Lp=class i extends Sd{constructor(t,e,n,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=Ka("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return e!==void 0?"tag$"+e:(L(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,n,r){let s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);let o=i.getListenId_(t,n),c={};this.listens_[o]=c;let l=W0(t._queryParams);this.restRequest_(s+".json",l,(u,m)=>{let p=m;if(u===404&&(p=null,u=null),u===null&&this.onDataUpdate_(s,p,!1,n),Zn(this.listens_,o)===c){let _;u?u===401?_="permission_denied":_="rest_error:"+u:_="ok",r(_,null)}})}unlisten(t,e){let n=i.getListenId_(t,e);delete this.listens_[n]}get(t){let e=W0(t._queryParams),n=t._path.toString(),r=new bn;return this.restRequest_(n+".json",e,(s,o)=>{let c=o;s===404&&(c=null,s=null),s===null?(this.onDataUpdate_(n,c,!1,null),r.resolve(c)):r.reject(new Error(c))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},n){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(e.auth=r.accessToken),s&&s.token&&(e.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+er(e);this.log_("Sending REST request for "+o);let c=new XMLHttpRequest;c.onreadystatechange=()=>{if(n&&c.readyState===4){this.log_("REST Response for "+o+" received. status:",c.status,"response:",c.responseText);let l=null;if(c.status>=200&&c.status<300){try{l=ls(c.responseText)}catch{kt("Failed to parse JSON response for "+o+": "+c.responseText)}n(null,l)}else c.status!==401&&c.status!==404&&kt("Got unsuccessful REST response for "+o+" Status: "+c.status),n(c.status);n=null}},c.open("GET",o,!0),c.send()})}};var Vp=class{constructor(){this.rootNode_=J.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}};function Md(){return{value:null,children:new Map}}function VI(i,t,e){if(oe(t))i.value=e,i.children.clear();else if(i.value!==null)i.value=i.value.updateChild(t,e);else{let n=ne(t);i.children.has(n)||i.children.set(n,Md());let r=i.children.get(n);t=xe(t),VI(r,t,e)}}function jp(i,t,e){i.value!==null?e(t,i.value):XM(i,(n,r)=>{let s=new Ce(t.toString()+"/"+n);jp(r,s,e)})}function XM(i,t){i.children.forEach((e,n)=>{t(n,e)})}var Up=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),e=Object.assign({},t);return this.last_&&Dt(this.last_,(n,r)=>{e[n]=e[n]-r}),this.last_=t,e}};var G0=10*1e3,ZM=30*1e3,JM=5*60*1e3,Bp=class{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Up(t);let n=G0+(ZM-G0)*Math.random();Fa(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){let t=this.statsListener_.get(),e={},n=!1;Dt(t,(r,s)=>{s>0&&Ut(this.statsToReport_,r)&&(e[r]=s,n=!0)}),n&&this.server_.reportStats(e),Fa(this.reportStats_.bind(this),Math.floor(Math.random()*2*JM))}};var Ri=function(i){return i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",i}(Ri||{});function jI(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function _g(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function vg(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}var zp=class i{constructor(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Ri.ACK_USER_WRITE,this.source=jI()}operationForChild(t){if(oe(this.path)){if(this.affectedTree.value!=null)return L(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let e=this.affectedTree.subtree(new Ce(t));return new i(_e(),e,this.revert)}}else return L(ne(this.path)===t,"operationForChild called for unrelated child."),new i(xe(this.path),this.affectedTree,this.revert)}};var Od=class i{constructor(t,e){this.source=t,this.path=e,this.type=Ri.LISTEN_COMPLETE}operationForChild(t){return oe(this.path)?new i(this.source,_e()):new i(this.source,xe(this.path))}};var Fs=class i{constructor(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Ri.OVERWRITE}operationForChild(t){return oe(this.path)?new i(this.source,_e(),this.snap.getImmediateChild(t)):new i(this.source,xe(this.path),this.snap)}};var Nd=class i{constructor(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Ri.MERGE}operationForChild(t){if(oe(this.path)){let e=this.children.subtree(new Ce(t));return e.isEmpty()?null:e.value?new Fs(this.source,_e(),e.value):new i(this.source,_e(),e)}else return L(ne(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new i(this.source,xe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Xi=class{constructor(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(oe(t))return this.isFullyInitialized()&&!this.filtered_;let e=ne(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};var $p=class{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}};function eO(i,t,e,n){let r=[],s=[];return t.forEach(o=>{o.type==="child_changed"&&i.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(QM(o.childName,o.snapshotNode))}),Na(i,r,"child_removed",t,n,e),Na(i,r,"child_added",t,n,e),Na(i,r,"child_moved",s,n,e),Na(i,r,"child_changed",t,n,e),Na(i,r,"value",t,n,e),r}function Na(i,t,e,n,r,s){let o=n.filter(c=>c.type===e);o.sort((c,l)=>iO(i,c,l)),o.forEach(c=>{let l=tO(i,c,s);r.forEach(u=>{u.respondsTo(c.type)&&t.push(u.createEvent(l,i.query_))})})}function tO(i,t,e){return t.type==="value"||t.type==="child_removed"||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,i.index_)),t}function iO(i,t,e){if(t.childName==null||e.childName==null)throw Xn("Should only compare child_ events.");let n=new re(t.childName,t.snapshotNode),r=new re(e.childName,e.snapshotNode);return i.index_.compare(n,r)}function Hd(i,t){return{eventCache:i,serverCache:t}}function Va(i,t,e,n){return Hd(new Xi(t,e,n),i.serverCache)}function UI(i,t,e,n){return Hd(i.eventCache,new Xi(t,e,n))}function qp(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function vr(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}var up,nO=()=>(up||(up=new Jt(rM)),up),Pt=class i{constructor(t,e=nO()){this.value=t,this.children=e}static fromObject(t){let e=new i(null);return Dt(t,(n,r)=>{e=e.set(new Ce(n),r)}),e}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(this.value!=null&&e(this.value))return{path:_e(),value:this.value};if(oe(t))return null;{let n=ne(t),r=this.children.get(n);if(r!==null){let s=r.findRootMostMatchingPathAndValue(xe(t),e);return s!=null?{path:Ge(new Ce(n),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(oe(t))return this;{let e=ne(t),n=this.children.get(e);return n!==null?n.subtree(xe(t)):new i(null)}}set(t,e){if(oe(t))return new i(e,this.children);{let n=ne(t),s=(this.children.get(n)||new i(null)).set(xe(t),e),o=this.children.insert(n,s);return new i(this.value,o)}}remove(t){if(oe(t))return this.children.isEmpty()?new i(null):new i(null,this.children);{let e=ne(t),n=this.children.get(e);if(n){let r=n.remove(xe(t)),s;return r.isEmpty()?s=this.children.remove(e):s=this.children.insert(e,r),this.value===null&&s.isEmpty()?new i(null):new i(this.value,s)}else return this}}get(t){if(oe(t))return this.value;{let e=ne(t),n=this.children.get(e);return n?n.get(xe(t)):null}}setTree(t,e){if(oe(t))return e;{let n=ne(t),s=(this.children.get(n)||new i(null)).setTree(xe(t),e),o;return s.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,s),new i(this.value,o)}}fold(t){return this.fold_(_e(),t)}fold_(t,e){let n={};return this.children.inorderTraversal((r,s)=>{n[r]=s.fold_(Ge(t,r),e)}),e(t,this.value,n)}findOnPath(t,e){return this.findOnPath_(t,_e(),e)}findOnPath_(t,e,n){let r=this.value?n(e,this.value):!1;if(r)return r;if(oe(t))return null;{let s=ne(t),o=this.children.get(s);return o?o.findOnPath_(xe(t),Ge(e,s),n):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,_e(),e)}foreachOnPath_(t,e,n){if(oe(t))return this;{this.value&&n(e,this.value);let r=ne(t),s=this.children.get(r);return s?s.foreachOnPath_(xe(t),Ge(e,r),n):new i(null)}}foreach(t){this.foreach_(_e(),t)}foreach_(t,e){this.children.inorderTraversal((n,r)=>{r.foreach_(Ge(t,n),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,n)=>{n.value&&t(e,n.value)})}};var ui=class i{constructor(t){this.writeTree_=t}static empty(){return new i(new Pt(null))}};function ja(i,t,e){if(oe(t))return new ui(new Pt(e));{let n=i.writeTree_.findRootMostValueAndPath(t);if(n!=null){let r=n.path,s=n.value,o=Rt(r,t);return s=s.updateChild(o,e),new ui(i.writeTree_.set(r,s))}else{let r=new Pt(e),s=i.writeTree_.setTree(t,r);return new ui(s)}}}function K0(i,t,e){let n=i;return Dt(e,(r,s)=>{n=ja(n,Ge(t,r),s)}),n}function Q0(i,t){if(oe(t))return ui.empty();{let e=i.writeTree_.setTree(t,new Pt(null));return new ui(e)}}function Wp(i,t){return br(i,t)!=null}function br(i,t){let e=i.writeTree_.findRootMostValueAndPath(t);return e!=null?i.writeTree_.get(e.path).getChild(Rt(e.path,t)):null}function Y0(i){let t=[],e=i.writeTree_.value;return e!=null?e.isLeafNode()||e.forEachChild(Pe,(n,r)=>{t.push(new re(n,r))}):i.writeTree_.children.inorderTraversal((n,r)=>{r.value!=null&&t.push(new re(n,r.value))}),t}function An(i,t){if(oe(t))return i;{let e=br(i,t);return e!=null?new ui(new Pt(e)):new ui(i.writeTree_.subtree(t))}}function Hp(i){return i.writeTree_.isEmpty()}function Ls(i,t){return BI(_e(),i.writeTree_,t)}function BI(i,t,e){if(t.value!=null)return e.updateChild(i,t.value);{let n=null;return t.children.inorderTraversal((r,s)=>{r===".priority"?(L(s.value!==null,"Priority writes must always be leaf nodes"),n=s.value):e=BI(Ge(i,r),s,e)}),!e.getChild(i).isEmpty()&&n!==null&&(e=e.updateChild(Ge(i,".priority"),n)),e}}function bg(i,t){return WI(t,i)}function rO(i,t,e,n,r){L(n>i.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),i.allWrites.push({path:t,snap:e,writeId:n,visible:r}),r&&(i.visibleWrites=ja(i.visibleWrites,t,e)),i.lastWriteId=n}function sO(i,t){for(let e=0;e<i.allWrites.length;e++){let n=i.allWrites[e];if(n.writeId===t)return n}return null}function oO(i,t){let e=i.allWrites.findIndex(c=>c.writeId===t);L(e>=0,"removeWrite called with nonexistent writeId.");let n=i.allWrites[e];i.allWrites.splice(e,1);let r=n.visible,s=!1,o=i.allWrites.length-1;for(;r&&o>=0;){let c=i.allWrites[o];c.visible&&(o>=e&&aO(c,n.path)?r=!1:di(n.path,c.path)&&(s=!0)),o--}if(r){if(s)return cO(i),!0;if(n.snap)i.visibleWrites=Q0(i.visibleWrites,n.path);else{let c=n.children;Dt(c,l=>{i.visibleWrites=Q0(i.visibleWrites,Ge(n.path,l))})}return!0}else return!1}function aO(i,t){if(i.snap)return di(i.path,t);for(let e in i.children)if(i.children.hasOwnProperty(e)&&di(Ge(i.path,e),t))return!0;return!1}function cO(i){i.visibleWrites=zI(i.allWrites,lO,_e()),i.allWrites.length>0?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1}function lO(i){return i.visible}function zI(i,t,e){let n=ui.empty();for(let r=0;r<i.length;++r){let s=i[r];if(t(s)){let o=s.path,c;if(s.snap)di(e,o)?(c=Rt(e,o),n=ja(n,c,s.snap)):di(o,e)&&(c=Rt(o,e),n=ja(n,_e(),s.snap.getChild(c)));else if(s.children){if(di(e,o))c=Rt(e,o),n=K0(n,c,s.children);else if(di(o,e))if(c=Rt(o,e),oe(c))n=K0(n,_e(),s.children);else{let l=Zn(s.children,ne(c));if(l){let u=l.getChild(xe(c));n=ja(n,_e(),u)}}}else throw Xn("WriteRecord should have .snap or .children")}}return n}function $I(i,t,e,n,r){if(!n&&!r){let s=br(i.visibleWrites,t);if(s!=null)return s;{let o=An(i.visibleWrites,t);if(Hp(o))return e;if(e==null&&!Wp(o,_e()))return null;{let c=e||J.EMPTY_NODE;return Ls(o,c)}}}else{let s=An(i.visibleWrites,t);if(!r&&Hp(s))return e;if(!r&&e==null&&!Wp(s,_e()))return null;{let o=function(u){return(u.visible||r)&&(!n||!~n.indexOf(u.writeId))&&(di(u.path,t)||di(t,u.path))},c=zI(i.allWrites,o,t),l=e||J.EMPTY_NODE;return Ls(c,l)}}}function dO(i,t,e){let n=J.EMPTY_NODE,r=br(i.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(Pe,(s,o)=>{n=n.updateImmediateChild(s,o)}),n;if(e){let s=An(i.visibleWrites,t);return e.forEachChild(Pe,(o,c)=>{let l=Ls(An(s,new Ce(o)),c);n=n.updateImmediateChild(o,l)}),Y0(s).forEach(o=>{n=n.updateImmediateChild(o.name,o.node)}),n}else{let s=An(i.visibleWrites,t);return Y0(s).forEach(o=>{n=n.updateImmediateChild(o.name,o.node)}),n}}function uO(i,t,e,n,r){L(n||r,"Either existingEventSnap or existingServerSnap must exist");let s=Ge(t,e);if(Wp(i.visibleWrites,s))return null;{let o=An(i.visibleWrites,s);return Hp(o)?r.getChild(e):Ls(o,r.getChild(e))}}function hO(i,t,e,n){let r=Ge(t,e),s=br(i.visibleWrites,r);if(s!=null)return s;if(n.isCompleteForChild(e)){let o=An(i.visibleWrites,r);return Ls(o,n.getNode().getImmediateChild(e))}else return null}function mO(i,t){return br(i.visibleWrites,t)}function fO(i,t,e,n,r,s,o){let c,l=An(i.visibleWrites,t),u=br(l,_e());if(u!=null)c=u;else if(e!=null)c=Ls(l,e);else return[];if(c=c.withIndex(o),!c.isEmpty()&&!c.isLeafNode()){let m=[],p=o.getCompare(),_=s?c.getReverseIteratorFrom(n,o):c.getIteratorFrom(n,o),S=_.getNext();for(;S&&m.length<r;)p(S,n)!==0&&m.push(S),S=_.getNext();return m}else return[]}function pO(){return{visibleWrites:ui.empty(),allWrites:[],lastWriteId:-1}}function Fd(i,t,e,n){return $I(i.writeTree,i.treePath,t,e,n)}function yg(i,t){return dO(i.writeTree,i.treePath,t)}function X0(i,t,e,n){return uO(i.writeTree,i.treePath,t,e,n)}function Ld(i,t){return mO(i.writeTree,Ge(i.treePath,t))}function gO(i,t,e,n,r,s){return fO(i.writeTree,i.treePath,t,e,n,r,s)}function wg(i,t,e){return hO(i.writeTree,i.treePath,t,e)}function qI(i,t){return WI(Ge(i.treePath,t),i.writeTree)}function WI(i,t){return{treePath:i,writeTree:t}}var Gp=class{constructor(){this.changeMap=new Map}trackChildChange(t){let e=t.type,n=t.childName;L(e==="child_added"||e==="child_changed"||e==="child_removed","Only child changes supported for tracking"),L(n!==".priority","Only non-priority child changes can be tracked.");let r=this.changeMap.get(n);if(r){let s=r.type;if(e==="child_added"&&s==="child_removed")this.changeMap.set(n,za(n,t.snapshotNode,r.snapshotNode));else if(e==="child_removed"&&s==="child_added")this.changeMap.delete(n);else if(e==="child_removed"&&s==="child_changed")this.changeMap.set(n,Ba(n,r.oldSnap));else if(e==="child_changed"&&s==="child_added")this.changeMap.set(n,Ns(n,t.snapshotNode));else if(e==="child_changed"&&s==="child_changed")this.changeMap.set(n,za(n,t.snapshotNode,r.oldSnap));else throw Xn("Illegal combination of changes: "+t+" occurred after "+r)}else this.changeMap.set(n,t)}getChanges(){return Array.from(this.changeMap.values())}};var Kp=class{getCompleteChild(t){return null}getChildAfterChild(t,e,n){return null}},HI=new Kp,qa=class{constructor(t,e,n=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}getCompleteChild(t){let e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{let n=this.optCompleteServerCache_!=null?new Xi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return wg(this.writes_,t,n)}}getChildAfterChild(t,e,n){let r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:vr(this.viewCache_),s=gO(this.writes_,r,e,1,n,t);return s.length===0?null:s[0]}};function _O(i){return{filter:i}}function vO(i,t){L(t.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),L(t.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}function bO(i,t,e,n,r){let s=new Gp,o,c;if(e.type===Ri.OVERWRITE){let u=e;u.source.fromUser?o=Qp(i,t,u.path,u.snap,n,r,s):(L(u.source.fromServer,"Unknown source."),c=u.source.tagged||t.serverCache.isFiltered()&&!oe(u.path),o=Vd(i,t,u.path,u.snap,n,r,c,s))}else if(e.type===Ri.MERGE){let u=e;u.source.fromUser?o=wO(i,t,u.path,u.children,n,r,s):(L(u.source.fromServer,"Unknown source."),c=u.source.tagged||t.serverCache.isFiltered(),o=Yp(i,t,u.path,u.children,n,r,c,s))}else if(e.type===Ri.ACK_USER_WRITE){let u=e;u.revert?o=CO(i,t,u.path,n,r,s):o=IO(i,t,u.path,u.affectedTree,n,r,s)}else if(e.type===Ri.LISTEN_COMPLETE)o=EO(i,t,e.path,n,s);else throw Xn("Unknown operation type: "+e.type);let l=s.getChanges();return yO(t,o,l),{viewCache:o,changes:l}}function yO(i,t,e){let n=t.eventCache;if(n.isFullyInitialized()){let r=n.getNode().isLeafNode()||n.getNode().isEmpty(),s=qp(i);(e.length>0||!i.eventCache.isFullyInitialized()||r&&!n.getNode().equals(s)||!n.getNode().getPriority().equals(s.getPriority()))&&e.push(LI(qp(t)))}}function GI(i,t,e,n,r,s){let o=t.eventCache;if(Ld(n,e)!=null)return t;{let c,l;if(oe(e))if(L(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let u=vr(t),m=u instanceof J?u:J.EMPTY_NODE,p=yg(n,m);c=i.filter.updateFullNode(t.eventCache.getNode(),p,s)}else{let u=Fd(n,vr(t));c=i.filter.updateFullNode(t.eventCache.getNode(),u,s)}else{let u=ne(e);if(u===".priority"){L(Rn(e)===1,"Can't have a priority with additional path components");let m=o.getNode();l=t.serverCache.getNode();let p=X0(n,e,m,l);p!=null?c=i.filter.updatePriority(m,p):c=o.getNode()}else{let m=xe(e),p;if(o.isCompleteForChild(u)){l=t.serverCache.getNode();let _=X0(n,e,o.getNode(),l);_!=null?p=o.getNode().getImmediateChild(u).updateChild(m,_):p=o.getNode().getImmediateChild(u)}else p=wg(n,u,t.serverCache);p!=null?c=i.filter.updateChild(o.getNode(),u,p,m,r,s):c=o.getNode()}}return Va(t,c,o.isFullyInitialized()||oe(e),i.filter.filtersNodes())}}function Vd(i,t,e,n,r,s,o,c){let l=t.serverCache,u,m=o?i.filter:i.filter.getIndexedFilter();if(oe(e))u=m.updateFullNode(l.getNode(),n,null);else if(m.filtersNodes()&&!l.isFiltered()){let S=l.getNode().updateChild(e,n);u=m.updateFullNode(l.getNode(),S,null)}else{let S=ne(e);if(!l.isCompleteForPath(e)&&Rn(e)>1)return t;let A=xe(e),F=l.getNode().getImmediateChild(S).updateChild(A,n);S===".priority"?u=m.updatePriority(l.getNode(),F):u=m.updateChild(l.getNode(),S,F,A,HI,null)}let p=UI(t,u,l.isFullyInitialized()||oe(e),m.filtersNodes()),_=new qa(r,p,s);return GI(i,p,e,r,_,c)}function Qp(i,t,e,n,r,s,o){let c=t.eventCache,l,u,m=new qa(r,t,s);if(oe(e))u=i.filter.updateFullNode(t.eventCache.getNode(),n,o),l=Va(t,u,!0,i.filter.filtersNodes());else{let p=ne(e);if(p===".priority")u=i.filter.updatePriority(t.eventCache.getNode(),n),l=Va(t,u,c.isFullyInitialized(),c.isFiltered());else{let _=xe(e),S=c.getNode().getImmediateChild(p),A;if(oe(_))A=n;else{let k=m.getCompleteChild(p);k!=null?RI(_)===".priority"&&k.getChild(DI(_)).isEmpty()?A=k:A=k.updateChild(_,n):A=J.EMPTY_NODE}if(S.equals(A))l=t;else{let k=i.filter.updateChild(c.getNode(),p,A,_,m,o);l=Va(t,k,c.isFullyInitialized(),i.filter.filtersNodes())}}}return l}function Z0(i,t){return i.eventCache.isCompleteForChild(t)}function wO(i,t,e,n,r,s,o){let c=t;return n.foreach((l,u)=>{let m=Ge(e,l);Z0(t,ne(m))&&(c=Qp(i,c,m,u,r,s,o))}),n.foreach((l,u)=>{let m=Ge(e,l);Z0(t,ne(m))||(c=Qp(i,c,m,u,r,s,o))}),c}function J0(i,t,e){return e.foreach((n,r)=>{t=t.updateChild(n,r)}),t}function Yp(i,t,e,n,r,s,o,c){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l=t,u;oe(e)?u=n:u=new Pt(null).setTree(e,n);let m=t.serverCache.getNode();return u.children.inorderTraversal((p,_)=>{if(m.hasChild(p)){let S=t.serverCache.getNode().getImmediateChild(p),A=J0(i,S,_);l=Vd(i,l,new Ce(p),A,r,s,o,c)}}),u.children.inorderTraversal((p,_)=>{let S=!t.serverCache.isCompleteForChild(p)&&_.value===null;if(!m.hasChild(p)&&!S){let A=t.serverCache.getNode().getImmediateChild(p),k=J0(i,A,_);l=Vd(i,l,new Ce(p),k,r,s,o,c)}}),l}function IO(i,t,e,n,r,s,o){if(Ld(r,e)!=null)return t;let c=t.serverCache.isFiltered(),l=t.serverCache;if(n.value!=null){if(oe(e)&&l.isFullyInitialized()||l.isCompleteForPath(e))return Vd(i,t,e,l.getNode().getChild(e),r,s,c,o);if(oe(e)){let u=new Pt(null);return l.getNode().forEachChild(Rs,(m,p)=>{u=u.set(new Ce(m),p)}),Yp(i,t,e,u,r,s,c,o)}else return t}else{let u=new Pt(null);return n.foreach((m,p)=>{let _=Ge(e,m);l.isCompleteForPath(_)&&(u=u.set(m,l.getNode().getChild(_)))}),Yp(i,t,e,u,r,s,c,o)}}function EO(i,t,e,n,r){let s=t.serverCache,o=UI(t,s.getNode(),s.isFullyInitialized()||oe(e),s.isFiltered());return GI(i,o,e,n,HI,r)}function CO(i,t,e,n,r,s){let o;if(Ld(n,e)!=null)return t;{let c=new qa(n,t,r),l=t.eventCache.getNode(),u;if(oe(e)||ne(e)===".priority"){let m;if(t.serverCache.isFullyInitialized())m=Fd(n,vr(t));else{let p=t.serverCache.getNode();L(p instanceof J,"serverChildren would be complete if leaf node"),m=yg(n,p)}m=m,u=i.filter.updateFullNode(l,m,s)}else{let m=ne(e),p=wg(n,m,t.serverCache);p==null&&t.serverCache.isCompleteForChild(m)&&(p=l.getImmediateChild(m)),p!=null?u=i.filter.updateChild(l,m,p,xe(e),c,s):t.eventCache.getNode().hasChild(m)?u=i.filter.updateChild(l,m,J.EMPTY_NODE,xe(e),c,s):u=l,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Fd(n,vr(t)),o.isLeafNode()&&(u=i.filter.updateFullNode(u,o,s)))}return o=t.serverCache.isFullyInitialized()||Ld(n,_e())!=null,Va(t,u,o,i.filter.filtersNodes())}}var Xp=class{constructor(t,e){this.query_=t,this.eventRegistrations_=[];let n=this.query_._queryParams,r=new $a(n.getIndex()),s=YM(n);this.processor_=_O(s);let o=e.serverCache,c=e.eventCache,l=r.updateFullNode(J.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(J.EMPTY_NODE,c.getNode(),null),m=new Xi(l,o.isFullyInitialized(),r.filtersNodes()),p=new Xi(u,c.isFullyInitialized(),s.filtersNodes());this.viewCache_=Hd(p,m),this.eventGenerator_=new $p(this.query_)}get query(){return this.query_}};function TO(i){return i.viewCache_.serverCache.getNode()}function xO(i,t){let e=vr(i.viewCache_);return e&&(i.query._queryParams.loadsAllData()||!oe(t)&&!e.getImmediateChild(ne(t)).isEmpty())?e.getChild(t):null}function eI(i){return i.eventRegistrations_.length===0}function SO(i,t){i.eventRegistrations_.push(t)}function tI(i,t,e){let n=[];if(e){L(t==null,"A cancel should cancel all event registrations.");let r=i.query._path;i.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(e,r);o&&n.push(o)})}if(t){let r=[];for(let s=0;s<i.eventRegistrations_.length;++s){let o=i.eventRegistrations_[s];if(!o.matches(t))r.push(o);else if(t.hasAnyCallback()){r=r.concat(i.eventRegistrations_.slice(s+1));break}}i.eventRegistrations_=r}else i.eventRegistrations_=[];return n}function iI(i,t,e,n){t.type===Ri.MERGE&&t.source.queryId!==null&&(L(vr(i.viewCache_),"We should always have a full cache before handling merges"),L(qp(i.viewCache_),"Missing event cache, even though we have a server cache"));let r=i.viewCache_,s=bO(i.processor_,r,t,e,n);return vO(i.processor_,s.viewCache),L(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=s.viewCache,KI(i,s.changes,s.viewCache.eventCache.getNode(),null)}function AO(i,t){let e=i.viewCache_.eventCache,n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Pe,(s,o)=>{n.push(Ns(s,o))}),e.isFullyInitialized()&&n.push(LI(e.getNode())),KI(i,n,e.getNode(),t)}function KI(i,t,e,n){let r=n?[n]:i.eventRegistrations_;return eO(i.eventGenerator_,t,e,r)}var jd,Zp=class{constructor(){this.views=new Map}};function RO(i){L(!jd,"__referenceConstructor has already been defined"),jd=i}function kO(){return L(jd,"Reference.ts has not been loaded"),jd}function DO(i){return i.views.size===0}function Ig(i,t,e,n){let r=t.source.queryId;if(r!==null){let s=i.views.get(r);return L(s!=null,"SyncTree gave us an op for an invalid query."),iI(s,t,e,n)}else{let s=[];for(let o of i.views.values())s=s.concat(iI(o,t,e,n));return s}}function PO(i,t,e,n,r){let s=t._queryIdentifier,o=i.views.get(s);if(!o){let c=Fd(e,r?n:null),l=!1;c?l=!0:n instanceof J?(c=yg(e,n),l=!1):(c=J.EMPTY_NODE,l=!1);let u=Hd(new Xi(c,l,!1),new Xi(n,r,!1));return new Xp(t,u)}return o}function MO(i,t,e,n,r,s){let o=PO(i,t,n,r,s);return i.views.has(t._queryIdentifier)||i.views.set(t._queryIdentifier,o),SO(o,e),AO(o,e)}function OO(i,t,e,n){let r=t._queryIdentifier,s=[],o=[],c=kn(i);if(r==="default")for(let[l,u]of i.views.entries())o=o.concat(tI(u,e,n)),eI(u)&&(i.views.delete(l),u.query._queryParams.loadsAllData()||s.push(u.query));else{let l=i.views.get(r);l&&(o=o.concat(tI(l,e,n)),eI(l)&&(i.views.delete(r),l.query._queryParams.loadsAllData()||s.push(l.query)))}return c&&!kn(i)&&s.push(new(kO())(t._repo,t._path)),{removed:s,events:o}}function QI(i){let t=[];for(let e of i.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function ks(i,t){let e=null;for(let n of i.views.values())e=e||xO(n,t);return e}function YI(i,t){if(t._queryParams.loadsAllData())return Gd(i);{let n=t._queryIdentifier;return i.views.get(n)}}function XI(i,t){return YI(i,t)!=null}function kn(i){return Gd(i)!=null}function Gd(i){for(let t of i.views.values())if(t.query._queryParams.loadsAllData())return t;return null}var Ud;function NO(i){L(!Ud,"__referenceConstructor has already been defined"),Ud=i}function FO(){return L(Ud,"Reference.ts has not been loaded"),Ud}var LO=1,Bd=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Pt(null),this.pendingWriteTree_=pO(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function ZI(i,t,e,n,r){return rO(i.pendingWriteTree_,t,e,n,r),r?Ya(i,new Fs(jI(),t,e)):[]}function pr(i,t,e=!1){let n=sO(i.pendingWriteTree_,t);if(oO(i.pendingWriteTree_,t)){let s=new Pt(null);return n.snap!=null?s=s.set(_e(),!0):Dt(n.children,o=>{s=s.set(new Ce(o),!0)}),Ya(i,new zp(n.path,s,e))}else return[]}function Kd(i,t,e){return Ya(i,new Fs(_g(),t,e))}function VO(i,t,e){let n=Pt.fromObject(e);return Ya(i,new Nd(_g(),t,n))}function jO(i,t){return Ya(i,new Od(_g(),t))}function UO(i,t,e){let n=Cg(i,e);if(n){let r=Tg(n),s=r.path,o=r.queryId,c=Rt(s,t),l=new Od(vg(o),c);return xg(i,s,l)}else return[]}function Jp(i,t,e,n,r=!1){let s=t._path,o=i.syncPointTree_.get(s),c=[];if(o&&(t._queryIdentifier==="default"||XI(o,t))){let l=OO(o,t,e,n);DO(o)&&(i.syncPointTree_=i.syncPointTree_.remove(s));let u=l.removed;if(c=l.events,!r){let m=u.findIndex(_=>_._queryParams.loadsAllData())!==-1,p=i.syncPointTree_.findOnPath(s,(_,S)=>kn(S));if(m&&!p){let _=i.syncPointTree_.subtree(s);if(!_.isEmpty()){let S=$O(_);for(let A=0;A<S.length;++A){let k=S[A],F=k.query,ce=tE(i,k);i.listenProvider_.startListening(Ua(F),zd(i,F),ce.hashFn,ce.onComplete)}}}!p&&u.length>0&&!n&&(m?i.listenProvider_.stopListening(Ua(t),null):u.forEach(_=>{let S=i.queryToTagMap.get(Qd(_));i.listenProvider_.stopListening(Ua(_),S)}))}qO(i,u)}return c}function BO(i,t,e,n){let r=Cg(i,n);if(r!=null){let s=Tg(r),o=s.path,c=s.queryId,l=Rt(o,t),u=new Fs(vg(c),l,e);return xg(i,o,u)}else return[]}function zO(i,t,e,n){let r=Cg(i,n);if(r){let s=Tg(r),o=s.path,c=s.queryId,l=Rt(o,t),u=Pt.fromObject(e),m=new Nd(vg(c),l,u);return xg(i,o,m)}else return[]}function nI(i,t,e,n=!1){let r=t._path,s=null,o=!1;i.syncPointTree_.foreachOnPath(r,(_,S)=>{let A=Rt(_,r);s=s||ks(S,A),o=o||kn(S)});let c=i.syncPointTree_.get(r);c?(o=o||kn(c),s=s||ks(c,_e())):(c=new Zp,i.syncPointTree_=i.syncPointTree_.set(r,c));let l;s!=null?l=!0:(l=!1,s=J.EMPTY_NODE,i.syncPointTree_.subtree(r).foreachChild((S,A)=>{let k=ks(A,_e());k&&(s=s.updateImmediateChild(S,k))}));let u=XI(c,t);if(!u&&!t._queryParams.loadsAllData()){let _=Qd(t);L(!i.queryToTagMap.has(_),"View does not exist, but we have a tag");let S=WO();i.queryToTagMap.set(_,S),i.tagToQueryMap.set(S,_)}let m=bg(i.pendingWriteTree_,r),p=MO(c,t,e,m,s,l);if(!u&&!o&&!n){let _=YI(c,t);p=p.concat(HO(i,t,_))}return p}function Eg(i,t,e){let r=i.pendingWriteTree_,s=i.syncPointTree_.findOnPath(t,(o,c)=>{let l=Rt(o,t),u=ks(c,l);if(u)return u});return $I(r,t,s,e,!0)}function Ya(i,t){return JI(t,i.syncPointTree_,null,bg(i.pendingWriteTree_,_e()))}function JI(i,t,e,n){if(oe(i.path))return eE(i,t,e,n);{let r=t.get(_e());e==null&&r!=null&&(e=ks(r,_e()));let s=[],o=ne(i.path),c=i.operationForChild(o),l=t.children.get(o);if(l&&c){let u=e?e.getImmediateChild(o):null,m=qI(n,o);s=s.concat(JI(c,l,u,m))}return r&&(s=s.concat(Ig(r,i,n,e))),s}}function eE(i,t,e,n){let r=t.get(_e());e==null&&r!=null&&(e=ks(r,_e()));let s=[];return t.children.inorderTraversal((o,c)=>{let l=e?e.getImmediateChild(o):null,u=qI(n,o),m=i.operationForChild(o);m&&(s=s.concat(eE(m,c,l,u)))}),r&&(s=s.concat(Ig(r,i,n,e))),s}function tE(i,t){let e=t.query,n=zd(i,e);return{hashFn:()=>(TO(t)||J.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return n?UO(i,e._path,n):jO(i,e._path);{let s=aM(r,e);return Jp(i,e,null,s)}}}}function zd(i,t){let e=Qd(t);return i.queryToTagMap.get(e)}function Qd(i){return i._path.toString()+"$"+i._queryIdentifier}function Cg(i,t){return i.tagToQueryMap.get(t)}function Tg(i){let t=i.indexOf("$");return L(t!==-1&&t<i.length-1,"Bad queryKey."),{queryId:i.substr(t+1),path:new Ce(i.substr(0,t))}}function xg(i,t,e){let n=i.syncPointTree_.get(t);L(n,"Missing sync point for query tag that we're tracking");let r=bg(i.pendingWriteTree_,t);return Ig(n,e,r,null)}function $O(i){return i.fold((t,e,n)=>{if(e&&kn(e))return[Gd(e)];{let r=[];return e&&(r=QI(e)),Dt(n,(s,o)=>{r=r.concat(o)}),r}})}function Ua(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new(FO())(i._repo,i._path):i}function qO(i,t){for(let e=0;e<t.length;++e){let n=t[e];if(!n._queryParams.loadsAllData()){let r=Qd(n),s=i.queryToTagMap.get(r);i.queryToTagMap.delete(r),i.tagToQueryMap.delete(s)}}}function WO(){return LO++}function HO(i,t,e){let n=t._path,r=zd(i,t),s=tE(i,e),o=i.listenProvider_.startListening(Ua(t),r,s.hashFn,s.onComplete),c=i.syncPointTree_.subtree(n);if(r)L(!kn(c.value),"If we're adding a query, it shouldn't be shadowed");else{let l=c.fold((u,m,p)=>{if(!oe(u)&&m&&kn(m))return[Gd(m).query];{let _=[];return m&&(_=_.concat(QI(m).map(S=>S.query))),Dt(p,(S,A)=>{_=_.concat(A)}),_}});for(let u=0;u<l.length;++u){let m=l[u];i.listenProvider_.stopListening(Ua(m),zd(i,m))}}return o}var eg=class i{constructor(t){this.node_=t}getImmediateChild(t){let e=this.node_.getImmediateChild(t);return new i(e)}node(){return this.node_}},tg=class i{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){let e=Ge(this.path_,t);return new i(this.syncTree_,e)}node(){return Eg(this.syncTree_,this.path_)}},GO=function(i){return i=i||{},i.timestamp=i.timestamp||new Date().getTime(),i},rI=function(i,t,e){if(!i||typeof i!="object")return i;if(L(".sv"in i,"Unexpected leaf node or priority contents"),typeof i[".sv"]=="string")return KO(i[".sv"],t,e);if(typeof i[".sv"]=="object")return QO(i[".sv"],t);L(!1,"Unexpected server value: "+JSON.stringify(i,null,2))},KO=function(i,t,e){switch(i){case"timestamp":return e.timestamp;default:L(!1,"Unexpected server value: "+i)}},QO=function(i,t,e){i.hasOwnProperty("increment")||L(!1,"Unexpected server value: "+JSON.stringify(i,null,2));let n=i.increment;typeof n!="number"&&L(!1,"Unexpected increment value: "+n);let r=t.node();if(L(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return n;let o=r.getValue();return typeof o!="number"?n:o+n},YO=function(i,t,e,n){return Sg(t,new tg(e,i),n)},iE=function(i,t,e){return Sg(i,new eg(t),e)};function Sg(i,t,e){let n=i.getPriority().val(),r=rI(n,t.getImmediateChild(".priority"),e),s;if(i.isLeafNode()){let o=i,c=rI(o.getValue(),t,e);return c!==o.getValue()||r!==o.getPriority().val()?new Ms(c,it(r)):i}else{let o=i;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new Ms(r))),o.forEachChild(Pe,(c,l)=>{let u=Sg(l,t.getImmediateChild(c),e);u!==l&&(s=s.updateImmediateChild(c,u))}),s}}var Wa=class{constructor(t="",e=null,n={children:{},childCount:0}){this.name=t,this.parent=e,this.node=n}};function Ag(i,t){let e=t instanceof Ce?t:new Ce(t),n=i,r=ne(e);for(;r!==null;){let s=Zn(n.node.children,r)||{children:{},childCount:0};n=new Wa(r,n,s),e=xe(e),r=ne(e)}return n}function Us(i){return i.node.value}function nE(i,t){i.node.value=t,ig(i)}function rE(i){return i.node.childCount>0}function XO(i){return Us(i)===void 0&&!rE(i)}function Yd(i,t){Dt(i.node.children,(e,n)=>{t(new Wa(e,i,n))})}function sE(i,t,e,n){e&&!n&&t(i),Yd(i,r=>{sE(r,t,!0,n)}),e&&n&&t(i)}function ZO(i,t,e){let n=e?i:i.parent;for(;n!==null;){if(t(n))return!0;n=n.parent}return!1}function Xa(i){return new Ce(i.parent===null?i.name:Xa(i.parent)+"/"+i.name)}function ig(i){i.parent!==null&&JO(i.parent,i.name,i)}function JO(i,t,e){let n=XO(e),r=Ut(i.node.children,t);n&&r?(delete i.node.children[t],i.node.childCount--,ig(i)):!n&&!r&&(i.node.children[t]=e.node,i.node.childCount++,ig(i))}var eN=/[\[\].#$\/\u0000-\u001F\u007F]/,tN=/[\[\].#$\u0000-\u001F\u007F]/,hp=10*1024*1024,oE=function(i){return typeof i=="string"&&i.length!==0&&!eN.test(i)},aE=function(i){return typeof i=="string"&&i.length!==0&&!tN.test(i)},iN=function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),aE(i)};var nN=function(i,t,e,n){n&&t===void 0||Rg(zl(i,"value"),t,e)},Rg=function(i,t,e){let n=e instanceof Ce?new xp(e,i):e;if(t===void 0)throw new Error(i+"contains undefined "+mr(n));if(typeof t=="function")throw new Error(i+"contains a function "+mr(n)+" with contents = "+t.toString());if(uI(t))throw new Error(i+"contains "+t.toString()+" "+mr(n));if(typeof t=="string"&&t.length>hp/3&&fa(t)>hp)throw new Error(i+"contains a string greater than "+hp+" utf8 bytes "+mr(n)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let r=!1,s=!1;if(Dt(t,(o,c)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!oE(o)))throw new Error(i+" contains an invalid key ("+o+") "+mr(n)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);FM(n,o),Rg(i,c,n),LM(n)}),r&&s)throw new Error(i+' contains ".value" child '+mr(n)+" in addition to actual children.")}};var cE=function(i,t,e,n){if(!(n&&e===void 0)&&!aE(e))throw new Error(zl(i,t)+'was an invalid path = "'+e+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},rN=function(i,t,e,n){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),cE(i,t,e,n)},sN=function(i,t){if(ne(t)===".info")throw new Error(i+" failed = Can't modify data under /.info/")},oN=function(i,t){let e=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!oE(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||e.length!==0&&!iN(e))throw new Error(zl(i,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var ng=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function kg(i,t){let e=null;for(let n=0;n<t.length;n++){let r=t[n],s=r.getPath();e!==null&&!fg(s,e.path)&&(i.eventLists_.push(e),e=null),e===null&&(e={events:[],path:s}),e.events.push(r)}e&&i.eventLists_.push(e)}function lE(i,t,e){kg(i,e),dE(i,n=>fg(n,t))}function Zi(i,t,e){kg(i,e),dE(i,n=>di(n,t)||di(t,n))}function dE(i,t){i.recursionDepth_++;let e=!0;for(let n=0;n<i.eventLists_.length;n++){let r=i.eventLists_[n];if(r){let s=r.path;t(s)?(aN(i.eventLists_[n]),i.eventLists_[n]=null):e=!1}}e&&(i.eventLists_=[]),i.recursionDepth_--}function aN(i){for(let t=0;t<i.events.length;t++){let e=i.events[t];if(e!==null){i.events[t]=null;let n=e.getEventRunner();gr&&ht("event: "+e.toString()),js(n)}}}var cN="repo_interrupt",lN=25,rg=class{constructor(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ng,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Md(),this.transactionQueueTree_=new Wa,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function dN(i,t,e){if(i.stats_=mg(i.repoInfo_),i.forceRestClient_||uM())i.server_=new Lp(i.repoInfo_,(n,r,s,o)=>{sI(i,n,r,s,o)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>oI(i,!0),0);else{if(typeof e<"u"&&e!==null){if(typeof e!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{He(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}i.persistentConnection_=new pg(i.repoInfo_,t,(n,r,s,o)=>{sI(i,n,r,s,o)},n=>{oI(i,n)},n=>{hN(i,n)},i.authTokenProvider_,i.appCheckProvider_,e),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(n=>{i.server_.refreshAuthToken(n)}),i.appCheckProvider_.addTokenChangeListener(n=>{i.server_.refreshAppCheckToken(n.token)}),i.statsReporter_=mM(i.repoInfo_,()=>new Bp(i.stats_,i.server_)),i.infoData_=new Vp,i.infoSyncTree_=new Bd({startListening:(n,r,s,o)=>{let c=[],l=i.infoData_.getNode(n._path);return l.isEmpty()||(c=Kd(i.infoSyncTree_,n._path,l),setTimeout(()=>{o("ok")},0)),c},stopListening:()=>{}}),Pg(i,"connected",!1),i.serverSyncTree_=new Bd({startListening:(n,r,s,o)=>(i.server_.listen(n,s,r,(c,l)=>{let u=o(c,l);Zi(i.eventQueue_,n._path,u)}),[]),stopListening:(n,r)=>{i.server_.unlisten(n,r)}})}function uN(i){let e=i.infoData_.getNode(new Ce(".info/serverTimeOffset")).val()||0;return new Date().getTime()+e}function Dg(i){return GO({timestamp:uN(i)})}function sI(i,t,e,n,r){i.dataUpdateCount++;let s=new Ce(t);e=i.interceptServerDataCallback_?i.interceptServerDataCallback_(t,e):e;let o=[];if(r)if(n){let l=ma(e,u=>it(u));o=zO(i.serverSyncTree_,s,l,r)}else{let l=it(e);o=BO(i.serverSyncTree_,s,l,r)}else if(n){let l=ma(e,u=>it(u));o=VO(i.serverSyncTree_,s,l)}else{let l=it(e);o=Kd(i.serverSyncTree_,s,l)}let c=s;o.length>0&&(c=Xd(i,s)),Zi(i.eventQueue_,c,o)}function oI(i,t){Pg(i,"connected",t),t===!1&&fN(i)}function hN(i,t){Dt(t,(e,n)=>{Pg(i,e,n)})}function Pg(i,t,e){let n=new Ce("/.info/"+t),r=it(e);i.infoData_.updateSnapshot(n,r);let s=Kd(i.infoSyncTree_,n,r);Zi(i.eventQueue_,n,s)}function uE(i){return i.nextWriteId_++}function mN(i,t,e,n,r){Mg(i,"set",{path:t.toString(),value:e,priority:n});let s=Dg(i),o=it(e,n),c=Eg(i.serverSyncTree_,t),l=iE(o,c,s),u=uE(i),m=ZI(i.serverSyncTree_,t,l,u,!0);kg(i.eventQueue_,m),i.server_.put(t.toString(),o.val(!0),(_,S)=>{let A=_==="ok";A||kt("set at "+t+" failed: "+_);let k=pr(i.serverSyncTree_,u,!A);Zi(i.eventQueue_,t,k),_N(i,r,_,S)});let p=gE(i,t);Xd(i,p),Zi(i.eventQueue_,p,[])}function fN(i){Mg(i,"onDisconnectEvents");let t=Dg(i),e=Md();jp(i.onDisconnect_,_e(),(r,s)=>{let o=YO(r,s,i.serverSyncTree_,t);VI(e,r,o)});let n=[];jp(e,_e(),(r,s)=>{n=n.concat(Kd(i.serverSyncTree_,r,s));let o=gE(i,r);Xd(i,o)}),i.onDisconnect_=Md(),Zi(i.eventQueue_,_e(),n)}function pN(i,t,e){let n;ne(t._path)===".info"?n=nI(i.infoSyncTree_,t,e):n=nI(i.serverSyncTree_,t,e),lE(i.eventQueue_,t._path,n)}function aI(i,t,e){let n;ne(t._path)===".info"?n=Jp(i.infoSyncTree_,t,e):n=Jp(i.serverSyncTree_,t,e),lE(i.eventQueue_,t._path,n)}function gN(i){i.persistentConnection_&&i.persistentConnection_.interrupt(cN)}function Mg(i,...t){let e="";i.persistentConnection_&&(e=i.persistentConnection_.id+":"),ht(e,...t)}function _N(i,t,e,n){t&&js(()=>{if(e==="ok")t(null);else{let r=(e||"error").toUpperCase(),s=r;n&&(s+=": "+n);let o=new Error(s);o.code=r,t(o)}})}function hE(i,t,e){return Eg(i.serverSyncTree_,t,e)||J.EMPTY_NODE}function Og(i,t=i.transactionQueueTree_){if(t||Zd(i,t),Us(t)){let e=fE(i,t);L(e.length>0,"Sending zero length transaction queue"),e.every(r=>r.status===0)&&vN(i,Xa(t),e)}else rE(t)&&Yd(t,e=>{Og(i,e)})}function vN(i,t,e){let n=e.map(u=>u.currentWriteId),r=hE(i,t,n),s=r,o=r.hash();for(let u=0;u<e.length;u++){let m=e[u];L(m.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),m.status=1,m.retryCount++;let p=Rt(t,m.path);s=s.updateChild(p,m.currentOutputSnapshotRaw)}let c=s.val(!0),l=t;i.server_.put(l.toString(),c,u=>{Mg(i,"transaction put response",{path:l.toString(),status:u});let m=[];if(u==="ok"){let p=[];for(let _=0;_<e.length;_++)e[_].status=2,m=m.concat(pr(i.serverSyncTree_,e[_].currentWriteId)),e[_].onComplete&&p.push(()=>e[_].onComplete(null,!0,e[_].currentOutputSnapshotResolved)),e[_].unwatcher();Zd(i,Ag(i.transactionQueueTree_,t)),Og(i,i.transactionQueueTree_),Zi(i.eventQueue_,t,m);for(let _=0;_<p.length;_++)js(p[_])}else{if(u==="datastale")for(let p=0;p<e.length;p++)e[p].status===3?e[p].status=4:e[p].status=0;else{kt("transaction at "+l.toString()+" failed: "+u);for(let p=0;p<e.length;p++)e[p].status=4,e[p].abortReason=u}Xd(i,t)}},o)}function Xd(i,t){let e=mE(i,t),n=Xa(e),r=fE(i,e);return bN(i,r,n),n}function bN(i,t,e){if(t.length===0)return;let n=[],r=[],o=t.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<t.length;c++){let l=t[c],u=Rt(e,l.path),m=!1,p;if(L(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)m=!0,p=l.abortReason,r=r.concat(pr(i.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=lN)m=!0,p="maxretry",r=r.concat(pr(i.serverSyncTree_,l.currentWriteId,!0));else{let _=hE(i,l.path,o);l.currentInputSnapshot=_;let S=t[c].update(_.val());if(S!==void 0){Rg("transaction failed: Data returned ",S,l.path);let A=it(S);typeof S=="object"&&S!=null&&Ut(S,".priority")||(A=A.updatePriority(_.getPriority()));let F=l.currentWriteId,ce=Dg(i),pe=iE(A,_,ce);l.currentOutputSnapshotRaw=A,l.currentOutputSnapshotResolved=pe,l.currentWriteId=uE(i),o.splice(o.indexOf(F),1),r=r.concat(ZI(i.serverSyncTree_,l.path,pe,l.currentWriteId,l.applyLocally)),r=r.concat(pr(i.serverSyncTree_,F,!0))}else m=!0,p="nodata",r=r.concat(pr(i.serverSyncTree_,l.currentWriteId,!0))}Zi(i.eventQueue_,e,r),r=[],m&&(t[c].status=2,function(_){setTimeout(_,Math.floor(0))}(t[c].unwatcher),t[c].onComplete&&(p==="nodata"?n.push(()=>t[c].onComplete(null,!1,t[c].currentInputSnapshot)):n.push(()=>t[c].onComplete(new Error(p),!1,null))))}Zd(i,i.transactionQueueTree_);for(let c=0;c<n.length;c++)js(n[c]);Og(i,i.transactionQueueTree_)}function mE(i,t){let e,n=i.transactionQueueTree_;for(e=ne(t);e!==null&&Us(n)===void 0;)n=Ag(n,e),t=xe(t),e=ne(t);return n}function fE(i,t){let e=[];return pE(i,t,e),e.sort((n,r)=>n.order-r.order),e}function pE(i,t,e){let n=Us(t);if(n)for(let r=0;r<n.length;r++)e.push(n[r]);Yd(t,r=>{pE(i,r,e)})}function Zd(i,t){let e=Us(t);if(e){let n=0;for(let r=0;r<e.length;r++)e[r].status!==2&&(e[n]=e[r],n++);e.length=n,nE(t,e.length>0?e:void 0)}Yd(t,n=>{Zd(i,n)})}function gE(i,t){let e=Xa(mE(i,t)),n=Ag(i.transactionQueueTree_,t);return ZO(n,r=>{mp(i,r)}),mp(i,n),sE(n,r=>{mp(i,r)}),e}function mp(i,t){let e=Us(t);if(e){let n=[],r=[],s=-1;for(let o=0;o<e.length;o++)e[o].status===3||(e[o].status===1?(L(s===o-1,"All SENT items should be at beginning of queue."),s=o,e[o].status=3,e[o].abortReason="set"):(L(e[o].status===0,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(pr(i.serverSyncTree_,e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?nE(t,void 0):e.length=s+1,Zi(i.eventQueue_,Xa(t),r);for(let o=0;o<n.length;o++)js(n[o])}}function yN(i){let t="",e=i.split("/");for(let n=0;n<e.length;n++)if(e[n].length>0){let r=e[n];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}function wN(i){let t={};i.charAt(0)==="?"&&(i=i.substring(1));for(let e of i.split("&")){if(e.length===0)continue;let n=e.split("=");n.length===2?t[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):kt(`Invalid query segment '${e}' in query '${i}'`)}return t}var cI=function(i,t){let e=IN(i),n=e.namespace;e.domain==="firebase.com"&&Yi(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||n==="undefined")&&e.domain!=="localhost"&&Yi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||iM();let r=e.scheme==="ws"||e.scheme==="wss";return{repoInfo:new Td(e.host,e.secure,n,r,t,"",n!==e.subdomain),path:new Ce(e.pathString)}},IN=function(i){let t="",e="",n="",r="",s="",o=!0,c="https",l=443;if(typeof i=="string"){let u=i.indexOf("//");u>=0&&(c=i.substring(0,u-1),i=i.substring(u+2));let m=i.indexOf("/");m===-1&&(m=i.length);let p=i.indexOf("?");p===-1&&(p=i.length),t=i.substring(0,Math.min(m,p)),m<p&&(r=yN(i.substring(m,p)));let _=wN(i.substring(Math.min(i.length,p)));u=t.indexOf(":"),u>=0?(o=c==="https"||c==="wss",l=parseInt(t.substring(u+1),10)):u=t.length;let S=t.slice(0,u);if(S.toLowerCase()==="localhost")e="localhost";else if(S.split(".").length<=2)e=S;else{let A=t.indexOf(".");n=t.substring(0,A).toLowerCase(),e=t.substring(A+1),s=n}"ns"in _&&(s=_.ns)}return{host:t,port:l,domain:e,subdomain:n,secure:o,scheme:c,pathString:r,namespace:s}};var $d=class{constructor(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}getPath(){let t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+He(this.snapshot.exportVal())}},qd=class{constructor(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var sg=class{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return L(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}};var og=class i{constructor(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}get key(){return oe(this._path)?null:RI(this._path)}get ref(){return new Ji(this._repo,this._path)}get _queryIdentifier(){let t=H0(this._queryParams),e=hg(t);return e==="{}"?"default":e}get _queryObject(){return H0(this._queryParams)}isEqual(t){if(t=dt(t),!(t instanceof i))return!1;let e=this._repo===t._repo,n=fg(this._path,t._path),r=this._queryIdentifier===t._queryIdentifier;return e&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+NM(this._path)}};var Ji=class i extends og{constructor(t,e){super(t,e,new Fp,!1)}get parent(){let t=DI(this._path);return t===null?null:new i(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}},Wd=class i{constructor(t,e,n){this._node=t,this.ref=e,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){let e=new Ce(t),n=Ha(this.ref,t);return new i(this._node.getChild(e),n,Pe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,r)=>t(new i(r,Ha(this.ref,n),Pe)))}hasChild(t){let e=new Ce(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function _E(i,t){return i=dt(i),i._checkNotDeleted("ref"),t!==void 0?Ha(i._root,t):i._root}function Ha(i,t){return i=dt(i),ne(i._path)===null?rN("child","path",t,!1):cE("child","path",t,!1),new Ji(i._repo,Ge(i._path,t))}function vE(i,t){i=dt(i),sN("set",i._path),nN("set",t,i._path,!1);let e=new bn;return mN(i._repo,i._path,t,null,e.wrapCallback(()=>{})),e.promise}var ag=class i{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,e){let n=e._queryParams.getIndex();return new $d("value",this,new Wd(t.snapshotNode,new Ji(e._repo,e._path),n))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new qd(this,t,e):null}matches(t){return t instanceof i?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},cg=class i{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e=t==="children_added"?"child_added":t;return e=e==="children_removed"?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new qd(this,t,e):null}createEvent(t,e){L(t.childName!=null,"Child events should have a childName.");let n=Ha(new Ji(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new $d(t.type,this,new Wd(t.snapshotNode,n,r),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof i?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function EN(i,t,e,n,r){let s;if(typeof n=="object"&&(s=void 0,r=n),typeof n=="function"&&(s=n),r&&r.onlyOnce){let l=e,u=(m,p)=>{aI(i._repo,i,c),l(m,p)};u.userCallback=e.userCallback,u.context=e.context,e=u}let o=new sg(e,s||void 0),c=t==="value"?new ag(o):new cg(t,o);return pN(i._repo,i,c),()=>aI(i._repo,i,c)}function bE(i,t,e,n){return EN(i,"value",t,e,n)}RO(Ji);NO(Ji);var CN="FIREBASE_DATABASE_EMULATOR_HOST",lg={},TN=!1;function xN(i,t,e,n){i.repoInfo_=new Td(`${t}:${e}`,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams,!0),n&&(i.authTokenProvider_=n)}function SN(i,t,e,n,r){let s=n||i.options.databaseURL;s===void 0&&(i.options.projectId||Yi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ht("Using default host for project ",i.options.projectId),s=`${i.options.projectId}-default-rtdb.firebaseio.com`);let o=cI(s,r),c=o.repoInfo,l,u;typeof process<"u"&&process.env&&(u=process.env[CN]),u?(l=!0,s=`http://${u}?ns=${c.namespace}`,o=cI(s,r),c=o.repoInfo):l=!o.repoInfo.secure;let m=r&&l?new La(La.OWNER):new bp(i.name,i.options,t);oN("Invalid Firebase Database URL",o),oe(o.path)||Yi("Database URL must point to the root of a Firebase Database (not including a child path).");let p=RN(c,i,m,new vp(i.name,e));return new dg(p,i)}function AN(i,t){let e=lg[t];(!e||e[i.key]!==i)&&Yi(`Database ${t}(${i.repoInfo_}) has already been deleted.`),gN(i),delete e[i.key]}function RN(i,t,e,n){let r=lg[t.name];r||(r={},lg[t.name]=r);let s=r[i.toURLString()];return s&&Yi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new rg(i,TN,e,n),r[i.toURLString()]=s,s}var dg=class{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(dN(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ji(this._repo,_e())),this._rootInternal}_delete(){return this._rootInternal!==null&&(AN(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Yi("Cannot call "+t+" on a deleted database.")}};function yE(i=$i(),t){let e=zi(i,"database").getImmediate({identifier:t});if(!e._instanceStarted){let n=Vl("database");n&&wE(e,...n)}return e}function wE(i,t,e,n={}){i=dt(i),i._checkNotDeleted("useEmulator"),i._instanceStarted&&Yi("Cannot call useEmulator() after instance has already been initialized.");let r=i._repoInternal,s;if(r.repoInfo_.nodeAdmin)n.mockUserToken&&Yi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new La(La.OWNER);else if(n.mockUserToken){let o=typeof n.mockUserToken=="string"?n.mockUserToken:jl(n.mockUserToken,i.app.options.projectId);s=new La(o)}xN(r,t,e,s)}function kN(i){JP(zt),Bt(new ut("database",(t,{instanceIdentifier:e})=>{let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return SN(n,r,s,e)},"PUBLIC").setMultipleInstances(!0)),Ie(R0,k0,i),Ie(R0,k0,"esm2017")}pg.prototype.simpleListen=function(i,t){this.sendRequest("q",{p:i},t)};pg.prototype.echo=function(i,t){this.sendRequest("echo",{d:i},t)};kN();var yr=class{constructor(t){return t}},IE="database",Ng=class{constructor(){return nr(IE)}};var Fg=new U("angularfire2.database-instances");function DN(i,t){let e=bs(IE,i,t);return e&&new yr(e)}function PN(i){return(t,e)=>{let n=t.runOutsideAngular(()=>i(e));return new yr(n)}}var MN={provide:Ng,deps:[[new De,Fg]]},ON={provide:yr,useFactory:DN,deps:[[new De,Fg],ai]};function EE(i,...t){return Ie("angularfire",qi.full,"rtdb"),gt([ON,MN,{provide:Fg,useFactory:PN(i),multi:!0,deps:[q,$e,In,Wi,[new De,lr],[new De,wn],...t]}])}var Jd=wt(yE,!0);var CE=wt(bE,!0);var eu=wt(_E,!0);var Lg=wt(vE,!0);var qe=class i{constructor(t,e){this.auth=t;this.database=e;this.user$=t0(this.auth),this.database=Jd(),this.userSubscription=this.user$.subscribe(n=>{CE(eu(this.database,`/users/${n?.uid}`),r=>{let s=r.val()&&r.val().collection||[];this.userCollection.next(s)},{onlyOnce:!0})})}user$;userSubscription;userCollection=new at([]);ngOnDestroy(){this.userSubscription.unsubscribe()}login(t,e){return this.wrap(r0(this.auth,t,e))}logout(){return this.wrap(s0(this.auth))}register(t,e){return this.wrap(i0(this.auth,t,e))}initializeUser(){this.user$.pipe(ct(1)).subscribe(t=>{Lg(eu(this.database,"users/"+t.uid),{email:t.email,collection:[]})})}addFlashcardSet(t){return this.user$.pipe(W(e=>e?Lg(eu(this.database,`users/${e.uid}`),{email:e.email,collection:[t]}):null))}wrap=t=>Io(()=>je(t));static \u0275fac=function(e){return new(e||i)(R(cr),R(yr))};static \u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})};var TE=i=>{let t=N(qe),e=N(Ze);return t.user$.pipe(W(n=>{let r=i.routeConfig?.path;if(n){if(["profile"].some(s=>s===r))return!0}else if(["login","register"].some(s=>s===r))return!0;return new Yn(e.parseUrl("/"))}))};var Ug;try{Ug=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Ug=!1}var Me=(()=>{class i{constructor(e){this._platformId=e,this.isBrowser=this._platformId?cb(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Ug)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(n){return new(n||i)(R(Ht))}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Za;function FN(){if(Za==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Za=!0}))}finally{Za=Za||!1}return Za}function Dn(i){return FN()?i:!!i.capture}var wr;function xE(){if(wr==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return wr=!1,wr;if("scrollBehavior"in document.documentElement.style)wr=!0;else{let i=Element.prototype.scrollTo;i?wr=!/\{\s*\[native code\]\s*\}/.test(i.toString()):wr=!1}}return wr}var jg;function LN(){if(jg==null){let i=typeof document<"u"?document.head:null;jg=!!(i&&(i.createShadowRoot||i.attachShadow))}return jg}function SE(i){if(LN()){let t=i.getRootNode?i.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function ei(i){return i.composedPath?i.composedPath()[0]:i.target}function Ja(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function tu(i,...t){return t.length?t.some(e=>i[e]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}function Bs(i){return Array.isArray(i)?i:[i]}function Le(i){return i==null?"":typeof i=="string"?i:`${i}px`}function en(i){return i instanceof ae?i.nativeElement:i}var VN=(()=>{class i{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var iu=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=H({providers:[VN]})}}return i})();var AE=new Set,Er,jN=(()=>{class i{constructor(e,n){this._platform=e,this._nonce=n,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):BN}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&UN(e,this._nonce),this._matchMedia(e)}static{this.\u0275fac=function(n){return new(n||i)(R(Me),R(So,8))}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function UN(i,t){if(!AE.has(i))try{Er||(Er=document.createElement("style"),t&&Er.setAttribute("nonce",t),Er.setAttribute("type","text/css"),document.head.appendChild(Er)),Er.sheet&&(Er.sheet.insertRule(`@media ${i} {body{ }}`,0),AE.add(i))}catch(e){console.error(e)}}function BN(i){return{matches:i==="all"||i==="",media:i,addListener:()=>{},removeListener:()=>{}}}var kE=(()=>{class i{constructor(e,n){this._mediaMatcher=e,this._zone=n,this._queries=new Map,this._destroySubject=new le}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return RE(Bs(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let r=RE(Bs(e)).map(o=>this._registerQuery(o).observable),s=Fr(r);return s=Oc(s.pipe(ct(1)),s.pipe(Lc(1),Fc(0))),s.pipe(W(o=>{let c={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:u})=>{c.matches=c.matches||l,c.breakpoints[u]=l}),c}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);let n=this._mediaMatcher.matchMedia(e),s={observable:new $t(o=>{let c=l=>this._zone.run(()=>o.next(l));return n.addListener(c),()=>{n.removeListener(c)}}).pipe(Oi(n),W(({matches:o})=>({query:e,matches:o})),Nt(this._destroySubject)),mql:n};return this._queries.set(e,s),s}static{this.\u0275fac=function(n){return new(n||i)(R(jN),R(q))}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function RE(i){return i.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}var i1=200,zg=class{constructor(t,e){this._letterKeyStream=new le,this._items=[],this._selectedItemIndex=-1,this._pressedLetters=[],this._selectedItem=new le,this.selectedItem=this._selectedItem;let n=typeof e?.debounceInterval=="number"?e.debounceInterval:i1;e?.skipPredicate&&(this._skipPredicateFn=e.skipPredicate),this.setItems(t),this._setupKeyHandler(n)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(t){this._selectedItemIndex=t}setItems(t){this._items=t}handleKey(t){let e=t.keyCode;t.key&&t.key.length===1?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(t){this._letterKeyStream.pipe(Ae(e=>this._pressedLetters.push(e)),Fc(t),Ue(()=>this._pressedLetters.length>0),W(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(e=>{for(let n=1;n<this._items.length+1;n++){let r=(this._selectedItemIndex+n)%this._items.length,s=this._items[r];if(!this._skipPredicateFn?.(s)&&s.getLabel?.().toLocaleUpperCase().trim().indexOf(e)===0){this._selectedItem.next(s);break}}this._pressedLetters=[]})}},$g=class{constructor(t,e){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._typeaheadSubscription=Et.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=n=>n.disabled,this.tabOut=new le,this.change=new le,t instanceof xo?this._itemChangesSubscription=t.changes.subscribe(n=>this._itemsChanged(n.toArray())):Ch(t)&&(this._effectRef=eb(()=>this._itemsChanged(t()),{injector:e}))}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){this._typeaheadSubscription.unsubscribe();let e=this._getItemsArray();return this._typeahead=new zg(e,{debounceInterval:typeof t=="number"?t:void 0,skipPredicate:n=>this._skipPredicateFn(n)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(n=>{this.setActiveItem(n)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}withPageUpDown(t=!0,e=10){return this._pageUpAndDown={enabled:t,delta:e},this}setActiveItem(t){let e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){let e=t.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!t[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(e){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let s=this._activeItemIndex+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(s<o?s:o-1,-1);break}else return;default:(r||tu(t,"shiftKey"))&&this._typeahead?.handleKey(t);return}this._typeahead?.reset(),t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){let e=this._getItemsArray(),n=typeof t=="number"?t:e.indexOf(t),r=e[n];this._activeItem=r??null,this._activeItemIndex=n,this._typeahead?.setCurrentSelectedItemIndex(n)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){let e=this._getItemsArray();for(let n=1;n<=e.length;n++){let r=(this._activeItemIndex+t*n+e.length)%e.length,s=e[r];if(!this._skipPredicateFn(s)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){let n=this._getItemsArray();if(n[t]){for(;this._skipPredicateFn(n[t]);)if(t+=e,!n[t])return;this.setActiveItem(t)}}_getItemsArray(){return Ch(this._items)?this._items():this._items instanceof xo?this._items.toArray():this._items}_itemsChanged(t){if(this._typeahead?.setItems(t),this._activeItem){let e=t.indexOf(this._activeItem);e>-1&&e!==this._activeItemIndex&&(this._activeItemIndex=e,this._typeahead?.setCurrentSelectedItemIndex(e))}}};var su=class extends $g{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}};function ec(i){return i.buttons===0||i.detail===0}function tc(i){let t=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var n1=new U("cdk-input-modality-detector-options"),r1={ignoreKeys:[18,17,224,91,16]},ME=650,zs=Dn({passive:!0,capture:!0}),s1=(()=>{class i{get mostRecentModality(){return this._modality.value}constructor(e,n,r,s){this._platform=e,this._mostRecentTarget=null,this._modality=new at(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(c=>c===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=ei(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<ME||(this._modality.next(ec(o)?"keyboard":"mouse"),this._mostRecentTarget=ei(o))},this._onTouchstart=o=>{if(tc(o)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ei(o)},this._options=P(P({},r1),s),this.modalityDetected=this._modality.pipe(Lc(1)),this.modalityChanged=this.modalityDetected.pipe(vh()),e.isBrowser&&n.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,zs),r.addEventListener("mousedown",this._onMousedown,zs),r.addEventListener("touchstart",this._onTouchstart,zs)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,zs),document.removeEventListener("mousedown",this._onMousedown,zs),document.removeEventListener("touchstart",this._onTouchstart,zs))}static{this.\u0275fac=function(n){return new(n||i)(R(Me),R(q),R(X),R(n1,8))}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var ru=function(i){return i[i.IMMEDIATE=0]="IMMEDIATE",i[i.EVENTUAL=1]="EVENTUAL",i}(ru||{}),o1=new U("cdk-focus-monitor-default-options"),nu=Dn({passive:!0,capture:!0}),ic=(()=>{class i{constructor(e,n,r,s,o){this._ngZone=e,this._platform=n,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new le,this._rootNodeFocusAndBlurListener=c=>{let l=ei(c);for(let u=l;u;u=u.parentElement)c.type==="focus"?this._onFocus(c,u):this._onBlur(c,u)},this._document=s,this._detectionMode=o?.detectionMode||ru.IMMEDIATE}monitor(e,n=!1){let r=en(e);if(!this._platform.isBrowser||r.nodeType!==1)return z();let s=SE(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return n&&(o.checkChildren=!0),o.subject;let c={checkChildren:n,subject:new le,rootNode:s};return this._elementInfo.set(r,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(e){let n=en(e),r=this._elementInfo.get(n);r&&(r.subject.complete(),this._setClasses(n),this._elementInfo.delete(n),this._removeGlobalListeners(r))}focusVia(e,n,r){let s=en(e),o=this._getDocument().activeElement;s===o?this._getClosestElementsInfo(s).forEach(([c,l])=>this._originChanged(c,n,l)):(this._setOrigin(n),typeof s.focus=="function"&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,n)=>this.stopMonitoring(n))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return this._detectionMode===ru.EVENTUAL||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,n){e.classList.toggle("cdk-focused",!!n),e.classList.toggle("cdk-touch-focused",n==="touch"),e.classList.toggle("cdk-keyboard-focused",n==="keyboard"),e.classList.toggle("cdk-mouse-focused",n==="mouse"),e.classList.toggle("cdk-program-focused",n==="program")}_setOrigin(e,n=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=e,this._originFromTouchInteraction=e==="touch"&&n,this._detectionMode===ru.IMMEDIATE){clearTimeout(this._originTimeoutId);let r=this._originFromTouchInteraction?ME:1;this._originTimeoutId=setTimeout(()=>this._origin=null,r)}})}_onFocus(e,n){let r=this._elementInfo.get(n),s=ei(e);!r||!r.checkChildren&&n!==s||this._originChanged(n,this._getFocusOrigin(s),r)}_onBlur(e,n){let r=this._elementInfo.get(n);!r||r.checkChildren&&e.relatedTarget instanceof Node&&n.contains(e.relatedTarget)||(this._setClasses(n),this._emitOrigin(r,null))}_emitOrigin(e,n){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(n))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;let n=e.rootNode,r=this._rootNodeFocusListenerCount.get(n)||0;r||this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",this._rootNodeFocusAndBlurListener,nu),n.addEventListener("blur",this._rootNodeFocusAndBlurListener,nu)}),this._rootNodeFocusListenerCount.set(n,r+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Nt(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){let n=e.rootNode;if(this._rootNodeFocusListenerCount.has(n)){let r=this._rootNodeFocusListenerCount.get(n);r>1?this._rootNodeFocusListenerCount.set(n,r-1):(n.removeEventListener("focus",this._rootNodeFocusAndBlurListener,nu),n.removeEventListener("blur",this._rootNodeFocusAndBlurListener,nu),this._rootNodeFocusListenerCount.delete(n))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,n,r){this._setClasses(e,n),this._emitOrigin(r,n),this._lastFocusOrigin=n}_getClosestElementsInfo(e){let n=[];return this._elementInfo.forEach((r,s)=>{(s===e||r.checkChildren&&s.contains(e))&&n.push([s,r])}),n}_isLastInteractionFromInputLabel(e){let{_mostRecentTarget:n,mostRecentModality:r}=this._inputModalityDetector;if(r!=="mouse"||!n||n===e||e.nodeName!=="INPUT"&&e.nodeName!=="TEXTAREA"||e.disabled)return!1;let s=e.labels;if(s){for(let o=0;o<s.length;o++)if(s[o].contains(n))return!0}return!1}static{this.\u0275fac=function(n){return new(n||i)(R(q),R(Me),R(s1),R(X,8),R(o1,8))}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Cr=function(i){return i[i.NONE=0]="NONE",i[i.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",i[i.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",i}(Cr||{}),DE="cdk-high-contrast-black-on-white",PE="cdk-high-contrast-white-on-black",Bg="cdk-high-contrast-active",OE=(()=>{class i{constructor(e,n){this._platform=e,this._document=n,this._breakpointSubscription=N(kE).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Cr.NONE;let e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);let n=this._document.defaultView||window,r=n&&n.getComputedStyle?n.getComputedStyle(e):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Cr.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Cr.BLACK_ON_WHITE}return Cr.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let e=this._document.body.classList;e.remove(Bg,DE,PE),this._hasCheckedHighContrastMode=!0;let n=this.getHighContrastMode();n===Cr.BLACK_ON_WHITE?e.add(Bg,DE):n===Cr.WHITE_ON_BLACK&&e.add(Bg,PE)}}static{this.\u0275fac=function(n){return new(n||i)(R(Me),R(X))}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var a1=new U("cdk-dir-doc",{providedIn:"root",factory:c1});function c1(){return N(X)}var l1=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function d1(i){let t=i?.toLowerCase()||"";return t==="auto"&&typeof navigator<"u"&&navigator?.language?l1.test(navigator.language)?"rtl":"ltr":t==="rtl"?"rtl":"ltr"}var cu=(()=>{class i{constructor(e){if(this.value="ltr",this.change=new Oe,e){let n=e.body?e.body.dir:null,r=e.documentElement?e.documentElement.dir:null;this.value=d1(n||r||"ltr")}}ngOnDestroy(){this.change.complete()}static{this.\u0275fac=function(n){return new(n||i)(R(a1,8))}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Pn=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=H({})}}return i})();function h1(){return!0}var m1=new U("mat-sanity-checks",{providedIn:"root",factory:h1}),ve=(()=>{class i{constructor(e,n,r){this._sanityChecks=n,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return Ja()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[e]}static{this.\u0275fac=function(n){return new(n||i)(R(OE),R(m1,8),R(X))}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=H({imports:[Pn,Pn]})}}return i})();var ti=function(i){return i[i.FADING_IN=0]="FADING_IN",i[i.VISIBLE=1]="VISIBLE",i[i.FADING_OUT=2]="FADING_OUT",i[i.HIDDEN=3]="HIDDEN",i}(ti||{}),Kg=class{constructor(t,e,n,r=!1){this._renderer=t,this.element=e,this.config=n,this._animationForciblyDisabledThroughCss=r,this.state=ti.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},LE=Dn({passive:!0,capture:!0}),Qg=class{constructor(){this._events=new Map,this._delegateEventHandler=t=>{let e=ei(t);e&&this._events.get(t.type)?.forEach((n,r)=>{(r===e||r.contains(e))&&n.forEach(s=>s.handleEvent(t))})}}addHandler(t,e,n,r){let s=this._events.get(e);if(s){let o=s.get(n);o?o.add(r):s.set(n,new Set([r]))}else this._events.set(e,new Map([[n,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,LE)})}removeHandler(t,e,n){let r=this._events.get(t);if(!r)return;let s=r.get(e);s&&(s.delete(n),s.size===0&&r.delete(e),r.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,LE)))}},VE={enterDuration:225,exitDuration:150},f1=800,jE=Dn({passive:!0,capture:!0}),UE=["mousedown","touchstart"],BE=["mouseup","mouseleave","touchend","touchcancel"],du=class i{static{this._eventManager=new Qg}constructor(t,e,n,r){this._target=t,this._ngZone=e,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=en(n))}fadeInRipple(t,e,n={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=P(P({},VE),n.animation);n.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);let o=n.radius||p1(t,e,r),c=t-r.left,l=e-r.top,u=s.enterDuration,m=document.createElement("div");m.classList.add("mat-ripple-element"),m.style.left=`${c-o}px`,m.style.top=`${l-o}px`,m.style.height=`${o*2}px`,m.style.width=`${o*2}px`,n.color!=null&&(m.style.backgroundColor=n.color),m.style.transitionDuration=`${u}ms`,this._containerElement.appendChild(m);let p=window.getComputedStyle(m),_=p.transitionProperty,S=p.transitionDuration,A=_==="none"||S==="0s"||S==="0s, 0s"||r.width===0&&r.height===0,k=new Kg(this,m,n,A);m.style.transform="scale3d(1, 1, 1)",k.state=ti.FADING_IN,n.persistent||(this._mostRecentTransientRipple=k);let F=null;return!A&&(u||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let ce=()=>{F&&(F.fallbackTimer=null),clearTimeout(Q),this._finishRippleTransition(k)},pe=()=>this._destroyRipple(k),Q=setTimeout(pe,u+100);m.addEventListener("transitionend",ce),m.addEventListener("transitioncancel",pe),F={onTransitionEnd:ce,onTransitionCancel:pe,fallbackTimer:Q}}),this._activeRipples.set(k,F),(A||!u)&&this._finishRippleTransition(k),k}fadeOutRipple(t){if(t.state===ti.FADING_OUT||t.state===ti.HIDDEN)return;let e=t.element,n=P(P({},VE),t.config.animation);e.style.transitionDuration=`${n.exitDuration}ms`,e.style.opacity="0",t.state=ti.FADING_OUT,(t._animationForciblyDisabledThroughCss||!n.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let e=en(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,UE.forEach(n=>{i._eventManager.addHandler(this._ngZone,n,e,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{BE.forEach(e=>{this._triggerElement.addEventListener(e,this,jE)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===ti.FADING_IN?this._startFadeOutTransition(t):t.state===ti.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let e=t===this._mostRecentTransientRipple,{persistent:n}=t.config;t.state=ti.VISIBLE,!n&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=ti.HIDDEN,e!==null&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel),e.fallbackTimer!==null&&clearTimeout(e.fallbackTimer)),t.element.remove()}_onMousedown(t){let e=ec(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+f1;!this._target.rippleDisabled&&!e&&!n&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!tc(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=t.changedTouches;if(e)for(let n=0;n<e.length;n++)this.fadeInRipple(e[n].clientX,e[n].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let e=t.state===ti.VISIBLE||t.config.terminateOnPointerUp&&t.state===ti.FADING_IN;!t.config.persistent&&e&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(UE.forEach(e=>i._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&(BE.forEach(e=>t.removeEventListener(e,this,jE)),this._pointerUpEventsRegistered=!1))}};function p1(i,t,e){let n=Math.max(Math.abs(i-e.left),Math.abs(i-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(n*n+r*r)}var Yg=new U("mat-ripple-global-options"),Xg=(()=>{class i{get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}constructor(e,n,r,s,o){this._elementRef=e,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new du(this,n,e,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:P(P(P({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,n=0,r){return typeof e=="number"?this._rippleRenderer.fadeInRipple(e,n,P(P({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,P(P({},this.rippleConfig),e))}static{this.\u0275fac=function(n){return new(n||i)(D(ae),D(q),D(Me),D(Yg,8),D(ni,8))}}static{this.\u0275dir=ge({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(n,r){n&2&&Ne("mat-ripple-unbounded",r.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}}return i})(),$s=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=H({imports:[ve,ve]})}}return i})();var HE=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=H({imports:[ve]})}}return i})();var zE={capture:!0},$E=["focus","mousedown","mouseenter","touchstart"],Hg="mat-ripple-loader-uninitialized",Gg="mat-ripple-loader-class-name",qE="mat-ripple-loader-centered",lu="mat-ripple-loader-disabled",GE=(()=>{class i{constructor(){this._document=N(X,{optional:!0}),this._animationMode=N(ni,{optional:!0}),this._globalRippleOptions=N(Yg,{optional:!0}),this._platform=N(Me),this._ngZone=N(q),this._hosts=new Map,this._onInteraction=e=>{let n=ei(e);if(n instanceof HTMLElement){let r=n.closest(`[${Hg}="${this._globalRippleOptions?.namespace??""}"]`);r&&this._createRipple(r)}},this._ngZone.runOutsideAngular(()=>{for(let e of $E)this._document?.addEventListener(e,this._onInteraction,zE)})}ngOnDestroy(){let e=this._hosts.keys();for(let n of e)this.destroyRipple(n);for(let n of $E)this._document?.removeEventListener(n,this._onInteraction,zE)}configureRipple(e,n){e.setAttribute(Hg,this._globalRippleOptions?.namespace??""),(n.className||!e.hasAttribute(Gg))&&e.setAttribute(Gg,n.className||""),n.centered&&e.setAttribute(qE,""),n.disabled&&e.setAttribute(lu,"")}getRipple(e){return this._hosts.get(e)||this._createRipple(e)}setDisabled(e,n){let r=this._hosts.get(e);if(r){r.disabled=n;return}n?e.setAttribute(lu,""):e.removeAttribute(lu)}_createRipple(e){if(!this._document)return;let n=this._hosts.get(e);if(n)return n;e.querySelector(".mat-ripple")?.remove();let r=this._document.createElement("span");r.classList.add("mat-ripple",e.getAttribute(Gg)),e.append(r);let s=new Xg(new ae(r),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return s._isInitialized=!0,s.trigger=e,s.centered=e.hasAttribute(qE),s.disabled=e.hasAttribute(lu),this.attachRipple(e,s),s}attachRipple(e,n){e.removeAttribute(Hg),this._hosts.set(e,n)}destroyRipple(e){let n=this._hosts.get(e);n&&(n.ngOnDestroy(),this._hosts.delete(e))}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var g1=".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}";var _1=["mat-icon-button",""],v1=["*"];var b1=new U("MAT_BUTTON_CONFIG");var y1=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],w1=(()=>{class i{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(e){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,e)}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=e,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._updateRippleDisabled()}constructor(e,n,r,s){this._elementRef=e,this._platform=n,this._ngZone=r,this._animationMode=s,this._focusMonitor=N(ic),this._rippleLoader=N(GE),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let o=N(b1,{optional:!0}),c=e.nativeElement,l=c.classList;this.disabledInteractive=o?.disabledInteractive??!1,this.color=o?.color??null,this._rippleLoader?.configureRipple(c,{className:"mat-mdc-button-ripple"});for(let{attribute:u,mdcClasses:m}of y1)c.hasAttribute(u)&&l.add(...m)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(e="program",n){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,n):this._elementRef.nativeElement.focus(n)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static{this.\u0275fac=function(n){Br()}}static{this.\u0275dir=ge({type:i,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",Fe],disabled:[2,"disabled","disabled",Fe],ariaDisabled:[2,"aria-disabled","ariaDisabled",Fe],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Fe]},features:[Xe]})}}return i})();var KE=(()=>{class i extends w1{constructor(e,n,r,s){super(e,n,r,s),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static{this.\u0275fac=function(n){return new(n||i)(D(ae),D(Me),D(q),D(ni,8))}}static{this.\u0275cmp=ee({type:i,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(n,r){n&2&&(Re("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled()),mi(r.color?"mat-"+r.color:""),Ne("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("_mat-animation-noopable",r._animationMode==="NoopAnimations")("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[Tt,ie],attrs:_1,ngContentSelectors:v1,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(n,r){n&1&&(xt(),te(0,"span",0),lt(1),te(2,"span",1)(3,"span",2))},styles:['.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 48px);height:var(--mdc-icon-button-state-layer-size, 48px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 48px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size);color:var(--mdc-icon-button-icon-color, var(--mat-app-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color)}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',g1],encapsulation:2,changeDetection:0})}}return i})();var qs=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=H({imports:[ve,$s,ve]})}}return i})();var E1=["*"],uu;function C1(){if(uu===void 0&&(uu=null,typeof window<"u")){let i=window;i.trustedTypes!==void 0&&(uu=i.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return uu}function nc(i){return C1()?.createHTML(i)||i}function QE(i){return Error(`Unable to find icon with the name "${i}"`)}function T1(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function YE(i){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${i}".`)}function XE(i){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${i}".`)}var tn=class{constructor(t,e,n){this.url=t,this.svgText=e,this.options=n}},x1=(()=>{class i{constructor(e,n,r,s){this._httpClient=e,this._sanitizer=n,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(e,n,r){return this.addSvgIconInNamespace("",e,n,r)}addSvgIconLiteral(e,n,r){return this.addSvgIconLiteralInNamespace("",e,n,r)}addSvgIconInNamespace(e,n,r,s){return this._addSvgIconConfig(e,n,new tn(r,null,s))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,n,r,s){let o=this._sanitizer.sanitize(Ft.HTML,r);if(!o)throw XE(r);let c=nc(o);return this._addSvgIconConfig(e,n,new tn("",c,s))}addSvgIconSet(e,n){return this.addSvgIconSetInNamespace("",e,n)}addSvgIconSetLiteral(e,n){return this.addSvgIconSetLiteralInNamespace("",e,n)}addSvgIconSetInNamespace(e,n,r){return this._addSvgIconSetConfig(e,new tn(n,null,r))}addSvgIconSetLiteralInNamespace(e,n,r){let s=this._sanitizer.sanitize(Ft.HTML,n);if(!s)throw XE(n);let o=nc(s);return this._addSvgIconSetConfig(e,new tn("",o,r))}registerFontClassAlias(e,n=e){return this._fontCssClassesByAlias.set(e,n),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){let n=this._sanitizer.sanitize(Ft.RESOURCE_URL,e);if(!n)throw YE(e);let r=this._cachedIconsByUrl.get(n);return r?z(hu(r)):this._loadSvgIconFromConfig(new tn(e,null)).pipe(Ae(s=>this._cachedIconsByUrl.set(n,s)),W(s=>hu(s)))}getNamedSvgIcon(e,n=""){let r=ZE(n,e),s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(n,e),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);let o=this._iconSetConfigs.get(n);return o?this._getSvgFromIconSetConfigs(e,o):Bn(QE(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?z(hu(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(W(n=>hu(n)))}_getSvgFromIconSetConfigs(e,n){let r=this._extractIconWithNameFromAnySet(e,n);if(r)return z(r);let s=n.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(dn(c=>{let u=`Loading icon set URL: ${this._sanitizer.sanitize(Ft.RESOURCE_URL,o.url)} failed: ${c.message}`;return this._errorHandler.handleError(new Error(u)),z(null)})));return Nc(s).pipe(W(()=>{let o=this._extractIconWithNameFromAnySet(e,n);if(!o)throw QE(e);return o}))}_extractIconWithNameFromAnySet(e,n){for(let r=n.length-1;r>=0;r--){let s=n[r];if(s.svgText&&s.svgText.toString().indexOf(e)>-1){let o=this._svgElementFromConfig(s),c=this._extractSvgIconFromSet(o,e,s.options);if(c)return c}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(Ae(n=>e.svgText=n),W(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?z(null):this._fetchIcon(e).pipe(Ae(n=>e.svgText=n))}_extractSvgIconFromSet(e,n,r){let s=e.querySelector(`[id="${n}"]`);if(!s)return null;let o=s.cloneNode(!0);if(o.removeAttribute("id"),o.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(o,r);if(o.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(o),r);let c=this._svgElementFromString(nc("<svg></svg>"));return c.appendChild(o),this._setSvgAttributes(c,r)}_svgElementFromString(e){let n=this._document.createElement("DIV");n.innerHTML=e;let r=n.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){let n=this._svgElementFromString(nc("<svg></svg>")),r=e.attributes;for(let s=0;s<r.length;s++){let{name:o,value:c}=r[s];o!=="id"&&n.setAttribute(o,c)}for(let s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===this._document.ELEMENT_NODE&&n.appendChild(e.childNodes[s].cloneNode(!0));return n}_setSvgAttributes(e,n){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),n&&n.viewBox&&e.setAttribute("viewBox",n.viewBox),e}_fetchIcon(e){let{url:n,options:r}=e,s=r?.withCredentials??!1;if(!this._httpClient)throw T1();if(n==null)throw Error(`Cannot fetch icon from URL "${n}".`);let o=this._sanitizer.sanitize(Ft.RESOURCE_URL,n);if(!o)throw YE(n);let c=this._inProgressUrlFetches.get(o);if(c)return c;let l=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(W(u=>nc(u)),hn(()=>this._inProgressUrlFetches.delete(o)),Fv());return this._inProgressUrlFetches.set(o,l),l}_addSvgIconConfig(e,n,r){return this._svgIconConfigs.set(ZE(e,n),r),this}_addSvgIconSetConfig(e,n){let r=this._iconSetConfigs.get(e);return r?r.push(n):this._iconSetConfigs.set(e,[n]),this}_svgElementFromConfig(e){if(!e.svgElement){let n=this._svgElementFromString(e.svgText);this._setSvgAttributes(n,e.options),e.svgElement=n}return e.svgElement}_getIconConfigFromResolvers(e,n){for(let r=0;r<this._resolvers.length;r++){let s=this._resolvers[r](n,e);if(s)return S1(s)?new tn(s.url,null,s.options):new tn(s,null)}}static{this.\u0275fac=function(n){return new(n||i)(R(jo,8),R(zh),R(X,8),R(zn))}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function hu(i){return i.cloneNode(!0)}function ZE(i,t){return i+":"+t}function S1(i){return!!(i.url&&i.options)}var A1=new U("MAT_ICON_DEFAULT_OPTIONS"),R1=new U("mat-icon-location",{providedIn:"root",factory:k1});function k1(){let i=N(X),t=i?i.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}var JE=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],D1=JE.map(i=>`[${i}]`).join(", "),P1=/^url\(['"]?#(.*?)['"]?\)$/,eC=(()=>{class i{get color(){return this._color||this._defaultColor}set color(e){this._color=e}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){let n=this._cleanupFontValue(e);n!==this._fontSet&&(this._fontSet=n,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){let n=this._cleanupFontValue(e);n!==this._fontIcon&&(this._fontIcon=n,this._updateFontIconClasses())}constructor(e,n,r,s,o,c){this._elementRef=e,this._iconRegistry=n,this._location=s,this._errorHandler=o,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Et.EMPTY,c&&(c.color&&(this.color=this._defaultColor=c.color),c.fontSet&&(this.fontSet=c.fontSet)),r||e.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];let n=e.split(":");switch(n.length){case 1:return["",n[0]];case 2:return n;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let e=this._elementsWithExternalReferences;if(e&&e.size){let n=this._location.getPathname();n!==this._previousPath&&(this._previousPath=n,this._prependPathToReferences(n))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();let n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){let e=this._elementRef.nativeElement,n=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();n--;){let r=e.childNodes[n];(r.nodeType!==1||r.nodeName.toLowerCase()==="svg")&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let e=this._elementRef.nativeElement,n=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>e.classList.remove(r)),n.forEach(r=>e.classList.add(r)),this._previousFontSetClass=n,this.fontIcon!==this._previousFontIconClass&&!n.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return typeof e=="string"?e.trim().split(" ")[0]:e}_prependPathToReferences(e){let n=this._elementsWithExternalReferences;n&&n.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${e}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(e){let n=e.querySelectorAll(D1),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<n.length;s++)JE.forEach(o=>{let c=n[s],l=c.getAttribute(o),u=l?l.match(P1):null;if(u){let m=r.get(c);m||(m=[],r.set(c,m)),m.push({name:o,value:u[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){let[n,r]=this._splitIconName(e);n&&(this._svgNamespace=n),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,n).pipe(ct(1)).subscribe(s=>this._setSvgElement(s),s=>{let o=`Error retrieving icon ${n}:${r}! ${s.message}`;this._errorHandler.handleError(new Error(o))})}}static{this.\u0275fac=function(n){return new(n||i)(D(ae),D(x1),To("aria-hidden"),D(R1),D(zn),D(A1,8))}}static{this.\u0275cmp=ee({type:i,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(n,r){n&2&&(Re("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),mi(r.color?"mat-"+r.color:""),Ne("mat-icon-inline",r.inline)("mat-icon-no-color",r.color!=="primary"&&r.color!=="accent"&&r.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",Fe],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[Xe,ie],ngContentSelectors:E1,decls:1,vars:0,template:function(n,r){n&1&&(xt(),lt(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}}return i})(),Ws=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=H({imports:[ve,ve]})}}return i})();var rc=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=ee({type:i,selectors:[["app-home"]],standalone:!0,features:[ie],decls:14,vars:0,consts:[[1,"main-content"],[1,"button-list"],["routerLink","/flashcards",1,"home-button"],["routerLink","/new-set",1,"home-button"],["src","assets/icons/add-sign.svg"],[1,"banner-container"],[1,"banner"]],template:function(e,n){e&1&&(M(0,"div",0)(1,"h2"),$(2,"Welcome Back!"),O(),M(3,"div",1)(4,"button",2)(5,"span"),$(6,"Flashcards"),O()(),M(7,"button",3)(8,"span"),$(9,"New Set"),O(),te(10,"img",4),O()(),M(11,"div",5)(12,"h4",6),$(13,"Today is a great day to learn something new!"),O()()())},dependencies:[qs,Ws,Ol,Kt],styles:[".main-content[_ngcontent-%COMP%]{display:block;justify-content:center;margin:0 100px;padding:20px 60px}h2[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:center;font-family:Lily Script One}.button-list[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;flex-wrap:wrap}.home-button[_ngcontent-%COMP%]{width:240px;height:160px;border-radius:24px;background-color:#d9d9d9;margin:10px;display:inline-block;text-align:center;justify-content:center;cursor:pointer}.home-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Libre Bodoni;font-weight:700;font-size:30px}.home-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;display:block;margin:auto}.banner-container[_ngcontent-%COMP%]{margin-top:60px;padding:20px;background-color:#850b0d;border-radius:24px;display:flex;justify-content:center;align-items:center}.banner[_ngcontent-%COMP%]{font-family:Libre Bodoni;font-size:40px;font-style:italic;color:#fff}"]})};var tC=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=H({imports:[ve,ve]})}}return i})();var dC=(()=>{class i{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(n){return new(n||i)(D(Ro),D(ae))}}static{this.\u0275dir=ge({type:i})}}return i})(),O1=(()=>{class i extends dC{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=mn(i)))(r||i)}})()}static{this.\u0275dir=ge({type:i,features:[Tt]})}}return i})(),r_=new U("");var N1={provide:r_,useExisting:Eo(()=>ki),multi:!0};function F1(){let i=Qr()?Qr().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var L1=new U(""),ki=(()=>{class i extends dC{constructor(e,n,r){super(e,n),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!F1())}writeValue(e){let n=e??"";this.setProperty("value",n)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(n){return new(n||i)(D(Ro),D(ae),D(L1,8))}}static{this.\u0275dir=ge({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){n&1&&me("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[bt([N1]),Tt]})}}return i})();function Mn(i){return i==null||(typeof i=="string"||Array.isArray(i))&&i.length===0}function uC(i){return i!=null&&typeof i.length=="number"}var s_=new U(""),o_=new U(""),V1=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,hi=class{static min(t){return j1(t)}static max(t){return U1(t)}static required(t){return B1(t)}static requiredTrue(t){return z1(t)}static email(t){return $1(t)}static minLength(t){return q1(t)}static maxLength(t){return W1(t)}static pattern(t){return H1(t)}static nullValidator(t){return hC(t)}static compose(t){return vC(t)}static composeAsync(t){return yC(t)}};function j1(i){return t=>{if(Mn(t.value)||Mn(i))return null;let e=parseFloat(t.value);return!isNaN(e)&&e<i?{min:{min:i,actual:t.value}}:null}}function U1(i){return t=>{if(Mn(t.value)||Mn(i))return null;let e=parseFloat(t.value);return!isNaN(e)&&e>i?{max:{max:i,actual:t.value}}:null}}function B1(i){return Mn(i.value)?{required:!0}:null}function z1(i){return i.value===!0?null:{required:!0}}function $1(i){return Mn(i.value)||V1.test(i.value)?null:{email:!0}}function q1(i){return t=>Mn(t.value)||!uC(t.value)?null:t.value.length<i?{minlength:{requiredLength:i,actualLength:t.value.length}}:null}function W1(i){return t=>uC(t.value)&&t.value.length>i?{maxlength:{requiredLength:i,actualLength:t.value.length}}:null}function H1(i){if(!i)return hC;let t,e;return typeof i=="string"?(e="",i.charAt(0)!=="^"&&(e+="^"),e+=i,i.charAt(i.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=i.toString(),t=i),n=>{if(Mn(n.value))return null;let r=n.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}function hC(i){return null}function mC(i){return i!=null}function fC(i){return Xc(i)?je(i):i}function pC(i){let t={};return i.forEach(e=>{t=e!=null?P(P({},t),e):t}),Object.keys(t).length===0?null:t}function gC(i,t){return t.map(e=>e(i))}function G1(i){return!i.validate}function _C(i){return i.map(t=>G1(t)?t:e=>t.validate(e))}function vC(i){if(!i)return null;let t=i.filter(mC);return t.length==0?null:function(e){return pC(gC(e,t))}}function bC(i){return i!=null?vC(_C(i)):null}function yC(i){if(!i)return null;let t=i.filter(mC);return t.length==0?null:function(e){let n=gC(e,t).map(fC);return Nc(n).pipe(W(pC))}}function wC(i){return i!=null?yC(_C(i)):null}function iC(i,t){return i===null?[t]:Array.isArray(i)?[...i,t]:[i,t]}function IC(i){return i._rawValidators}function EC(i){return i._rawAsyncValidators}function Zg(i){return i?Array.isArray(i)?i:[i]:[]}function fu(i,t){return Array.isArray(i)?i.includes(t):i===t}function nC(i,t){let e=Zg(t);return Zg(i).forEach(r=>{fu(e,r)||e.push(r)}),e}function rC(i,t){return Zg(t).filter(e=>!fu(i,e))}var pu=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=bC(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=wC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},xr=class extends pu{get formDirective(){return null}get path(){return null}},Sr=class extends pu{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},gu=class{constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},K1={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},m4=he(P({},K1),{"[class.ng-submitted]":"isSubmitted"}),Nn=(()=>{class i extends gu{constructor(e){super(e)}static{this.\u0275fac=function(n){return new(n||i)(D(Sr,2))}}static{this.\u0275dir=ge({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){n&2&&Ne("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Tt]})}}return i})(),Ys=(()=>{class i extends gu{constructor(e){super(e)}static{this.\u0275fac=function(n){return new(n||i)(D(xr,10))}}static{this.\u0275dir=ge({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,r){n&2&&Ne("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Tt]})}}return i})();var sc="VALID",mu="INVALID",Hs="PENDING",oc="DISABLED",On=class{},_u=class extends On{constructor(t,e){super(),this.value=t,this.source=e}},ac=class extends On{constructor(t,e){super(),this.pristine=t,this.source=e}},cc=class extends On{constructor(t,e){super(),this.touched=t,this.source=e}},Gs=class extends On{constructor(t,e){super(),this.status=t,this.source=e}},Jg=class extends On{constructor(t){super(),this.source=t}},e_=class extends On{constructor(t){super(),this.source=t}};function a_(i){return(yu(i)?i.validators:i)||null}function Q1(i){return Array.isArray(i)?bC(i):i||null}function c_(i,t){return(yu(t)?t.asyncValidators:i)||null}function Y1(i){return Array.isArray(i)?wC(i):i||null}function yu(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}function CC(i,t,e){let n=i.controls;if(!(t?Object.keys(n):n).length)throw new Ee(1e3,"");if(!n[e])throw new Ee(1001,"")}function TC(i,t,e){i._forEachChild((n,r)=>{if(e[r]===void 0)throw new Ee(1002,"")})}var Ks=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Mo(()=>this.statusReactive()),this.statusReactive=ko(void 0),this._pristine=Mo(()=>this.pristineReactive()),this.pristineReactive=ko(!0),this._touched=Mo(()=>this.touchedReactive()),this.touchedReactive=ko(!1),this._events=new le,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return _i(this.statusReactive)}set status(t){_i(()=>this.statusReactive.set(t))}get valid(){return this.status===sc}get invalid(){return this.status===mu}get pending(){return this.status==Hs}get disabled(){return this.status===oc}get enabled(){return this.status!==oc}get pristine(){return _i(this.pristineReactive)}set pristine(t){_i(()=>this.pristineReactive.set(t))}get dirty(){return!this.pristine}get touched(){return _i(this.touchedReactive)}set touched(t){_i(()=>this.touchedReactive.set(t))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(nC(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(nC(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(rC(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(rC(t,this._rawAsyncValidators))}hasValidator(t){return fu(this._rawValidators,t)}hasAsyncValidator(t){return fu(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let n=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(he(P({},t),{sourceControl:n})),e&&t.emitEvent!==!1&&this._events.next(new cc(!0,n))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let n=t.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:n})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n),e&&t.emitEvent!==!1&&this._events.next(new cc(!1,n))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let n=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(he(P({},t),{sourceControl:n})),e&&t.emitEvent!==!1&&this._events.next(new ac(!1,n))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let n=t.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),e&&t.emitEvent!==!1&&this._events.next(new ac(!0,n))}markAsPending(t={}){this.status=Hs;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Gs(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(he(P({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=oc,this.errors=null,this._forEachChild(r=>{r.disable(he(P({},t),{onlySelf:!0}))}),this._updateValue();let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new _u(this.value,n)),this._events.next(new Gs(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(he(P({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=sc,this._forEachChild(n=>{n.enable(he(P({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(he(P({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let n=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===sc||this.status===Hs)&&this._runAsyncValidator(n,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new _u(this.value,e)),this._events.next(new Gs(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(he(P({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?oc:sc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=Hs,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let n=fC(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((n,r)=>n&&n._find(r),this)}getError(t,e){let n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,n){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||n)&&this._events.next(new Gs(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,n)}_initObservables(){this.valueChanges=new Oe,this.statusChanges=new Oe}_calculateStatus(){return this._allControlsDisabled()?oc:this.errors?mu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Hs)?Hs:this._anyControlsHaveStatus(mu)?mu:sc}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let n=!this._anyControlsDirty(),r=this.pristine!==n;this.pristine=n,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),r&&this._events.next(new ac(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new cc(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){yu(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=Q1(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=Y1(this._rawAsyncValidators)}},Qs=class extends Ks{constructor(t,e,n){super(a_(e),c_(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){TC(this,!0,t),Object.keys(t).forEach(n=>{CC(this,!0,n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(n=>{let r=this.controls[n];r&&r.patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,n)=>n._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,n]of Object.entries(this.controls))if(this.contains(e)&&t(n))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,n,r)=>((n.enabled||this.disabled)&&(e[r]=n.value),e))}_reduceChildren(t,e){let n=t;return this._forEachChild((r,s)=>{n=e(n,r,s)}),n}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var t_=class extends Qs{};var wu=new U("CallSetDisabledState",{providedIn:"root",factory:()=>Iu}),Iu="always";function xC(i,t){return[...t.path,i]}function i_(i,t,e=Iu){l_(i,t),t.valueAccessor.writeValue(i.value),(i.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(i.disabled),Z1(i,t),eF(i,t),J1(i,t),X1(i,t)}function sC(i,t,e=!0){let n=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(n),t.valueAccessor.registerOnTouched(n)),bu(i,t),i&&(t._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function vu(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function X1(i,t){if(t.valueAccessor.setDisabledState){let e=n=>{t.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}function l_(i,t){let e=IC(i);t.validator!==null?i.setValidators(iC(e,t.validator)):typeof e=="function"&&i.setValidators([e]);let n=EC(i);t.asyncValidator!==null?i.setAsyncValidators(iC(n,t.asyncValidator)):typeof n=="function"&&i.setAsyncValidators([n]);let r=()=>i.updateValueAndValidity();vu(t._rawValidators,r),vu(t._rawAsyncValidators,r)}function bu(i,t){let e=!1;if(i!==null){if(t.validator!==null){let r=IC(i);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==t.validator);s.length!==r.length&&(e=!0,i.setValidators(s))}}if(t.asyncValidator!==null){let r=EC(i);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==t.asyncValidator);s.length!==r.length&&(e=!0,i.setAsyncValidators(s))}}}let n=()=>{};return vu(t._rawValidators,n),vu(t._rawAsyncValidators,n),e}function Z1(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&SC(i,t)})}function J1(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&SC(i,t),i.updateOn!=="submit"&&i.markAsTouched()})}function SC(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function eF(i,t){let e=(n,r)=>{t.valueAccessor.writeValue(n),r&&t.viewToModelUpdate(n)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}function tF(i,t){i==null,l_(i,t)}function iF(i,t){return bu(i,t)}function AC(i,t){if(!i.hasOwnProperty("model"))return!1;let e=i.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function nF(i){return Object.getPrototypeOf(i.constructor)===O1}function rF(i,t){i._syncPendingControls(),t.forEach(e=>{let n=e.control;n.updateOn==="submit"&&n._pendingChange&&(e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function RC(i,t){if(!t)return null;Array.isArray(t);let e,n,r;return t.forEach(s=>{s.constructor===ki?e=s:nF(s)?n=s:r=s}),r||n||e||null}function sF(i,t){let e=i.indexOf(t);e>-1&&i.splice(e,1)}function oC(i,t){let e=i.indexOf(t);e>-1&&i.splice(e,1)}function aC(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var Tr=class extends Ks{constructor(t=null,e,n){super(a_(e),c_(n,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),yu(e)&&(e.nonNullable||e.initialValueIsDefault)&&(aC(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){oC(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){oC(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){aC(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var oF=i=>i instanceof Tr;var aF={provide:Sr,useExisting:Eo(()=>d_)},cC=Promise.resolve(),d_=(()=>{class i extends Sr{constructor(e,n,r,s,o,c){super(),this._changeDetectorRef=o,this.callSetDisabledState=c,this.control=new Tr,this._registered=!1,this.name="",this.update=new Oe,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=RC(this,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let n=e.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),AC(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){i_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){cC.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let n=e.isDisabled.currentValue,r=n!==0&&Fe(n);cC.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?xC(e,this._parent):[e]}static{this.\u0275fac=function(n){return new(n||i)(D(xr,9),D(s_,10),D(o_,10),D(r_,10),D(yt,8),D(wu,8))}}static{this.\u0275dir=ge({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[bt([aF]),Tt,Wt]})}}return i})(),Xs=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=ge({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return i})();var kC=new U("");var cF={provide:xr,useExisting:Eo(()=>Ar)},Ar=(()=>{class i extends xr{get submitted(){return _i(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}constructor(e,n,r){super(),this.callSetDisabledState=r,this._submitted=Mo(()=>this._submittedReactive()),this._submittedReactive=ko(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Oe,this._setValidators(e),this._setAsyncValidators(n)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(bu(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let n=this.form.get(e.path);return i_(n,e,this.callSetDisabledState),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),n}getControl(e){return this.form.get(e.path)}removeControl(e){sC(e.control||null,e,!1),sF(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,n){this.form.get(e.path).setValue(n)}onSubmit(e){return this._submittedReactive.set(!0),rF(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new Jg(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new e_(this.form))}_updateDomValue(){this.directives.forEach(e=>{let n=e.control,r=this.form.get(e.path);n!==r&&(sC(n||null,e),oF(r)&&(i_(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let n=this.form.get(e.path);tF(n,e),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let n=this.form.get(e.path);n&&iF(n,e)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){l_(this.form,this),this._oldForm&&bu(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(n){return new(n||i)(D(s_,10),D(o_,10),D(wu,8))}}static{this.\u0275dir=ge({type:i,selectors:[["","formGroup",""]],hostBindings:function(n,r){n&1&&me("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[bt([cF]),Tt,Wt]})}}return i})();var lF={provide:Sr,useExisting:Eo(()=>Rr)},Rr=(()=>{class i extends Sr{set isDisabled(e){}static{this._ngModelWarningSentOnce=!1}constructor(e,n,r,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new Oe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=RC(this,s)}ngOnChanges(e){this._added||this._setUpControl(),AC(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return xC(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(n){return new(n||i)(D(xr,13),D(s_,10),D(o_,10),D(r_,10),D(kC,8))}}static{this.\u0275dir=ge({type:i,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[bt([lF]),Tt,Wt]})}}return i})();var DC=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=H({})}}return i})(),n_=class extends Ks{constructor(t,e,n){super(a_(e),c_(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){let n=this._adjustIndex(t);n<0&&(n=0),this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),e&&(this.controls.splice(r,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){TC(this,!1,t),t.forEach((n,r)=>{CC(this,!1,r),this.at(r).setValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((n,r)=>{this.at(r)&&this.at(r).patchValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,n)=>n._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function lC(i){return!!i&&(i.asyncValidators!==void 0||i.validators!==void 0||i.updateOn!==void 0)}var Eu=(()=>{class i{constructor(){this.useNonNullable=!1}get nonNullable(){let e=new i;return e.useNonNullable=!0,e}group(e,n=null){let r=this._reduceControls(e),s={};return lC(n)?s=n:n!==null&&(s.validators=n.validator,s.asyncValidators=n.asyncValidator),new Qs(r,s)}record(e,n=null){let r=this._reduceControls(e);return new t_(r,n)}control(e,n,r){let s={};return this.useNonNullable?(lC(n)?s=n:(s.validators=n,s.asyncValidators=r),new Tr(e,he(P({},s),{nonNullable:!0}))):new Tr(e,n,r)}array(e,n,r){let s=e.map(o=>this._createControl(o));return new n_(s,n,r)}_reduceControls(e){let n={};return Object.keys(e).forEach(r=>{n[r]=this._createControl(e[r])}),n}_createControl(e){if(e instanceof Tr)return e;if(e instanceof Ks)return e;if(Array.isArray(e)){let n=e[0],r=e.length>1?e[1]:null,s=e.length>2?e[2]:null;return this.control(n,r,s)}else return this.control(e)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var PC=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:wu,useValue:e.callSetDisabledState??Iu}]}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=H({imports:[DC]})}}return i})(),Zs=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:kC,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:wu,useValue:e.callSetDisabledState??Iu}]}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=H({imports:[DC]})}}return i})();var MC=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=H({imports:[iu,Lt,ve,$s,HE,tC]})}}return i})();var lc=class{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},u_=class extends lc{constructor(t,e,n,r,s){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=r,this.projectableNodes=s}},Js=class extends lc{constructor(t,e,n,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}},h_=class extends lc{constructor(t){super(),this.element=t instanceof ae?t.nativeElement:t}},m_=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof u_)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof Js)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof h_)return this._attachedPortal=t,this.attachDomPortal(t)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var dc=class extends m_{constructor(t,e,n,r,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=o=>{this._document;let c=o.element;c.parentNode;let l=this._document.createComment("dom-portal");c.parentNode.insertBefore(l,c),this.outletElement.appendChild(c),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(c,l)})},this._document=s}attachComponentPortal(t){let n=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(n,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=n.create(t.injector||this._defaultInjector||$e.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return n.rootNodes.forEach(r=>this.outletElement.appendChild(r)),n.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(n);r!==-1&&e.remove(r)}),this._attachedPortal=t,n}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}};var OC=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=H({})}}return i})();var dF=20,NC=(()=>{class i{constructor(e,n,r){this._ngZone=e,this._platform=n,this._scrolled=new le,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let n=this.scrollContainers.get(e);n&&(n.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=dF){return this._platform.isBrowser?new $t(n=>{this._globalSubscription||this._addGlobalListener();let r=e>0?this._scrolled.pipe(ph(e)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):z()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(e,n){let r=this.getAncestorScrollContainers(e);return this.scrolled(n).pipe(Ue(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){let n=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&n.push(s)}),n}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,n){let r=en(n),s=e.getElementRef().nativeElement;do if(r==s)return!0;while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let e=this._getWindow();return Pv(e.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static{this.\u0275fac=function(n){return new(n||i)(R(q),R(Me),R(X,8))}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var uF=20,f_=(()=>{class i{constructor(e,n,r){this._platform=e,this._change=new le,this._changeListener=s=>{this._change.next(s)},this._document=r,n.runOutsideAngular(()=>{if(e.isBrowser){let s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:n,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+n,height:r,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,n=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect(),o=-s.top||e.body.scrollTop||n.scrollY||r.scrollTop||0,c=-s.left||e.body.scrollLeft||n.scrollX||r.scrollLeft||0;return{top:o,left:c}}change(e=uF){return e>0?this._change.pipe(ph(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static{this.\u0275fac=function(n){return new(n||i)(R(Me),R(q),R(X,8))}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var kr=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=H({})}}return i})(),p_=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=H({imports:[Pn,kr,Pn,kr]})}}return i})();var FC=xE(),g_=class{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Le(-this._previousScrollPosition.left),t.style.top=Le(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,e=this._document.body,n=t.style,r=e.style,s=n.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),FC&&(n.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),FC&&(n.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.body,n=this._viewportRuler.getViewportSize();return e.scrollHeight>n.height||e.scrollWidth>n.width}};var __=class{constructor(t,e,n,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(Ue(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Tu=class{enable(){}disable(){}attach(){}};function v_(i,t){return t.some(e=>{let n=i.bottom<e.top,r=i.top>e.bottom,s=i.right<e.left,o=i.left>e.right;return n||r||s||o})}function LC(i,t){return t.some(e=>{let n=i.top<e.top,r=i.bottom>e.bottom,s=i.left<e.left,o=i.right>e.right;return n||r||s||o})}var b_=class{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:r}=this._viewportRuler.getViewportSize();v_(e,[{width:n,height:r,bottom:r,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},mF=(()=>{class i{constructor(e,n,r,s){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=r,this.noop=()=>new Tu,this.close=o=>new __(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new g_(this._viewportRuler,this._document),this.reposition=o=>new b_(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}static{this.\u0275fac=function(n){return new(n||i)(R(NC),R(f_),R(q),R(X))}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),uc=class{constructor(t){if(this.scrollStrategy=new Tu,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){let e=Object.keys(t);for(let n of e)t[n]!==void 0&&(this[n]=t[n])}}};var y_=class{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}};var $C=(()=>{class i{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){let n=this._attachedOverlays.indexOf(e);n>-1&&this._attachedOverlays.splice(n,1),this._attachedOverlays.length===0&&this.detach()}static{this.\u0275fac=function(n){return new(n||i)(R(X))}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),fF=(()=>{class i extends $C{constructor(e,n){super(e),this._ngZone=n,this._keydownListener=r=>{let s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){let c=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>c.next(r)):c.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static{this.\u0275fac=function(n){return new(n||i)(R(X),R(q,8))}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),pF=(()=>{class i extends $C{constructor(e,n,r){super(e),this._platform=n,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=ei(s)},this._clickListener=s=>{let o=ei(s),c=s.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;let l=this._attachedOverlays.slice();for(let u=l.length-1;u>-1;u--){let m=l[u];if(m._outsidePointerEvents.observers.length<1||!m.hasAttached())continue;if(VC(m.overlayElement,o)||VC(m.overlayElement,c))break;let p=m._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>p.next(s)):p.next(s)}}}add(e){if(super.add(e),!this._isAttached){let n=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(n)):this._addEventListeners(n),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}static{this.\u0275fac=function(n){return new(n||i)(R(X),R(Me),R(q,8))}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function VC(i,t){let e=typeof ShadowRoot<"u"&&ShadowRoot,n=t;for(;n;){if(n===i)return!0;n=e&&n instanceof ShadowRoot?n.host:n.parentNode}return!1}var qC=(()=>{class i{constructor(e,n){this._platform=n,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e="cdk-overlay-container";if(this._platform.isBrowser||Ja()){let r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}let n=this._document.createElement("div");n.classList.add(e),Ja()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}static{this.\u0275fac=function(n){return new(n||i)(R(X),R(Me))}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),w_=class{constructor(t,e,n,r,s,o,c,l,u,m=!1,p){this._portalOutlet=t,this._host=e,this._pane=n,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=c,this._location=l,this._outsideClickDispatcher=u,this._animationsDisabled=m,this._injector=p,this._backdropElement=null,this._backdropClick=new le,this._attachments=new le,this._detachments=new le,this._locationChanges=Et.EMPTY,this._backdropClickHandler=_=>this._backdropClick.next(_),this._backdropTransitionendHandler=_=>{this._disposeBackdrop(_.target)},this._keydownEvents=new le,this._outsidePointerEvents=new le,this._renders=new le,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy,this._afterRenderRef=_i(()=>Xv(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=qn(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=P(P({},this._config),t),this._updateElementSize()}setDirection(t){this._config=he(P({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=Le(this._config.width),t.height=Le(this._config.height),t.minWidth=Le(this._config.minWidth),t.minHeight=Le(this._config.minHeight),t.maxWidth=Le(this._config.maxWidth),t.maxHeight=Le(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t=this._backdropElement;if(t){if(this._animationsDisabled){this._disposeBackdrop(t);return}t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,n){let r=Bs(e||[]).filter(s=>!!s);r.length&&(n?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let t=this._renders.pipe(Nt(Lr(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){let t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},jC="cdk-overlay-connected-position-bounding-box",gF=/([A-Za-z%]+)$/,I_=class{get positions(){return this._preferredPositions}constructor(t,e,n,r,s){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new le,this._resizeSubscription=Et.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(jC),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,e=this._overlayRect,n=this._viewportRect,r=this._containerRect,s=[],o;for(let c of this._preferredPositions){let l=this._getOriginPoint(t,r,c),u=this._getOverlayPoint(l,e,c),m=this._getOverlayFit(u,e,n,c);if(m.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(c,l);return}if(this._canFitWithFlexibleDimensions(m,u,n)){s.push({position:c,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,c)});continue}(!o||o.overlayFit.visibleArea<m.visibleArea)&&(o={overlayFit:m,overlayPoint:u,originPoint:l,position:c,overlayRect:e})}if(s.length){let c=null,l=-1;for(let u of s){let m=u.boundingBoxRect.width*u.boundingBoxRect.height*(u.position.weight||1);m>l&&(l=m,c=u)}this._isPushed=!1,this._applyPosition(c.position,c.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(o.position,o.originPoint);return}this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Dr(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(jC),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,n){let r;if(n.originX=="center")r=t.left+t.width/2;else{let o=this._isRtl()?t.right:t.left,c=this._isRtl()?t.left:t.right;r=n.originX=="start"?o:c}e.left<0&&(r-=e.left);let s;return n.originY=="center"?s=t.top+t.height/2:s=n.originY=="top"?t.top:t.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(t,e,n){let r;n.overlayX=="center"?r=-e.width/2:n.overlayX==="start"?r=this._isRtl()?-e.width:0:r=this._isRtl()?0:-e.width;let s;return n.overlayY=="center"?s=-e.height/2:s=n.overlayY=="top"?0:-e.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,e,n,r){let s=BC(e),{x:o,y:c}=t,l=this._getOffset(r,"x"),u=this._getOffset(r,"y");l&&(o+=l),u&&(c+=u);let m=0-o,p=o+s.width-n.width,_=0-c,S=c+s.height-n.height,A=this._subtractOverflows(s.width,m,p),k=this._subtractOverflows(s.height,_,S),F=A*k;return{visibleArea:F,isCompletelyWithinViewport:s.width*s.height===F,fitsInViewportVertically:k===s.height,fitsInViewportHorizontally:A==s.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){let r=n.bottom-e.y,s=n.right-e.x,o=UC(this._overlayRef.getConfig().minHeight),c=UC(this._overlayRef.getConfig().minWidth),l=t.fitsInViewportVertically||o!=null&&o<=r,u=t.fitsInViewportHorizontally||c!=null&&c<=s;return l&&u}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let r=BC(e),s=this._viewportRect,o=Math.max(t.x+r.width-s.width,0),c=Math.max(t.y+r.height-s.height,0),l=Math.max(s.top-n.top-t.y,0),u=Math.max(s.left-n.left-t.x,0),m=0,p=0;return r.width<=s.width?m=u||-o:m=t.x<this._viewportMargin?s.left-n.left-t.x:0,r.height<=s.height?p=l||-c:p=t.y<this._viewportMargin?s.top-n.top-t.y:0,this._previousPushAmount={x:m,y:p},{x:t.x+m,y:t.y+p}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){let n=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!_F(this._lastScrollVisibility,n)){let r=new y_(t,n);this._positionChanges.next(r)}this._lastScrollVisibility=n}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),n,r=t.overlayY;t.overlayX==="center"?n="center":this._isRtl()?n=t.overlayX==="start"?"right":"left":n=t.overlayX==="start"?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(t,e){let n=this._viewportRect,r=this._isRtl(),s,o,c;if(e.overlayY==="top")o=t.y,s=n.height-o+this._viewportMargin;else if(e.overlayY==="bottom")c=n.height-t.y+this._viewportMargin*2,s=n.height-c+this._viewportMargin;else{let S=Math.min(n.bottom-t.y+n.top,t.y),A=this._lastBoundingBoxSize.height;s=S*2,o=t.y-S,s>A&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-A/2)}let l=e.overlayX==="start"&&!r||e.overlayX==="end"&&r,u=e.overlayX==="end"&&!r||e.overlayX==="start"&&r,m,p,_;if(u)_=n.width-t.x+this._viewportMargin*2,m=t.x-this._viewportMargin;else if(l)p=t.x,m=n.right-t.x;else{let S=Math.min(n.right-t.x+n.left,t.x),A=this._lastBoundingBoxSize.width;m=S*2,p=t.x-S,m>A&&!this._isInitialRender&&!this._growAfterOpen&&(p=t.x-A/2)}return{top:o,left:p,bottom:c,right:_,width:m,height:s}}_setBoundingBoxStyles(t,e){let n=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=Le(n.height),r.top=Le(n.top),r.bottom=Le(n.bottom),r.width=Le(n.width),r.left=Le(n.left),r.right=Le(n.right),e.overlayX==="center"?r.alignItems="center":r.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?r.justifyContent="center":r.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",s&&(r.maxHeight=Le(s)),o&&(r.maxWidth=Le(o))}this._lastBoundingBoxSize=n,Dr(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Dr(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Dr(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){let n={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){let m=this._viewportRuler.getViewportScrollPosition();Dr(n,this._getExactOverlayY(e,t,m)),Dr(n,this._getExactOverlayX(e,t,m))}else n.position="static";let c="",l=this._getOffset(e,"x"),u=this._getOffset(e,"y");l&&(c+=`translateX(${l}px) `),u&&(c+=`translateY(${u}px)`),n.transform=c.trim(),o.maxHeight&&(r?n.maxHeight=Le(o.maxHeight):s&&(n.maxHeight="")),o.maxWidth&&(r?n.maxWidth=Le(o.maxWidth):s&&(n.maxWidth="")),Dr(this._pane.style,n)}_getExactOverlayY(t,e,n){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),t.overlayY==="bottom"){let o=this._document.documentElement.clientHeight;r.bottom=`${o-(s.y+this._overlayRect.height)}px`}else r.top=Le(s.y);return r}_getExactOverlayX(t,e,n){let r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n));let o;if(this._isRtl()?o=t.overlayX==="end"?"left":"right":o=t.overlayX==="end"?"right":"left",o==="right"){let c=this._document.documentElement.clientWidth;r.right=`${c-(s.x+this._overlayRect.width)}px`}else r.left=Le(s.x);return r}_getScrollVisibility(){let t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:LC(t,n),isOriginOutsideView:v_(t,n),isOverlayClipped:LC(e,n),isOverlayOutsideView:v_(e,n)}}_subtractOverflows(t,...e){return e.reduce((n,r)=>n-Math.max(r,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return e==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&Bs(t).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){let t=this._origin;if(t instanceof ae)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}};function Dr(i,t){for(let e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}function UC(i){if(typeof i!="number"&&i!=null){let[t,e]=i.split(gF);return!e||e==="px"?parseFloat(t):null}return i||null}function BC(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}function _F(i,t){return i===t?!0:i.isOriginClipped===t.isOriginClipped&&i.isOriginOutsideView===t.isOriginOutsideView&&i.isOverlayClipped===t.isOverlayClipped&&i.isOverlayOutsideView===t.isOverlayOutsideView}var zC="cdk-global-overlay-wrapper",E_=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){let e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(zC),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:c}=n,l=(r==="100%"||r==="100vw")&&(!o||o==="100%"||o==="100vw"),u=(s==="100%"||s==="100vh")&&(!c||c==="100%"||c==="100vh"),m=this._xPosition,p=this._xOffset,_=this._overlayRef.getConfig().direction==="rtl",S="",A="",k="";l?k="flex-start":m==="center"?(k="center",_?A=p:S=p):_?m==="left"||m==="end"?(k="flex-end",S=p):(m==="right"||m==="start")&&(k="flex-start",A=p):m==="left"||m==="start"?(k="flex-start",S=p):(m==="right"||m==="end")&&(k="flex-end",A=p),t.position=this._cssPosition,t.marginLeft=l?"0":S,t.marginTop=u?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=l?"0":A,e.justifyContent=k,e.alignItems=u?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(zC),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},vF=(()=>{class i{constructor(e,n,r,s){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=s}global(){return new E_}flexibleConnectedTo(e){return new I_(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static{this.\u0275fac=function(n){return new(n||i)(R(f_),R(X),R(Me),R(qC))}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),bF=0,Fn=(()=>{class i{constructor(e,n,r,s,o,c,l,u,m,p,_,S){this.scrollStrategies=e,this._overlayContainer=n,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=c,this._ngZone=l,this._document=u,this._directionality=m,this._location=p,this._outsideClickDispatcher=_,this._animationsModuleType=S}create(e){let n=this._createHostElement(),r=this._createPaneElement(n),s=this._createPortalOutlet(r),o=new uc(e);return o.direction=o.direction||this._directionality.value,new w_(s,n,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(Ni))}position(){return this._positionBuilder}_createPaneElement(e){let n=this._document.createElement("div");return n.id=`cdk-overlay-${bF++}`,n.classList.add("cdk-overlay-pane"),e.appendChild(n),n}_createHostElement(){let e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(Wn)),new dc(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static{this.\u0275fac=function(n){return new(n||i)(R(mF),R(qC),R(Uc),R(vF),R(fF),R($e),R(q),R(X),R(cu),R(Hn),R(pF),R(ni,8))}}static{this.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var yF=new U("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let i=N(Fn);return()=>i.scrollStrategies.reposition()}});function wF(i){return()=>i.scrollStrategies.reposition()}var IF={provide:yF,deps:[Fn],useFactory:wF},WC=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=H({providers:[Fn,IF],imports:[Pn,OC,p_,p_]})}}return i})();var SF=["mat-menu-item",""],AF=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],RF=["mat-icon, [matMenuItemIcon]","*"];function kF(i,t){i&1&&(Vr(),M(0,"svg",2),te(1,"polygon",3),O())}var DF=["*"];function PF(i,t){if(i&1){let e=ri();M(0,"div",0),me("keydown",function(r){Be(e);let s=ye();return ze(s._handleKeydown(r))})("click",function(){Be(e);let r=ye();return ze(r.closed.emit("click"))})("@transformMenu.start",function(r){Be(e);let s=ye();return ze(s._onAnimationStart(r))})("@transformMenu.done",function(r){Be(e);let s=ye();return ze(s._onAnimationDone(r))}),M(1,"div",1),lt(2),O()()}if(i&2){let e=ye();mi(e._classList),Y("id",e.panelId)("@transformMenu",e._panelAnimationState),Re("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}var C_=new U("MAT_MENU_PANEL"),hc=(()=>{class i{constructor(e,n,r,s,o){this._elementRef=e,this._document=n,this._focusMonitor=r,this._parentMenu=s,this._changeDetectorRef=o,this.role="menuitem",this.disabled=!1,this.disableRipple=!1,this._hovered=new le,this._focused=new le,this._highlighted=!1,this._triggersSubmenu=!1,s?.addItem?.(this)}focus(e,n){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,n):this._getHostElement().focus(n),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){let e=this._elementRef.nativeElement.cloneNode(!0),n=e.querySelectorAll("mat-icon, .material-icons");for(let r=0;r<n.length;r++)n[r].remove();return e.textContent?.trim()||""}_setHighlighted(e){this._highlighted=e,this._changeDetectorRef?.markForCheck()}_setTriggersSubmenu(e){this._triggersSubmenu=e,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}static{this.\u0275fac=function(n){return new(n||i)(D(ae),D(X),D(ic),D(C_,8),D(yt))}}static{this.\u0275cmp=ee({type:i,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-mdc-focus-indicator"],hostVars:8,hostBindings:function(n,r){n&1&&me("click",function(o){return r._checkDisabled(o)})("mouseenter",function(){return r._handleMouseEnter()}),n&2&&(Re("role",r.role)("tabindex",r._getTabIndex())("aria-disabled",r.disabled)("disabled",r.disabled||null),Ne("mat-mdc-menu-item-highlighted",r._highlighted)("mat-mdc-menu-item-submenu-trigger",r._triggersSubmenu))},inputs:{role:"role",disabled:[2,"disabled","disabled",Fe],disableRipple:[2,"disableRipple","disableRipple",Fe]},exportAs:["matMenuItem"],standalone:!0,features:[Xe,ie],attrs:SF,ngContentSelectors:RF,decls:5,vars:3,consts:[[1,"mat-mdc-menu-item-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["viewBox","0 0 5 10","focusable","false","aria-hidden","true",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(n,r){n&1&&(xt(AF),lt(0),M(1,"span",0),lt(2,1),O(),te(3,"div",1),be(4,kF,2,0,":svg:svg",2)),n&2&&(B(3),Y("matRippleDisabled",r.disableRipple||r.disabled)("matRippleTrigger",r._getHostElement()),B(),fi(r._triggersSubmenu?4:-1))},dependencies:[Xg],encapsulation:2,changeDetection:0})}}return i})();var MF=new U("MatMenuContent");var xu={transformMenu:Ah("transformMenu",[Rh("void",Xr({opacity:0,transform:"scale(0.8)"})),ol("void => enter",sl("120ms cubic-bezier(0, 0, 0.2, 1)",Xr({opacity:1,transform:"scale(1)"}))),ol("* => void",sl("100ms 25ms linear",Xr({opacity:0})))]),fadeInItems:Ah("fadeInItems",[Rh("showing",Xr({opacity:1})),ol("void => *",[Xr({opacity:0}),sl("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},Sq=xu.fadeInItems,Aq=xu.transformMenu,OF=0,NF=new U("mat-menu-default-options",{providedIn:"root",factory:FF});function FF(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}var eo=(()=>{class i{get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}set panelClass(e){let n=this._previousPanelClass,r=P({},this._classList);n&&n.length&&n.split(" ").forEach(s=>{r[s]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(s=>{r[s]=!0}),this._elementRef.nativeElement.className=""),this._classList=r}get classList(){return this.panelClass}set classList(e){this.panelClass=e}constructor(e,n,r,s){this._elementRef=e,this._changeDetectorRef=s,this._elevationPrefix="mat-elevation-z",this._baseElevation=null,this._directDescendantItems=new xo,this._classList={},this._panelAnimationState="void",this._animationDone=new le,this.closed=new Oe,this.close=this.closed,this.panelId=`mat-menu-panel-${OF++}`,this._injector=N($e),this.overlayPanelClass=r.overlayPanelClass||"",this._xPosition=r.xPosition,this._yPosition=r.yPosition,this.backdropClass=r.backdropClass,this.overlapTrigger=r.overlapTrigger,this.hasBackdrop=r.hasBackdrop}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new su(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Oi(this._directDescendantItems),Ye(e=>Lr(...e.map(n=>n._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e)),this._directDescendantItems.changes.subscribe(e=>{let n=this._keyManager;if(this._panelAnimationState==="enter"&&n.activeItem?._hasFocus()){let r=e.toArray(),s=Math.max(0,Math.min(r.length-1,n.activeItemIndex||0));r[s]&&!r[s].disabled?n.setActiveItem(s):n.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusRef?.destroy()}_hovered(){return this._directDescendantItems.changes.pipe(Oi(this._directDescendantItems),Ye(n=>Lr(...n.map(r=>r._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){let n=e.keyCode,r=this._keyManager;switch(n){case 27:tu(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&this.direction==="ltr"&&this.closed.emit("keydown");break;case 39:this.parentMenu&&this.direction==="rtl"&&this.closed.emit("keydown");break;default:(n===38||n===40)&&r.setFocusOrigin("keyboard"),r.onKeydown(e);return}e.stopPropagation()}focusFirstItem(e="program"){this._firstItemFocusRef?.destroy(),this._firstItemFocusRef=qn(()=>{let n=null;if(this._directDescendantItems.length&&(n=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!n||!n.contains(document.activeElement)){let r=this._keyManager;r.setFocusOrigin(e).setFirstItemActive(),!r.activeItem&&n&&n.focus()}},{injector:this._injector})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){if(this._baseElevation===null){let c=(typeof getComputedStyle=="function"?getComputedStyle(this._elementRef.nativeElement):null)?.getPropertyValue("--mat-menu-base-elevation-level")||"8";this._baseElevation=parseInt(c)}let n=Math.min(this._baseElevation+e,24),r=`${this._elevationPrefix}${n}`,s=Object.keys(this._classList).find(o=>o.startsWith(this._elevationPrefix));if(!s||s===this._previousElevation){let o=P({},this._classList);this._previousElevation&&(o[this._previousElevation]=!1),o[r]=!0,this._previousElevation=r,this._classList=o}}setPositionClasses(e=this.xPosition,n=this.yPosition){this._classList=he(P({},this._classList),{"mat-menu-before":e==="before","mat-menu-after":e==="after","mat-menu-above":n==="above","mat-menu-below":n==="below"}),this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,e.toState==="enter"&&this._keyManager.activeItemIndex===0&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(Oi(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(n=>n._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}static{this.\u0275fac=function(n){return new(n||i)(D(ae),D(q),D(NF),D(yt))}}static{this.\u0275cmp=ee({type:i,selectors:[["mat-menu"]],contentQueries:function(n,r,s){if(n&1&&(pi(s,MF,5),pi(s,hc,5),pi(s,hc,4)),n&2){let o;_t(o=vt())&&(r.lazyContent=o.first),_t(o=vt())&&(r._allItems=o),_t(o=vt())&&(r.items=o)}},viewQuery:function(n,r){if(n&1&&Fi(zr,5),n&2){let s;_t(s=vt())&&(r.templateRef=s.first)}},hostVars:3,hostBindings:function(n,r){n&2&&Re("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},inputs:{backdropClass:"backdropClass",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:[2,"overlapTrigger","overlapTrigger",Fe],hasBackdrop:[2,"hasBackdrop","hasBackdrop",e=>e==null?null:Fe(e)],panelClass:[0,"class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"},exportAs:["matMenu"],standalone:!0,features:[bt([{provide:C_,useExisting:i}]),Xe,ie],ngContentSelectors:DF,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel","mat-mdc-elevation-specific",3,"keydown","click","id"],[1,"mat-mdc-menu-content"]],template:function(n,r){n&1&&(xt(),be(0,PF,3,7,"ng-template"))},styles:['mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;outline:0}.mat-mdc-menu-content,.mat-mdc-menu-content .mat-mdc-menu-item .mat-mdc-menu-item-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;flex:1;white-space:normal;font-family:var(--mat-menu-item-label-text-font, var(--mat-app-label-large-font));line-height:var(--mat-menu-item-label-text-line-height, var(--mat-app-label-large-line-height));font-size:var(--mat-menu-item-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mat-menu-item-label-text-tracking, var(--mat-app-label-large-tracking));font-weight:var(--mat-menu-item-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;box-sizing:border-box;outline:0;border-radius:var(--mat-menu-container-shape, var(--mat-app-corner-extra-small));background-color:var(--mat-menu-container-color, var(--mat-app-surface-container));will-change:transform,opacity}.mat-mdc-menu-panel.ng-animating{pointer-events:none}.mat-mdc-menu-panel.ng-animating:has(.mat-mdc-menu-content:empty){display:none}.cdk-high-contrast-active .mat-mdc-menu-panel{outline:solid 1px}.mat-mdc-menu-panel .mat-divider{color:var(--mat-menu-divider-color, var(--mat-app-surface-variant));margin-bottom:var(--mat-menu-divider-bottom-spacing);margin-top:var(--mat-menu-divider-top-spacing)}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:var(--mat-menu-item-leading-spacing);padding-right:var(--mat-menu-item-trailing-spacing);-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px}[dir=rtl] .mat-mdc-menu-item{padding-right:var(--mat-menu-item-leading-spacing);padding-left:var(--mat-menu-item-trailing-spacing)}.mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-leading-spacing);padding-right:var(--mat-menu-item-with-icon-trailing-spacing)}[dir=rtl] .mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-right:var(--mat-menu-item-with-icon-leading-spacing);padding-left:var(--mat-menu-item-with-icon-trailing-spacing)}.mat-mdc-menu-item::-moz-focus-inner{border:0}.mat-mdc-menu-item,.mat-mdc-menu-item:visited,.mat-mdc-menu-item:link{color:var(--mat-menu-item-label-text-color, var(--mat-app-on-surface))}.mat-mdc-menu-item .mat-icon-no-color,.mat-mdc-menu-item .mat-mdc-menu-submenu-icon{color:var(--mat-menu-item-icon-color, var(--mat-app-on-surface-variant))}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item:focus{outline:0}.mat-mdc-menu-item .mat-icon{flex-shrink:0;margin-right:var(--mat-menu-item-spacing);height:var(--mat-menu-item-icon-size);width:var(--mat-menu-item-icon-size)}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:var(--mat-menu-item-spacing)}.mat-mdc-menu-item:not([disabled]):hover{background-color:var(--mat-menu-item-hover-state-layer-color)}.mat-mdc-menu-item:not([disabled]).cdk-program-focused,.mat-mdc-menu-item:not([disabled]).cdk-keyboard-focused,.mat-mdc-menu-item:not([disabled]).mat-mdc-menu-item-highlighted{background-color:var(--mat-menu-item-focus-state-layer-color)}.cdk-high-contrast-active .mat-mdc-menu-item{margin-top:1px}.mat-mdc-menu-submenu-icon{width:var(--mat-menu-item-icon-size);height:10px;fill:currentColor;padding-left:var(--mat-menu-item-spacing)}[dir=rtl] .mat-mdc-menu-submenu-icon{padding-right:var(--mat-menu-item-spacing);padding-left:0}[dir=rtl] .mat-mdc-menu-submenu-icon polygon{transform:scaleX(-1);transform-origin:center}.cdk-high-contrast-active .mat-mdc-menu-submenu-icon{fill:CanvasText}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[xu.transformMenu,xu.fadeInItems]},changeDetection:0})}}return i})(),GC=new U("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{let i=N(Fn);return()=>i.scrollStrategies.reposition()}});function LF(i){return()=>i.scrollStrategies.reposition()}var VF={provide:GC,deps:[Fn],useFactory:LF},HC=Dn({passive:!0});var KC=(()=>{class i{get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._parentMaterialMenu,this._menuCloseSubscription=e.close.subscribe(n=>{this._destroyMenu(n),(n==="click"||n==="tab")&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(n)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}constructor(e,n,r,s,o,c,l,u,m){this._overlay=e,this._element=n,this._viewContainerRef=r,this._menuItemInstance=c,this._dir=l,this._focusMonitor=u,this._ngZone=m,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=Et.EMPTY,this._hoverSubscription=Et.EMPTY,this._menuCloseSubscription=Et.EMPTY,this._changeDetectorRef=N(yt),this._handleTouchStart=p=>{tc(p)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new Oe,this.onMenuOpen=this.menuOpened,this.menuClosed=new Oe,this.onMenuClose=this.menuClosed,this._scrollStrategy=s,this._parentMaterialMenu=o instanceof eo?o:void 0,n.nativeElement.addEventListener("touchstart",this._handleTouchStart,HC)}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,HC),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){let e=this.menu;if(this._menuOpen||!e)return;let n=this._createOverlay(e),r=n.getConfig(),s=r.positionStrategy;this._setPosition(e,s),r.hasBackdrop=e.hasBackdrop==null?!this.triggersSubmenu():e.hasBackdrop,n.attach(this._getPortal(e)),e.lazyContent&&e.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(e),e instanceof eo&&(e._startAnimation(),e._directDescendantItems.changes.pipe(Nt(e.close)).subscribe(()=>{s.withLockedPosition(!1).reapplyLastPosition(),s.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(e,n){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,n):this._element.nativeElement.focus(n)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;let n=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&(e==="keydown"||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,n instanceof eo?(n._resetAnimation(),n.lazyContent?n._animationDone.pipe(Ue(r=>r.toState==="void"),ct(1),Nt(n.lazyContent._attached)).subscribe({next:()=>n.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),n?.lazyContent?.detach())}_initMenu(e){e.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,e.direction=this.dir,this._setMenuElevation(e),e.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(e){if(e.setElevation){let n=0,r=e.parentMenu;for(;r;)n++,r=r.parentMenu;e.setElevation(n)}}_setIsMenuOpen(e){e!==this._menuOpen&&(this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(e),this._changeDetectorRef.markForCheck())}_createOverlay(e){if(!this._overlayRef){let n=this._getOverlayConfig(e);this._subscribeToPositions(e,n.positionStrategy),this._overlayRef=this._overlay.create(n),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(e){return new uc({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:e.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:e.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e,n){e.setPositionClasses&&n.positionChanges.subscribe(r=>{let s=r.connectionPair.overlayX==="start"?"after":"before",o=r.connectionPair.overlayY==="top"?"below":"above";this._ngZone?this._ngZone.run(()=>e.setPositionClasses(s,o)):e.setPositionClasses(s,o)})}_setPosition(e,n){let[r,s]=e.xPosition==="before"?["end","start"]:["start","end"],[o,c]=e.yPosition==="above"?["bottom","top"]:["top","bottom"],[l,u]=[o,c],[m,p]=[r,s],_=0;if(this.triggersSubmenu()){if(p=r=e.xPosition==="before"?"start":"end",s=m=r==="end"?"start":"end",this._parentMaterialMenu){if(this._parentInnerPadding==null){let S=this._parentMaterialMenu.items.first;this._parentInnerPadding=S?S._getHostElement().offsetTop:0}_=o==="bottom"?this._parentInnerPadding:-this._parentInnerPadding}}else e.overlapTrigger||(l=o==="top"?"bottom":"top",u=c==="top"?"bottom":"top");n.withPositions([{originX:r,originY:l,overlayX:m,overlayY:o,offsetY:_},{originX:s,originY:l,overlayX:p,overlayY:o,offsetY:_},{originX:r,originY:u,overlayX:m,overlayY:c,offsetY:-_},{originX:s,originY:u,overlayX:p,overlayY:c,offsetY:-_}])}_menuClosingActions(){let e=this._overlayRef.backdropClick(),n=this._overlayRef.detachments(),r=this._parentMaterialMenu?this._parentMaterialMenu.closed:z(),s=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Ue(o=>o!==this._menuItemInstance),Ue(()=>this._menuOpen)):z();return Lr(e,r,s,n)}_handleMousedown(e){ec(e)||(this._openedBy=e.button===0?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){let n=e.keyCode;(n===13||n===32)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(n===39&&this.dir==="ltr"||n===37&&this.dir==="rtl")&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(Ue(e=>e===this._menuItemInstance&&!e.disabled),_h(0,Pc)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof eo&&this.menu._isAnimating?this.menu._animationDone.pipe(ct(1),_h(0,Pc),Nt(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(e){return(!this._portal||this._portal.templateRef!==e.templateRef)&&(this._portal=new Js(e.templateRef,this._viewContainerRef)),this._portal}static{this.\u0275fac=function(n){return new(n||i)(D(Fn),D(ae),D($n),D(GC),D(C_,8),D(hc,10),D(cu,8),D(ic),D(q))}}static{this.\u0275dir=ge({type:i,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],hostVars:3,hostBindings:function(n,r){n&1&&me("click",function(o){return r._handleClick(o)})("mousedown",function(o){return r._handleMousedown(o)})("keydown",function(o){return r._handleKeydown(o)}),n&2&&Re("aria-haspopup",r.menu?"menu":null)("aria-expanded",r.menuOpen)("aria-controls",r.menuOpen?r.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:[0,"mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:[0,"matMenuTriggerFor","menu"],menuData:[0,"matMenuTriggerData","menuData"],restoreFocus:[0,"matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"],standalone:!0})}}return i})(),QC=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=H({providers:[VF],imports:[Lt,$s,ve,WC,kr,ve]})}}return i})();var YC=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=H({imports:[ve,kr,kr,ve]})}}return i})();var UF=["*",[["mat-toolbar-row"]]],BF=["*","mat-toolbar-row"],zF=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=ge({type:i,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"],standalone:!0})}}return i})(),XC=(()=>{class i{constructor(e,n,r){this._elementRef=e,this._platform=n,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}static{this.\u0275fac=function(n){return new(n||i)(D(ae),D(Me),D(X))}}static{this.\u0275cmp=ee({type:i,selectors:[["mat-toolbar"]],contentQueries:function(n,r,s){if(n&1&&pi(s,zF,5),n&2){let o;_t(o=vt())&&(r._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(n,r){n&2&&(mi(r.color?"mat-"+r.color:""),Ne("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",r._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],standalone:!0,features:[ie],ngContentSelectors:BF,decls:2,vars:0,template:function(n,r){n&1&&(xt(UF),lt(0),lt(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-app-surface));color:var(--mat-toolbar-container-text-color, var(--mat-app-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-app-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-app-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-app-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-app-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-app-title-large-tracking));margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-app-on-surface));--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-app-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0})}}return i})();var ZC=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=H({imports:[ve,ve]})}}return i})();var Su=class i{constructor(t){this.http=t}generateWords(t){return this.http.post("https://api.tower-ed.xyz/api/generate-vocab",{prompt:t}).pipe(W(e=>!e.response||e.response==""?"":JSON.parse(e.response)))}static \u0275fac=function(e){return new(e||i)(R(jo))};static \u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"})};function qF(i,t){if(i&1){let e=ri();zc(0),M(1,"a",9),$(2,"My Profile"),O(),M(3,"a",10),me("click",function(){Be(e);let r=ye();return ze(r.logout())}),$(4,"Log Out"),O(),$c()}}function WF(i,t){i&1&&(M(0,"a",11),$(1,"Log In"),O())}var Au=class i{router=N(Ze);accountService=N(qe);user$=this.accountService.user$;logout(){this.accountService.logout().pipe(Ct()).subscribe({next:()=>{this.router.navigateByUrl("/")},error:t=>{console.log(t)}})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=ee({type:i,selectors:[["app-layout"]],standalone:!0,features:[ie],decls:16,vars:5,consts:[["menu","matMenu"],["login",""],[1,"toolbar"],["routerLink","home","src","assets/img/tower.jpg","alt","tower icon",1,"icon"],[1,"title"],["routerLink","home"],[1,"toolbar-spacer"],["mat-icon-button","",3,"matMenuTriggerFor"],[4,"ngIf","ngIfElse"],["mat-menu-item","","routerLink","/account/profile"],["mat-menu-item","",3,"click"],["mat-menu-item","","routerLink","/account/login"]],template:function(e,n){if(e&1&&(M(0,"mat-toolbar",2),te(1,"img",3),M(2,"span",4)(3,"a",5),$(4,"Tower"),O()(),te(5,"span",6),M(6,"button",7)(7,"mat-icon"),$(8,"account_circle"),O()(),M(9,"mat-menu",null,0),be(11,qF,5,0,"ng-container",8),Kc(12,"async"),be(13,WF,2,0,"ng-template",null,1,Gr),O()(),te(15,"router-outlet")),e&2){let r=Li(10),s=Li(14);B(6),Y("matMenuTriggerFor",r),B(5),Y("ngIf",Qc(12,3,n.user$))("ngIfElse",s)}},dependencies:[ym,Kt,vi,il,Ws,eC,qs,KE,ZC,XC,YC,MC,QC,eo,hc,KC],styles:[".title[_ngcontent-%COMP%]{font-family:Lily Script One;font-size:3rem}.title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{all:unset;cursor:pointer}.icon[_ngcontent-%COMP%]{width:4rem;height:4rem;margin:.5rem 1rem;cursor:pointer;clip-path:circle()}.toolbar[_ngcontent-%COMP%]{height:fit-content}.toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]})};var mc=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=H({imports:[ve,Lt,iu,ve]})}}return i})();var JC=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=H({})}}return i})();var eT=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=H({imports:[ve,mc,mc,JC,ve]})}}return i})();var HF=i=>["/set",i];function GF(i,t){if(i&1&&(M(0,"button",2)(1,"span"),$(2),O()()),i&2){let e=t.$implicit,n=t.$index;Y("routerLink",gi(2,HF,n)),B(2),Do("",e.title," ")}}var Ru=class i{constructor(t){this.accountService=t}collection;ngOnInit(){this.accountService.userCollection.subscribe(t=>{this.collection=t})}static \u0275fac=function(e){return new(e||i)(D(qe))};static \u0275cmp=ee({type:i,selectors:[["app-flashcard-page"]],standalone:!0,features:[ie],decls:10,vars:0,consts:[[1,"flashcard-page-container"],[1,"flashcard-grid"],[1,"home-button",3,"routerLink"],["routerLink","/new-set",1,"home-button"],["src","assets/icons/add-sign.svg"]],template:function(e,n){e&1&&(M(0,"h2"),$(1,"Welcome Back!"),O(),M(2,"div",0)(3,"div",1),Wr(4,GF,3,4,"button",2,qr),M(6,"button",3)(7,"span"),$(8,"New Set"),O(),te(9,"img",4),O()()()),e&2&&(B(4),Hr(n.collection))},dependencies:[qs,Ws,mc,eT,Kt],styles:[".flashcard-page-container[_ngcontent-%COMP%]{display:flex;width:fit-content;margin:10% auto auto}.flashcard-grid[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;flex-wrap:wrap}h2[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:center;font-family:Lily Script One}.add-card[_ngcontent-%COMP%]{box-shadow:5px 5px #00000080;border-radius:15px;border:1px dashed black;width:100px;height:150px;cursor:pointer;position:relative;display:flex;justify-content:center;align-items:center}.add-card[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{font-size:48px;color:#00000080;width:auto;height:auto}.flashcard-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr 1fr;gap:20px;justify-items:center;margin:20% 20% 0}.card-input[_ngcontent-%COMP%]{margin-top:20px;width:160px;height:80px;padding:0 20px;position:relative;left:37%}.flashcard[_ngcontent-%COMP%]{grid-column:2/3;grid-row:1;width:fit-content}.left-button[_ngcontent-%COMP%]{grid-column:0/3;grid-row:1;top:30%;align-items:center}.right-button[_ngcontent-%COMP%]{grid-column:3/3;grid-row:1;top:30%;align-items:center}.home-button[_ngcontent-%COMP%]{width:240px;height:160px;border-radius:24px;background-color:#d9d9d9;margin:10px;display:inline-block;text-align:center;justify-content:center;cursor:pointer}.home-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Libre Bodoni;font-weight:700;font-size:30px}.home-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;display:block;margin:auto}"]})};var tT=i=>({"is-invalid":i});function KF(i,t){i&1&&(M(0,"div"),$(1,"Email is required"),O())}function QF(i,t){if(i&1&&(M(0,"div",12),be(1,KF,2,0,"div",13),O()),i&2){let e=ye();B(),Y("ngIf",e.f.email.errors.required)}}function YF(i,t){i&1&&(M(0,"div"),$(1,"Password is required"),O())}function XF(i,t){if(i&1&&(M(0,"div",12),be(1,YF,2,0,"div",13),O()),i&2){let e=ye();B(),Y("ngIf",e.f.password.errors.required)}}function ZF(i,t){i&1&&te(0,"span",14)}var ku=class i{constructor(t,e,n){this.formBuilder=t;this.router=e;this.accountService=n}form;loading=!1;submitted=!1;ngOnInit(){this.form=this.formBuilder.group({email:["",hi.required,hi.email],password:["",hi.required]})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,!this.form.invalid&&(this.loading=!0,this.accountService.login(this.f.email.value,this.f.password.value).pipe(Ct()).subscribe({next:()=>{this.router.navigateByUrl("/")},error:t=>{this.loading=!1}}))}static \u0275fac=function(e){return new(e||i)(D(Eu),D(Ze),D(qe))};static \u0275cmp=ee({type:i,selectors:[["app-login"]],standalone:!0,features:[ie],decls:21,vars:11,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"form-label"],["type","text","formControlName","email",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],["routerLink","../register"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(e,n){e&1&&(M(0,"div",0)(1,"h4",1),$(2,"Login"),O(),M(3,"div",2)(4,"form",3),me("ngSubmit",function(){return n.onSubmit()}),M(5,"div",4)(6,"label",5),$(7,"Email"),O(),te(8,"input",6),be(9,QF,2,1,"div",7),O(),M(10,"div",4)(11,"label",5),$(12,"Password"),O(),te(13,"input",8),be(14,XF,2,1,"div",7),O(),M(15,"div")(16,"button",9),be(17,ZF,1,0,"span",10),$(18," Login "),O(),M(19,"button",11),$(20,"Register"),O()()()()()),e&2&&(B(4),Y("formGroup",n.form),B(4),Y("ngClass",gi(7,tT,n.submitted&&n.f.email.errors)),B(),Y("ngIf",n.submitted&&n.f.email.errors),B(4),Y("ngClass",gi(9,tT,n.submitted&&n.f.password.errors)),B(),Y("ngIf",n.submitted&&n.f.password.errors),B(2),Y("disabled",n.loading),B(),Y("ngIf",n.loading))},dependencies:[Lt,Yr,vi,Zs,Xs,ki,Nn,Ys,Ar,Rr,Kt]})};var iT=i=>({"is-invalid":i});function JF(i,t){i&1&&(M(0,"div"),$(1,"Email is required"),O())}function eL(i,t){if(i&1&&(M(0,"div",12),be(1,JF,2,0,"div",13),O()),i&2){let e=ye();B(),Y("ngIf",e.f.email.errors.required)}}function tL(i,t){i&1&&(M(0,"div"),$(1,"Password is required"),O())}function iL(i,t){i&1&&(M(0,"div"),$(1," Password must be at least 6 characters "),O())}function nL(i,t){if(i&1&&(M(0,"div",12),be(1,tL,2,0,"div",13)(2,iL,2,0,"div",13),O()),i&2){let e=ye();B(),Y("ngIf",e.f.password.errors.required),B(),Y("ngIf",e.f.password.errors.minlength)}}function rL(i,t){i&1&&te(0,"span",14)}var Du=class i{constructor(t,e,n,r){this.formBuilder=t;this.route=e;this.router=n;this.accountService=r}form;loading=!1;submitted=!1;get f(){return this.form.controls}ngOnInit(){this.form=this.formBuilder.group({email:["",[hi.required,hi.email]],password:["",[hi.required,hi.minLength(6)]]})}onSubmit(){this.submitted=!0,!this.form.invalid&&(this.loading=!0,this.accountService.register(this.f.email.value,this.f.password.value).pipe(Ct()).subscribe({next:()=>{this.router.navigate(["../login"],{relativeTo:this.route})},error:t=>{this.loading=!1}}))}static \u0275fac=function(e){return new(e||i)(D(Eu),D(wi),D(Ze),D(qe))};static \u0275cmp=ee({type:i,selectors:[["app-register"]],standalone:!0,features:[ie],decls:21,vars:11,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"form-label"],["type","text","formControlName","email",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],["routerLink","/"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(e,n){e&1&&(M(0,"div",0)(1,"h4",1),$(2,"Register"),O(),M(3,"div",2)(4,"form",3),me("ngSubmit",function(){return n.onSubmit()}),M(5,"div",4)(6,"label",5),$(7,"Email"),O(),te(8,"input",6),be(9,eL,2,1,"div",7),O(),M(10,"div",4)(11,"label",5),$(12,"Password"),O(),te(13,"input",8),be(14,nL,3,2,"div",7),O(),M(15,"div")(16,"button",9),be(17,rL,1,0,"span",10),$(18," Register "),O(),M(19,"button",11),$(20,"Cancel"),O()()()()()),e&2&&(B(4),Y("formGroup",n.form),B(4),Y("ngClass",gi(7,iT,n.submitted&&n.f.email.errors)),B(),Y("ngIf",n.submitted&&n.f.email.errors),B(4),Y("ngClass",gi(9,iT,n.submitted&&n.f.password.errors)),B(),Y("ngIf",n.submitted&&n.f.password.errors),B(2),Y("disabled",n.loading),B(),Y("ngIf",n.loading))},dependencies:[Lt,Yr,vi,Zs,Xs,ki,Nn,Ys,Ar,Rr,Kt]})};function sL(i,t){if(i&1&&(M(0,"p"),$(1),O()),i&2){let e=ye().ngIf;B(),Do("Email: ",e.email,"")}}function oL(i,t){i&1&&(M(0,"p"),$(1,"We're having trouble loading this"),O())}function aL(i,t){if(i&1&&(zc(0),be(1,sL,2,1,"p")(2,oL,2,0,"p"),$c()),i&2){let e=t.ngIf;B(),fi(e!=null?1:2)}}var Pu=class i{accountService=N(qe);user$=this.accountService.user$;static \u0275fac=function(e){return new(e||i)};static \u0275cmp=ee({type:i,selectors:[["app-profile"]],standalone:!0,features:[ie],decls:2,vars:3,consts:[[4,"ngIf"]],template:function(e,n){e&1&&(be(0,aL,3,1,"ng-container",0),Kc(1,"async")),e&2&&Y("ngIf",Qc(1,1,n.user$))},dependencies:[il,vi]})};var fc=class{frontText="";backText="";constructor(t="",e=""){this.frontText=t,this.backText=e}},to={title:"",cards:[{frontText:"",backText:""},{frontText:"",backText:""},{frontText:"",backText:""},{frontText:"",backText:""},{frontText:"",backText:""}]};var Mu=class i{constructor(t){this.accountService=t;this.accountService.userCollection.subscribe(e=>{this.userCollection=e})}set;idx=0;form;userCollection=[];id;ngOnInit(){this.form=new Qs({answer:new Tr("")}),this.set=this.userCollection.at(+this.id)||to}onSubmit(){(this.form.get("answer")?.value||"")===this.set.cards.at(this.idx)?.backText?(this.idx+=1,this.form.reset()):console.log("wrong")}static \u0275fac=function(e){return new(e||i)(D(qe))};static \u0275cmp=ee({type:i,selectors:[["app-quiz"]],inputs:{id:"id"},standalone:!0,features:[ie],decls:10,vars:2,consts:[[1,"page-container"],[1,"flashcard"],[1,"answer",3,"ngSubmit","formGroup"],["formControlName","answer","type","text","placeholder","Type here..."],["type","submit",1,"submit"]],template:function(e,n){if(e&1&&(M(0,"div",0)(1,"h2"),$(2,"Test Your Skills!"),O(),M(3,"button",1)(4,"span"),$(5),O()(),M(6,"form",2),me("ngSubmit",function(){return n.onSubmit()}),te(7,"input",3),M(8,"button",4),$(9,"Enter"),O()()()),e&2){let r;B(5),si((r=n.set.cards.at(n.idx))==null?null:r.frontText),B(),Y("formGroup",n.form)}},dependencies:[Zs,Xs,ki,Nn,Ys,Ar,Rr],styles:["h2[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:center;font-family:Lily Script One}.page-container[_ngcontent-%COMP%]{display:block;width:75%;margin:20px auto 60px;text-align:center;position:relative}button.flashcard[_ngcontent-%COMP%]{width:500px;height:250px;border-radius:24px;background-color:#d9d9d9;margin:40px;display:inline-block;text-align:center;justify-content:center;cursor:pointer}button.flashcard[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Libre Bodoni;font-weight:700;font-size:30px}.answer[_ngcontent-%COMP%]{display:grid;grid-template-rows:1fr 1fr;width:40%;margin:auto;gap:30px}.answer[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{grid-column:1/span 3;width:100%;padding:5px;font-family:Libre Bodoni;font-size:20px}.answer[_ngcontent-%COMP%]   button.submit[_ngcontent-%COMP%]{grid-column:3;justify-self:end;padding:10px 20px;border-radius:15px;font-family:Libre Bodoni;font-size:15px;font-style:italic;background-color:#34944d;color:#fff}"]})};var cL=["determinateSpinner"];function lL(i,t){if(i&1&&(Vr(),M(0,"svg",11),te(1,"circle",12),O()),i&2){let e=ye();Re("viewBox",e._viewBox()),B(),$r("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),Re("r",e._circleRadius())}}var dL=new U("mat-progress-spinner-default-options",{providedIn:"root",factory:uL});function uL(){return{diameter:nT}}var nT=100,hL=10,rT=(()=>{class i{get color(){return this._color||this._defaultColor}set color(e){this._color=e}constructor(e,n,r){this._elementRef=e,this._defaultColor="primary",this._value=0,this._diameter=nT,this._noopAnimations=n==="NoopAnimations"&&!!r&&!r._forceAnimations,this.mode=e.nativeElement.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",r&&(r.color&&(this.color=this._defaultColor=r.color),r.diameter&&(this.diameter=r.diameter),r.strokeWidth&&(this.strokeWidth=r.strokeWidth))}get value(){return this.mode==="determinate"?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,e||0))}get diameter(){return this._diameter}set diameter(e){this._diameter=e||0}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=e||0}_circleRadius(){return(this.diameter-hL)/2}_viewBox(){let e=this._circleRadius()*2+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static{this.\u0275fac=function(n){return new(n||i)(D(ae),D(ni,8),D(dL))}}static{this.\u0275cmp=ee({type:i,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(n,r){if(n&1&&Fi(cL,5),n&2){let s;_t(s=vt())&&(r._determinateCircle=s.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(n,r){n&2&&(Re("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",r.mode==="determinate"?r.value:null)("mode",r.mode),mi("mat-"+r.color),$r("width",r.diameter,"px")("height",r.diameter,"px")("--mdc-circular-progress-size",r.diameter+"px")("--mdc-circular-progress-active-indicator-width",r.diameter+"px"),Ne("_mat-animation-noopable",r._noopAnimations)("mdc-circular-progress--indeterminate",r.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[2,"value","value",Po],diameter:[2,"diameter","diameter",Po],strokeWidth:[2,"strokeWidth","strokeWidth",Po]},exportAs:["matProgressSpinner"],standalone:!0,features:[Xe,ie],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(n,r){if(n&1&&(be(0,lL,2,8,"ng-template",null,0,Gr),M(2,"div",2,1),Vr(),M(4,"svg",3),te(5,"circle",4),O()(),Ih(),M(6,"div",5)(7,"div",6)(8,"div",7),qc(9,8),O(),M(10,"div",9),qc(11,8),O(),M(12,"div",10),qc(13,8),O()()()),n&2){let s=Li(1);B(4),Re("viewBox",r._viewBox()),B(),$r("stroke-dasharray",r._strokeCircumference(),"px")("stroke-dashoffset",r._strokeDashOffset(),"px")("stroke-width",r._circleStrokeWidth(),"%"),Re("r",r._circleRadius()),B(4),Y("ngTemplateOutlet",s),B(2),Y("ngTemplateOutlet",s),B(2),Y("ngTemplateOutlet",s)}},dependencies:[tl],styles:[".mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-app-primary))}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}"],encapsulation:2,changeDetection:0})}}return i})();var sT=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=G({type:i})}static{this.\u0275inj=H({imports:[Lt,ve]})}}return i})();function fL(i,t){i&1&&(M(0,"div",12),te(1,"mat-spinner"),O())}function pL(i,t){if(i&1){let e=ri();M(0,"button",16),me("click",function(){Be(e);let r=ye().$index,s=ye();return ze(s.set.cards.splice(r,1))}),$(1," Del "),O()}}function gL(i,t){if(i&1){let e=ri();M(0,"div",9)(1,"tr")(2,"td",13),$(3),O(),M(4,"td")(5,"input",14),Gc("ngModelChange",function(r){let s=Be(e).$implicit;return Hc(s.frontText,r)||(s.frontText=r),ze(r)}),me("focus",function(){let r=Be(e).$index,s=ye();return ze(s.idx=r)}),O()(),M(6,"td")(7,"input",14),Gc("ngModelChange",function(r){let s=Be(e).$implicit;return Hc(s.backText,r)||(s.backText=r),ze(r)}),me("focus",function(){let r=Be(e).$index,s=ye();return ze(s.idx=r)}),O()()(),be(8,pL,2,0,"button",15),O()}if(i&2){let e=t.$implicit,n=t.$index,r=ye();B(3),si(n+1),B(2),Wc("ngModel",e.frontText),B(2),Wc("ngModel",e.backText),B(),fi(n==r.idx?8:-1)}}var Ou=class i{constructor(t,e){this.promptService=t;this.accountService=e}set=to;idx=-1;loading=!1;addRow(){this.set.cards.push(new fc)}save(){this.set.title=this.set.title||"New Set",this.accountService.addFlashcardSet(this.set).subscribe(t=>{t==null&&console.log("must log in!"),console.log(t)})}del(t){this.set.cards.splice(t,1)}generateWords(t){t&&(this.loading=!0,this.promptService.generateWords(t).subscribe(e=>{this.set={title:"",cards:this.createSet(e)},this.loading=!1}))}createSet(t){let e=[];for(let n of t)e.push(new fc(n.english_word,n.translation));return e}static \u0275fac=function(e){return new(e||i)(D(Su),D(qe))};static \u0275cmp=ee({type:i,selectors:[["app-new-set"]],standalone:!0,features:[ie],decls:22,vars:2,consts:[["text",""],[1,"page-container"],[1,"text-container"],["placeholder","Type here...",1,"text"],["class","spinner-container",4,"ngIf"],[3,"click"],[1,"table-container"],[3,"ngModelChange","ngModel"],[1,"flashcard-table"],[1,"row"],[1,"add-button",3,"click"],["src","assets/icons/add-sign.svg"],[1,"spinner-container"],[1,"index"],[3,"ngModelChange","focus","ngModel"],[1,"del-button"],[1,"del-button",3,"click"]],template:function(e,n){if(e&1){let r=ri();M(0,"div",1)(1,"h2"),$(2,"Create a New Set!"),O(),M(3,"p"),$(4," Enter a prompt describing the words or topics you want to study! (eg. I want to learn about the parts of a car in Spanish/Norwegian/French, such as tires, pedals, and headlights.) You can also enter your words manually! "),O(),M(5,"div",2),te(6,"textarea",3,0),be(8,fL,2,0,"div",4),O(),M(9,"button",5),me("click",function(){Be(r);let o=Li(7);return ze(n.generateWords(o.value))}),$(10,"Generate!"),O(),M(11,"div",6)(12,"p"),$(13,"Set Title:"),O(),M(14,"input",7),Gc("ngModelChange",function(o){return Be(r),Hc(n.set.title,o)||(n.set.title=o),ze(o)}),O(),M(15,"table",8),Wr(16,gL,9,4,"div",9,qr),O(),M(18,"button",10),me("click",function(){return Be(r),ze(n.addRow())}),te(19,"img",11),O()(),M(20,"button",5),me("click",function(){return Be(r),ze(n.save())}),$(21,"Save"),O()()}e&2&&(B(8),Y("ngIf",n.loading),B(6),Wc("ngModel",n.set.title),B(2),Hr(n.set.cards))},dependencies:[vi,PC,ki,Nn,d_,sT,rT],styles:["h2[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:center;font-family:Lily Script One}p[_ngcontent-%COMP%]{font-family:Libre Bodoni;width:80%;margin:auto}.text-container[_ngcontent-%COMP%]{height:8rem;margin:1rem 1rem 3rem;position:relative}.text[_ngcontent-%COMP%], .spinner-container[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0;border-radius:.5rem;background-color:#d9d9d9;padding:1rem;margin:0;border:2px;font-family:Libre Bodoni}.spinner-container[_ngcontent-%COMP%]{z-index:10;background-color:#38383893}.page-container[_ngcontent-%COMP%]{display:block;width:75%;margin:20px auto 60px;text-align:center;position:relative}button.flashcard[_ngcontent-%COMP%]{cursor:pointer}button.flashcard[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Libre Bodoni;font-weight:700;font-size:30px}.flashcard-table[_ngcontent-%COMP%]{border:1px solid black;width:100%}.flashcard-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid black;width:fit-content}.flashcard-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:fit-content;all:unset}.flashcard-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]:first-child{width:1%;white-space:nowrap}.highlighted-row[_ngcontent-%COMP%]{background-color:#d9d9d9}.table-container[_ngcontent-%COMP%]{position:relative;width:80%;margin:auto}.add-button[_ngcontent-%COMP%]{all:unset;position:absolute;right:0;cursor:pointer}.add-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px}.save-button[_ngcontent-%COMP%]{position:absolute;left:0}.del-button[_ngcontent-%COMP%]{position:absolute;top:5px;right:-40px}.row[_ngcontent-%COMP%]{position:relative}"]})};var _L=i=>["/quiz",i];function vL(i,t){if(i&1&&(M(0,"tr",7)(1,"td",8),$(2),O(),M(3,"td"),$(4),O(),M(5,"td"),$(6),O()()),i&2){let e=t.$implicit,n=t.$index,r=ye();Y("ngClass",n==r.idx?"highlighted-row":null),B(2),si(n+1),B(2),si(e.frontText),B(2),si(e.backText)}}var Nu=class i{constructor(t){this.accountService=t;this.collectionSubscription=this.accountService.userCollection.subscribe(e=>{this.userCollection=e})}title;cards;collectionSubscription;userCollection=[];_idx=0;get idx(){return this._idx}set idx(t){this._idx=t%this.cards.length,this._idx<0&&(this._idx+=this.cards.length)}_id;set id(t){this._id=+t;let e=this.userCollection.at(+t)||to;this.title=e?.title||"ERROR",this.cards=e?.cards||[]}get id(){return this._id}ngOnInit(){}static \u0275fac=function(e){return new(e||i)(D(qe))};static \u0275cmp=ee({type:i,selectors:[["app-vocab"]],inputs:{id:"id"},standalone:!0,features:[ie],decls:17,vars:5,consts:[[1,"page-container"],[1,"quiz-button",3,"routerLink"],[1,"flashcard"],[1,"arrow-buttons"],[1,"left-arrow",3,"click"],[1,"right-arrow",3,"click"],[1,"flashcard-table"],[3,"ngClass"],[1,"index"]],template:function(e,n){if(e&1&&(M(0,"div",0)(1,"h2"),$(2),O(),M(3,"button",1)(4,"span"),$(5,"Quiz"),O()(),M(6,"button",2)(7,"span"),$(8),O()(),M(9,"div",3)(10,"button",4),me("click",function(){return n.idx=n.idx-1}),$(11,"left"),O(),M(12,"button",5),me("click",function(){return n.idx=n.idx+1}),$(13,"right"),O()(),M(14,"table",6),Wr(15,vL,7,4,"tr",7,qr),O()()),e&2){let r;B(2),si(n.title),B(),Y("routerLink",gi(3,_L,n.id)),B(5),si((r=n.cards.at(n.idx))==null?null:r.frontText),B(7),Hr(n.cards)}},dependencies:[Yr,Ol,Kt],styles:["h2[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:center;font-family:Lily Script One}.page-container[_ngcontent-%COMP%]{display:block;width:100%;margin:auto;text-align:center;position:relative}button.flashcard[_ngcontent-%COMP%]{width:500px;height:250px;border-radius:24px;background-color:#d9d9d9;margin:20px;display:inline-block;text-align:center;justify-content:center;cursor:pointer}button.flashcard[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Libre Bodoni;font-weight:700;font-size:30px}.flashcard-table[_ngcontent-%COMP%]{border:1px solid black;width:80%;margin:auto}.flashcard-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid black}.flashcard-table[_ngcontent-%COMP%]   td.index[_ngcontent-%COMP%]{width:60px}.quiz-button[_ngcontent-%COMP%]{position:absolute;top:0;right:20px;width:100px;height:50px;border-radius:12px;background-color:#850b0d}.quiz-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:12px;color:#000;font-size:12px;font-style:italic;font-family:Libre Bodoni}.highlighted-row[_ngcontent-%COMP%]{background-color:#d9d9d9}"]})};var oT=[{path:"",component:rc},{path:"flashcards",component:Ru},{path:"set/:id",component:Nu},{path:"new-set",component:Ou},{path:"quiz/:id",component:Mu},{path:"account",canActivateChild:[TE],children:[{path:"register",component:Du},{path:"login",component:ku},{path:"profile",component:Pu}]},{path:"**",component:rc}];var x_=class{constructor(t,e){this._delegate=t,this.firebase=e,gs(t,new ut("app-compat",()=>this,"PUBLIC")),this.container=t.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this._delegate.automaticDataCollectionEnabled=t}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(t=>{this._delegate.checkDestroyed(),t()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),_a(this._delegate)))}_getService(t,e=Ci){var n;this._delegate.checkDestroyed();let r=this._delegate.container.getProvider(t);return!r.isInitialized()&&((n=r.getComponent())===null||n===void 0?void 0:n.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:e})}_removeServiceInstance(t,e=Ci){this._delegate.container.getProvider(t).clearInstance(e)}_addComponent(t){gs(this._delegate,t)}_addOrOverwriteComponent(t){Jm(this._delegate,t)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}};var bL={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},aT=new Qt("app-compat","Firebase",bL);function yL(i){let t={},e={__esModule:!0,initializeApp:s,app:r,registerVersion:Ie,setLogLevel:Kl,onLog:Gl,apps:null,SDK_VERSION:zt,INTERNAL:{registerComponent:c,removeApp:n,useAsService:l,modularAPIs:ef}};e.default=e,Object.defineProperty(e,"apps",{get:o});function n(u){delete t[u]}function r(u){if(u=u||Ci,!Ut(t,u))throw aT.create("no-app",{appName:u});return t[u]}r.App=i;function s(u,m={}){let p=_s(u,m);if(Ut(t,p.name))return t[p.name];let _=new i(p,e);return t[p.name]=_,_}function o(){return Object.keys(t).map(u=>t[u])}function c(u){let m=u.name,p=m.replace("-compat","");if(Bt(u)&&u.type==="PUBLIC"){let _=(S=r())=>{if(typeof S[p]!="function")throw aT.create("invalid-app-argument",{appName:m});return S[p]()};u.serviceProps!==void 0&&ds(_,u.serviceProps),e[p]=_,i.prototype[p]=function(...S){return this._getService.bind(this,m).apply(this,u.multipleInstances?S:[])}}return u.type==="PUBLIC"?e[p]:null}function l(u,m){return m==="serverAuth"?null:m}return e}function lT(){let i=yL(x_);i.INTERNAL=Object.assign(Object.assign({},i.INTERNAL),{createFirebaseNamespace:lT,extendNamespace:t,createSubscribe:Bl,ErrorFactory:Qt,deepExtend:ds});function t(e){ds(i,e)}return i}var wL=lT();var cT=new Yt("@firebase/app-compat"),IL="@firebase/app-compat",EL="0.2.43";function CL(i){Ie(IL,EL,i)}try{let i=Om();if(i.firebase!==void 0){cT.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);let t=i.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&cT.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}var Fu=wL;CL();var TL="firebase",xL="10.14.1";Fu.registerVersion(TL,xL,"app-compat");var dT=new U("angularfire2.app.options");var KH=typeof module<"u"&&!!module.hot;globalThis.\u0275AngularfireInstanceCache||=[];var uT={providers:[ew(()=>tw(ka.firebaseConfig)),e0(()=>n0()),S0(()=>A0()),EE(()=>Jd()),{provide:dT,useValue:ka.firebaseConfig},Zv({eventCoalescing:!0}),by(oT,xm()),Am(),Am(),yb()]};var Lu=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=ee({type:i,selectors:[["app-root"]],standalone:!0,features:[ie],decls:1,vars:0,template:function(e,n){e&1&&te(0,"app-layout")},dependencies:[Au]})};ka.production&&void 0;Ab(Lu,uT).catch(i=>console.error(i));
